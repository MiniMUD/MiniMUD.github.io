/*! For license information please see host.bundle.js.LICENSE.txt */
(self.webpackChunkworld_js=self.webpackChunkworld_js||[]).push([[403],{452:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],c=[],u=[],l=[],h=[],f=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,i[r]=p,o[p]=r;var m=e[r],v=e[m],g=e[v],y=257*e[p]^16843008*p;s[r]=y<<24|y>>>8,a[r]=y<<16|y>>>16,c[r]=y<<8|y>>>24,u[r]=y,y=16843009*g^65537*v^257*m^16843008*r,l[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,f[p]=y<<8|y>>>24,d[p]=y,r?(r=m^e[e[e[g^m]]],n^=e[e[n]]):r=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),o=this._keySchedule=[],s=0;s<n;s++)s<r?o[s]=t[s]:(u=o[s-1],s%r?r>6&&s%r==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=p[s/r|0]<<24),o[s]=o[s-r]^u);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(s=n-c,c%4)var u=o[s];else u=o[s-4];a[c]=c<4||s<=4?u:l[i[u>>>24]]^h[i[u>>>16&255]]^f[i[u>>>8&255]]^d[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,u,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,d,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var c=this._nRounds,u=e[t]^r[0],l=e[t+1]^r[1],h=e[t+2]^r[2],f=e[t+3]^r[3],d=4,p=1;p<c;p++){var m=n[u>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^r[d++],v=n[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&u]^r[d++],g=n[h>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&l]^r[d++],y=n[f>>>24]^i[u>>>16&255]^o[l>>>8&255]^s[255&h]^r[d++];u=m,l=v,h=g,f=y}m=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^r[d++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&u])^r[d++],g=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^r[d++],y=(a[f>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^r[d++],e[t]=m,e[t+1]=v,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=t._createHelper(m)}(),n.AES)},5109:function(e,t,r){var n,i,o,s,a,c,u,l,h,f,d,p,m,v,g,y,_,b,w;e.exports=(n=r(8249),r(888),void(n.lib.Cipher||(i=n,o=i.lib,s=o.Base,a=o.WordArray,c=o.BufferedBlockAlgorithm,u=i.enc,u.Utf8,l=u.Base64,h=i.algo.EvpKDF,f=o.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:_}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),o.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=d.CBC=function(){var e=p.extend();function t(e,t,r){var n,i=this._iv;i?(n=i,this._iv=void 0):n=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);n.decryptBlock(e,r),t.call(this,e,r,i),this._prevBlock=o}}),e}(),v=(i.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);var c=a.create(o,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=f.extend({cfg:f.cfg.extend({mode:m,padding:v}),reset:function(){var e;f.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),g=o.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.create([1398893684,1701076831]).concat(r).concat(t):t).toString(l)},parse:function(e){var t,r=l.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),g.create({ciphertext:r,salt:t})}},_=o.SerializableCipher=s.extend({cfg:s.extend({format:y}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),s=i.cfg;return g.create({ciphertext:o,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(i.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=a.random(8));var i=h.create({keySize:t+r}).compute(e,n),o=a.create(i.words.slice(t),4*r);return i.sigBytes=4*t,g.create({key:i,iv:o,salt:n})}},w=o.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=_.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,_.decrypt.call(this,e,t,i.key,n)}}))))},8249:function(e,t,r){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(2480)}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new u.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new u.init(r,t/2)}},f=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new u.init(r,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,o);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(i,h);r=i.splice(0,c),n.sigBytes-=l}return new u.init(r,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(a.Hasher=p.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new m.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math),n)},8269:function(e,t,r){var n,i,o;e.exports=(n=r(8249),o=(i=n).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var i=0;i<r.length;i++)n[r.charCodeAt(i)]=i}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,r){for(var n=[],i=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return o.create(n,i)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},3786:function(e,t,r){var n,i,o;e.exports=(n=r(8249),o=(i=n).lib.WordArray,i.enc.Base64url={stringify:function(e,t=!0){var r=e.words,n=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<n;s+=3)for(var a=(r[s>>>2]>>>24-s%4*8&255)<<16|(r[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|r[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<n;c++)o.push(i.charAt(a>>>6*(3-c)&63));var u=i.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,t=!0){var r=e.length,n=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<n.length;s++)i[n.charCodeAt(s)]=s}var a=n.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(r=c)}return function(e,t,r){for(var n=[],i=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;n[i>>>2]|=a<<24-i%4*8,i++}return o.create(n,i)}(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},n.enc.Base64url)},298:function(e,t,r){var n;e.exports=(n=r(8249),function(){var e=n,t=e.lib.WordArray,r=e.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var r=e.length,n=[],i=0;i<r;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(n,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o+=2){var s=i(t[o>>>2]>>>16-o%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var r=e.length,n=[],o=0;o<r;o++)n[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return t.create(n,2*r)}}}(),n.enc.Utf16)},888:function(e,t,r){var n,i,o,s,a,c,u,l;e.exports=(l=r(8249),r(2783),r(9824),o=(i=(n=l).lib).Base,s=i.WordArray,c=(a=n.algo).MD5,u=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,i=n.hasher.create(),o=s.create(),a=o.words,c=n.keySize,u=n.iterations;a.length<c;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)r=i.finalize(r),i.reset();o.concat(r)}return o.sigBytes=4*c,o}}),n.EvpKDF=function(e,t,r){return u.create(r).compute(e,t)},l.EvpKDF)},2209:function(e,t,r){var n,i,o,s;e.exports=(s=r(8249),r(5109),i=(n=s).lib.CipherParams,o=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return i.create({ciphertext:t})}},s.format.Hex)},9824:function(e,t,r){var n,i,o;e.exports=(i=(n=r(8249)).lib.Base,o=n.enc.Utf8,void(n.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,c=s.words,u=0;u<r;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},1354:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),r(4433),r(298),r(8269),r(3786),r(8214),r(2783),r(2153),r(7792),r(34),r(7460),r(3327),r(706),r(9824),r(2112),r(888),r(5109),r(8568),r(4242),r(9968),r(7660),r(1148),r(3615),r(2807),r(1077),r(6475),r(6991),r(2209),r(452),r(4253),r(1857),r(4454),r(3974),n)},4433:function(e,t,r){var n;e.exports=(n=r(8249),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],i=0;i<r;i++)n[i>>>2]|=e[i]<<24-i%4*8;t.call(this,n,r)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)},8214:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],d=e[t+2],p=e[t+3],m=e[t+4],v=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],k=e[t+11],C=e[t+12],S=e[t+13],x=e[t+14],E=e[t+15],T=o[0],R=o[1],P=o[2],O=o[3];T=u(T,R,P,O,s,7,a[0]),O=u(O,T,R,P,c,12,a[1]),P=u(P,O,T,R,d,17,a[2]),R=u(R,P,O,T,p,22,a[3]),T=u(T,R,P,O,m,7,a[4]),O=u(O,T,R,P,v,12,a[5]),P=u(P,O,T,R,g,17,a[6]),R=u(R,P,O,T,y,22,a[7]),T=u(T,R,P,O,_,7,a[8]),O=u(O,T,R,P,b,12,a[9]),P=u(P,O,T,R,w,17,a[10]),R=u(R,P,O,T,k,22,a[11]),T=u(T,R,P,O,C,7,a[12]),O=u(O,T,R,P,S,12,a[13]),P=u(P,O,T,R,x,17,a[14]),T=l(T,R=u(R,P,O,T,E,22,a[15]),P,O,c,5,a[16]),O=l(O,T,R,P,g,9,a[17]),P=l(P,O,T,R,k,14,a[18]),R=l(R,P,O,T,s,20,a[19]),T=l(T,R,P,O,v,5,a[20]),O=l(O,T,R,P,w,9,a[21]),P=l(P,O,T,R,E,14,a[22]),R=l(R,P,O,T,m,20,a[23]),T=l(T,R,P,O,b,5,a[24]),O=l(O,T,R,P,x,9,a[25]),P=l(P,O,T,R,p,14,a[26]),R=l(R,P,O,T,_,20,a[27]),T=l(T,R,P,O,S,5,a[28]),O=l(O,T,R,P,d,9,a[29]),P=l(P,O,T,R,y,14,a[30]),T=h(T,R=l(R,P,O,T,C,20,a[31]),P,O,v,4,a[32]),O=h(O,T,R,P,_,11,a[33]),P=h(P,O,T,R,k,16,a[34]),R=h(R,P,O,T,x,23,a[35]),T=h(T,R,P,O,c,4,a[36]),O=h(O,T,R,P,m,11,a[37]),P=h(P,O,T,R,y,16,a[38]),R=h(R,P,O,T,w,23,a[39]),T=h(T,R,P,O,S,4,a[40]),O=h(O,T,R,P,s,11,a[41]),P=h(P,O,T,R,p,16,a[42]),R=h(R,P,O,T,g,23,a[43]),T=h(T,R,P,O,b,4,a[44]),O=h(O,T,R,P,C,11,a[45]),P=h(P,O,T,R,E,16,a[46]),T=f(T,R=h(R,P,O,T,d,23,a[47]),P,O,s,6,a[48]),O=f(O,T,R,P,y,10,a[49]),P=f(P,O,T,R,x,15,a[50]),R=f(R,P,O,T,v,21,a[51]),T=f(T,R,P,O,C,6,a[52]),O=f(O,T,R,P,p,10,a[53]),P=f(P,O,T,R,w,15,a[54]),R=f(R,P,O,T,c,21,a[55]),T=f(T,R,P,O,_,6,a[56]),O=f(O,T,R,P,E,10,a[57]),P=f(P,O,T,R,g,15,a[58]),R=f(R,P,O,T,S,21,a[59]),T=f(T,R,P,O,m,6,a[60]),O=f(O,T,R,P,k,10,a[61]),P=f(P,O,T,R,d,15,a[62]),R=f(R,P,O,T,b,21,a[63]),o[0]=o[0]+T|0,o[1]=o[1]+R|0,o[2]=o[2]+P|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296),s=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function f(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)},8568:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,r,n){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,n.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=o}}),e}(),n.mode.CFB)},9968:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}var r=e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(s);var a=s.slice(0);n.encryptBlock(a,0);for(var c=0;c<i;c++)e[r+c]^=a[c]}});return e.Decryptor=r,e}(),n.mode.CTRGladman)},4242:function(e,t,r){var n,i,o;e.exports=(o=r(8249),r(5109),o.mode.CTR=(i=(n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=s[a]}}),n.Decryptor=i,n),o.mode.CTR)},1148:function(e,t,r){var n,i;e.exports=(i=r(8249),r(5109),i.mode.ECB=((n=i.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),i.mode.ECB)},7660:function(e,t,r){var n,i,o;e.exports=(o=r(8249),r(5109),o.mode.OFB=(i=(n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}}),n.Decryptor=i,n),o.mode.OFB)},3615:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)},2807:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.Iso10126={pad:function(e,t){var r=4*t,i=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},1077:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},6991:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},6475:function(e,t,r){var n;e.exports=(n=r(8249),r(5109),n.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},n.pad.ZeroPadding)},2112:function(e,t,r){var n,i,o,s,a,c,u,l,h;e.exports=(h=r(8249),r(2783),r(9824),o=(i=(n=h).lib).Base,s=i.WordArray,c=(a=n.algo).SHA1,u=a.HMAC,l=a.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=u.create(r.hasher,e),i=s.create(),o=s.create([1]),a=i.words,c=o.words,l=r.keySize,h=r.iterations;a.length<l;){var f=n.update(t).finalize(o);n.reset();for(var d=f.words,p=d.length,m=f,v=1;v<h;v++){m=n.finalize(m),n.reset();for(var g=m.words,y=0;y<p;y++)d[y]^=g[y]}i.concat(f),c[0]++}return i.sigBytes=4*l,i}}),n.PBKDF2=function(e,t,r){return l.create(r).compute(e,t)},h.PBKDF2)},3974:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],o=[],s=[],a=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)c.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var o=t.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=u>>>16|4294901760&l,f=l<<16|65535&u;for(n[0]^=u,n[1]^=h,n[2]^=l,n[3]^=f,n[4]^=u,n[5]^=h,n[6]^=l,n[7]^=f,i=0;i<4;i++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)o[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.RabbitLegacy=t._createHelper(a)}(),n.RabbitLegacy)},4454:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=[],o=[],s=[],a=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var o=t.words,s=o[0],a=o[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=u>>>16|4294901760&l,f=l<<16|65535&u;for(i[0]^=u,i[1]^=h,i[2]^=l,i[3]^=f,i[4]^=u,i[5]^=h,i[6]^=l,i[7]^=f,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),i[0]=r[0]^r[5]>>>16^r[3]<<16,i[1]=r[2]^r[7]>>>16^r[5]<<16,i[2]=r[4]^r[1]>>>16^r[7]<<16,i[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),e[t+n]^=i[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)o[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,a=n>>>16,c=((i*i>>>17)+i*a>>>15)+a*a,u=((4294901760&n)*n|0)+((65535&n)*n|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}e.Rabbit=t._createHelper(a)}(),n.Rabbit)},1857:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,i=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var o=0;i<256;i++){var s=i%r,a=t[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var c=n[i];n[i]=n[o],n[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}e.RC4=t._createHelper(i);var s=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(s)}(),n.RC4)},706:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),f=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,d,b,w,k,C,S,x,E,T,R=this._hash.words,P=h.words,O=f.words,A=a.words,B=c.words,I=u.words,j=l.words;for(k=o=R[0],C=s=R[1],S=d=R[2],x=b=R[3],E=w=R[4],r=0;r<80;r+=1)T=o+e[t+A[r]]|0,T+=r<16?p(s,d,b)+P[0]:r<32?m(s,d,b)+P[1]:r<48?v(s,d,b)+P[2]:r<64?g(s,d,b)+P[3]:y(s,d,b)+P[4],T=(T=_(T|=0,I[r]))+w|0,o=w,w=b,b=_(d,10),d=s,s=T,T=k+e[t+B[r]]|0,T+=r<16?y(C,S,x)+O[0]:r<32?g(C,S,x)+O[1]:r<48?v(C,S,x)+O[2]:r<64?m(C,S,x)+O[3]:p(C,S,x)+O[4],T=(T=_(T|=0,j[r]))+E|0,k=E,E=x,x=_(S,10),S=C,C=T;T=R[1]+d+x|0,R[1]=R[2]+b+E|0,R[2]=R[3]+w+k|0,R[3]=R[4]+o+C|0,R[4]=R[0]+s+S|0,R[0]=T},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function m(e,t,r){return e&t|~e&r}function v(e,t,r){return(e|~t)^r}function g(e,t,r){return e&r|t&~r}function y(e,t,r){return e^(t|~r)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(d),t.HmacRIPEMD160=o._createHmacHelper(d)}(Math),n.RIPEMD160)},2783:function(e,t,r){var n,i,o,s,a,c,u,l;e.exports=(i=(n=l=r(8249)).lib,o=i.WordArray,s=i.Hasher,a=n.algo,c=[],u=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var h=(n<<5|n>>>27)+a+c[u];h+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=n,n=h}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=s._createHelper(u),n.HmacSHA1=s._createHmacHelper(u),l.SHA1)},7792:function(e,t,r){var n,i,o,s,a,c;e.exports=(n=r(8249),r(2153),o=(i=n).lib.WordArray,s=i.algo,a=s.SHA256,c=s.SHA224=a.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=4,e}}),i.SHA224=a._createHelper(c),i.HmacSHA224=a._createHmacHelper(c),n.SHA224)},2153:function(e,t,r){var n;e.exports=(n=r(8249),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var u=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],h=r[6],f=r[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var p=u[d-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=u[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[d]=m+u[d-7]+g+u[d-16]}var y=n&i^n&o^i&o,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+c[d]+u[d];f=h,h=l,l=a,a=s+b|0,s=o,o=i,i=n,n=b+(_+y)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+h|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)},3327:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.x64.Word,a=t.algo,c=[],u=[],l=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,h=0,f=0;f<7;f++){if(1&i){var d=(1<<f)-1;d<32?h^=1<<d:a^=1<<d-32}128&i?i=i<<1^113:i<<=1}l[o]=s.create(a,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var f=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=e[t+2*i],s=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(R=r[i]).high^=s,R.low^=o}for(var a=0;a<24;a++){for(var f=0;f<5;f++){for(var d=0,p=0,m=0;m<5;m++)d^=(R=r[f+5*m]).high,p^=R.low;var v=h[f];v.high=d,v.low=p}for(f=0;f<5;f++){var g=h[(f+4)%5],y=h[(f+1)%5],_=y.high,b=y.low;for(d=g.high^(_<<1|b>>>31),p=g.low^(b<<1|_>>>31),m=0;m<5;m++)(R=r[f+5*m]).high^=d,R.low^=p}for(var w=1;w<25;w++){var k=(R=r[w]).high,C=R.low,S=c[w];S<32?(d=k<<S|C>>>32-S,p=C<<S|k>>>32-S):(d=C<<S-32|k>>>64-S,p=k<<S-32|C>>>64-S);var x=h[u[w]];x.high=d,x.low=p}var E=h[0],T=r[0];for(E.high=T.high,E.low=T.low,f=0;f<5;f++)for(m=0;m<5;m++){var R=r[w=f+5*m],P=h[w],O=h[(f+1)%5+5*m],A=h[(f+2)%5+5*m];R.high=P.high^~O.high&A.high,R.low=P.low^~O.low&A.low}R=r[0];var B=l[a];R.high^=B.high,R.low^=B.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,u=[],l=0;l<c;l++){var h=s[l],f=h.high,d=h.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(f)}return new i.init(u,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=o._createHelper(f),t.HmacSHA3=o._createHmacHelper(f)}(Math),n.SHA3)},7460:function(e,t,r){var n,i,o,s,a,c,u,l;e.exports=(l=r(8249),r(4938),r(34),i=(n=l).x64,o=i.Word,s=i.WordArray,a=n.algo,c=a.SHA512,u=a.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u),l.SHA384)},34:function(e,t,r){var n;e.exports=(n=r(8249),r(4938),function(){var e=n,t=e.lib.Hasher,r=e.x64,i=r.Word,o=r.WordArray,s=e.algo;function a(){return i.create.apply(i,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=a()}();var l=s.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],h=r[6],f=r[7],d=n.high,p=n.low,m=i.high,v=i.low,g=o.high,y=o.low,_=s.high,b=s.low,w=a.high,k=a.low,C=l.high,S=l.low,x=h.high,E=h.low,T=f.high,R=f.low,P=d,O=p,A=m,B=v,I=g,j=y,D=_,z=b,M=w,L=k,F=C,N=S,U=x,H=E,W=T,G=R,Z=0;Z<80;Z++){var $,q,V=u[Z];if(Z<16)q=V.high=0|e[t+2*Z],$=V.low=0|e[t+2*Z+1];else{var K=u[Z-15],J=K.high,Y=K.low,Q=(J>>>1|Y<<31)^(J>>>8|Y<<24)^J>>>7,X=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),ee=u[Z-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=u[Z-7],se=oe.high,ae=oe.low,ce=u[Z-16],ue=ce.high,le=ce.low;q=(q=(q=Q+se+(($=X+ae)>>>0<X>>>0?1:0))+ne+(($+=ie)>>>0<ie>>>0?1:0))+ue+(($+=le)>>>0<le>>>0?1:0),V.high=q,V.low=$}var he,fe=M&F^~M&U,de=L&N^~L&H,pe=P&A^P&I^A&I,me=O&B^O&j^B&j,ve=(P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7),ge=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7),ye=(M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9),_e=(L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9),be=c[Z],we=be.high,ke=be.low,Ce=W+ye+((he=G+_e)>>>0<G>>>0?1:0),Se=ge+me;W=U,G=H,U=F,H=N,F=M,N=L,M=D+(Ce=(Ce=(Ce=Ce+fe+((he+=de)>>>0<de>>>0?1:0))+we+((he+=ke)>>>0<ke>>>0?1:0))+q+((he+=$)>>>0<$>>>0?1:0))+((L=z+he|0)>>>0<z>>>0?1:0)|0,D=I,z=j,I=A,j=B,A=P,B=O,P=Ce+(ve+pe+(Se>>>0<ge>>>0?1:0))+((O=he+Se|0)>>>0<he>>>0?1:0)|0}p=n.low=p+O,n.high=d+P+(p>>>0<O>>>0?1:0),v=i.low=v+B,i.high=m+A+(v>>>0<B>>>0?1:0),y=o.low=y+j,o.high=g+I+(y>>>0<j>>>0?1:0),b=s.low=b+z,s.high=_+D+(b>>>0<z>>>0?1:0),k=a.low=k+L,a.high=w+M+(k>>>0<L>>>0?1:0),S=l.low=S+N,l.high=C+F+(S>>>0<N>>>0?1:0),E=h.low=E+H,h.high=x+U+(E>>>0<H>>>0?1:0),R=f.low=R+G,f.high=T+W+(R>>>0<G>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),n.SHA512)},4253:function(e,t,r){var n;e.exports=(n=r(8249),r(8269),r(8214),r(888),r(5109),function(){var e=n,t=e.lib,r=t.WordArray,i=t.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=s[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var u=i[o]=[],l=c[o];for(r=0;r<24;r++)u[r/6|0]|=t[(a[r]-1+l)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(a[r+24]-1+l)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var h=this._invSubKeys=[];for(r=0;r<16;r++)h[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),f.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=u[c][((s^i[c])&l[c])>>>0];this._lBlock=s,this._rBlock=o^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,f.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function d(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=h.createEncryptor(r.create(t)),this._des2=h.createEncryptor(r.create(n)),this._des3=h.createEncryptor(r.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),n.TripleDES)},4938:function(e,t,r){var n,i,o,s,a,c;e.exports=(n=r(8249),o=(i=n).lib,s=o.Base,a=o.WordArray,(c=i.x64={}).Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}}),n)},3536:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"0bda8f77aa9968889221327a49efa53c.minimud"},3162:function(e,t,r){var n,i;void 0===(i="function"==typeof(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){a(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,r,s){var a=o.URL||o.webkitURL,c=document.createElement("a");r=r||e.name||"download",c.download=r,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):n(c.href)?t(e,r,s):i(c,c.target="_blank")):(c.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,o){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),r);else if(n(e))t(e,r,o);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var a="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&c||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var h=o.URL||o.webkitURL,f=h.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,[]):n)||(e.exports=i)},5733:(e,t,r)=>{e.exports=function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var o=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,s,a,c,u,l=[],h=0,f=e.length,d=f,p="string"!==n.getTypeOf(e);h<e.length;)d=f-h,i=p?(t=e[h++],r=h<f?e[h++]:0,h<f?e[h++]:0):(t=e.charCodeAt(h++),r=h<f?e.charCodeAt(h++):0,h<f?e.charCodeAt(h++):0),s=t>>2,a=(3&t)<<4|r>>4,c=1<d?(15&r)<<2|i>>6:64,u=2<d?63&i:64,l.push(o.charAt(s)+o.charAt(a)+o.charAt(c)+o.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,s,a,c,u=0,l=0,h="data:";if(e.substr(0,5)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&d--,e.charAt(e.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|d):new Array(0|d);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(s=o.indexOf(e.charAt(u++)))>>4,r=(15&s)<<4|(a=o.indexOf(e.charAt(u++)))>>2,n=(3&a)<<6|(c=o.indexOf(e.charAt(u++))),f[l++]=t,64!==a&&(f[l++]=r),64!==c&&(f[l++]=n);return f}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,r){return e.pipe(new o).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var o=i,s=0+r;e^=-1;for(var a=0;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,r,n){var o=i,s=0+r;e^=-1;for(var a=0;a<s;a++)e=e>>>8^o[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),s=e("./stream/GenericWorker"),a=n?"uint8array":"array";function c(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",o.inherits(c,s),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,e.data),!1)},c.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,s,l){var h,f,d=e.file,p=e.compression,m=l!==a.utf8encode,v=o.transformTo("string",l(d.name)),g=o.transformTo("string",a.utf8encode(d.name)),y=d.comment,_=o.transformTo("string",l(y)),b=o.transformTo("string",a.utf8encode(y)),w=g.length!==d.name.length,k=b.length!==y.length,C="",S="",x="",E=d.dir,T=d.date,R={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(R.crc32=e.crc32,R.compressedSize=e.compressedSize,R.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),m||!w&&!k||(P|=2048);var O=0,A=0;E&&(O|=16),"UNIX"===s?(A=798,O|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(d.unixPermissions,E)):(A=20,O|=function(e){return 63&(e||0)}(d.dosPermissions)),h=T.getUTCHours(),h<<=6,h|=T.getUTCMinutes(),h<<=5,h|=T.getUTCSeconds()/2,f=T.getUTCFullYear()-1980,f<<=4,f|=T.getUTCMonth()+1,f<<=5,f|=T.getUTCDate(),w&&(S=n(1,1)+n(c(v),4)+g,C+="up"+n(S.length,2)+S),k&&(x=n(1,1)+n(c(_),4)+b,C+="uc"+n(x.length,2)+x);var B="";return B+="\n\0",B+=n(P,2),B+=p.magic,B+=n(h,2),B+=n(f,2),B+=n(R.crc32,4),B+=n(R.compressedSize,4),B+=n(R.uncompressedSize,4),B+=n(v.length,2),B+=n(C.length,2),{fileRecord:u.LOCAL_FILE_HEADER+B+v+C,dirRecord:u.CENTRAL_FILE_HEADER+n(A,2)+B+n(_.length,2)+"\0\0\0\0"+n(O,4)+n(i,4)+v+C+_}}var o=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=function(e,t,r,i,s){var a=o.transformTo("string",s(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(a.length,2)+a}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var o=new i(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,r){s++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),a=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,u=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:e,dir:c,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),o=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new s(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var o=0;o<n.length;o++)r.push(u(n[o]));return i.Promise.all(r)})).then((function(e){for(var i=e.shift(),o=i.files,s=0;s<o.length;s++){var a=o[s],c=a.fileNameStr,u=n.resolve(a.fileNameStr);r.file(u,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(r.file(u).unsafeOriginalName=c)}return i.zipComment.length&&(r.comment=i.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,i=o.getTypeOf(t),a=o.extend(r||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(n=p(e))&&v.call(this,n,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!h),(t instanceof u&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var g;g=t instanceof u||t instanceof s?t:f.isNode&&f.isStream(t)?new d(e,t):o.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new l(e,g,a);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),s=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),h=e("./generate"),f=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(g(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(g(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=v.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");o.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=h.generateWorker(this,r,n)}catch(e){(t=new s("error")).error(e)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),o=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new c(n.transformTo("uint8array",e)):new o(n.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function o(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,n),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,n),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),a=e("../support"),c=e("../external"),u=null;if(a.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t,r){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=r,n.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}l.prototype={accumulate:function(e){return function(e,t){return new c.Promise((function(r,i){var o=[],a=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,r){o.push(e),t&&t(r)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(c,function(e,t){var r,n=0,i=null,o=0;for(r=0;r<t.length;r++)o+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,o),u);r(e)}catch(e){i(e)}o=[]})).resume()}))}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,r.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,r,n,o,s,a=e.length,c=0;for(o=0;o<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),o=s=0;s<c;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,o,s=e.length,c=new Array(2*s);for(t=r=0;t<s;)if((i=e[t++])<128)c[r++]=i;else if(4<(o=a[i]))c[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<s;)i=i<<6|63&e[t++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(u,s),u.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}(t),c=t;s!==t.length&&(i.uint8array?(c=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(c=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(l,s),l.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),s=e("./external");function a(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,r){var n=[],i=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=u.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=l;var f={};f.string={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,o.allocBuffer(e.length))}},f.array={string:l,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return f[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var i=t[n];"."===i||""===i&&0!==n&&n!==t.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){setImmediate((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,o,a,u){return s.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var l=r.getTypeOf(t);return l?("arraybuffer"===l?t=r.transformTo("uint8array",t):"string"===l&&(u?t=i.decode(t):o&&!0!==a&&(t=function(e){return c(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),s=e("./zipEntry"),a=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!n&&(t=t.pipe(new s.Utf8EncodeWorker)),!o&&n&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)n.prototype[u[h]]=l;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return o.reject(e,n)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var s=p((function(){t(i,n)}));"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(i);return this.state!==c?h(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(f,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,c=-1,u=new this(i);++c<r;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==r||n||(n=!0,o.resolve(u,s))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,s=-1,a=new this(i);++s<t;)n=e[s],this.resolve(n).then((function(e){r||(r=!0,o.resolve(a,e))}),(function(e){r||(r=!0,o.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=-1,h=0,f=8;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==u)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,p))!==u)throw new Error(s[r]);this._dict_set=!0}}function p(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}d.prototype.push=function(e,t){var r,s,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(l),a.next_out=0,a.avail_out=l),1!==(r=n.deflate(a,s))&&r!==u)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):2!==s||(this.onEnd(u),!(a.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=d,r.deflate=p,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function f(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}h.prototype.push=function(e,t){var r,a,c,u,h,f,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?d.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(f="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&!0===v&&(r=s.Z_OK,v=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(d.output,d.next_out),u=d.next_out-c,h=o.buf2string(d.output,c),d.next_out=u,d.avail_out=p-u,u&&i.arraySet(d.output,d.output,c,u,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,s;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)o=e[t],s.set(o,i),i+=o.length;return s}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,o,s,a=e.length,c=0;for(o=0;o<a;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),o=s=0;s<c;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,o,a=t||e.length,u=new Array(2*a);for(r=n=0;r<a;)if((i=e[r++])<128)u[n++]=i;else if(4<(o=s[i]))u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<a;)i=i<<6|63&e[r++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return c(u,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;o=o+(i=i+t[n++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,s=i+r;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),c=e("./messages"),u=0,l=4,h=0,f=-2,d=2,p=8,m=286,v=30,g=19,y=2*m+1,_=15,b=3,w=258,k=w+b+1,C=42,S=113,x=1,E=2,T=3,R=4;function P(e,t){return e.msg=c[t],t}function O(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function B(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function I(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,B(e.strm)}function j(e,t){e.pending_buf[e.pending++]=t}function D(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function z(e,t){var r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,u=e.window,l=e.w_mask,h=e.prev,f=e.strstart+w,d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+s]===p&&u[r+s-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=w-(f-o),o=f-w,s<n){if(e.match_start=t,a<=(s=n))break;d=u[o+s-1],p=u[o+s]}}}while((t=h[t&l])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead}function M(e){var t,r,n,o,c,u,l,h,f,d,p=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-k)){for(i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=r=e.hash_size;n=e.head[--t],e.head[t]=p<=n?n-p:0,--r;);for(t=r=p;n=e.prev[--t],e.prev[t]=p<=n?n-p:0,--r;);o+=p}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,h=e.strstart+e.lookahead,d=void 0,(f=o)<(d=u.avail_in)&&(d=f),r=0===d?0:(u.avail_in-=d,i.arraySet(l,u.input,u.next_in,d,h),1===u.state.wrap?u.adler=s(u.adler,l,d,h):2===u.state.wrap&&(u.adler=a(u.adler,l,d,h)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=b)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+b-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<b)););}while(e.lookahead<k&&0!==e.strm.avail_in)}function L(e,t){for(var r,n;;){if(e.lookahead<k){if(M(e),e.lookahead<k&&t===u)return x;if(0===e.lookahead)break}if(r=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-k&&(e.match_length=z(e,r)),e.match_length>=b)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-b),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=b){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(I(e,!1),0===e.strm.avail_out))return x}return e.insert=e.strstart<b-1?e.strstart:b-1,t===l?(I(e,!0),0===e.strm.avail_out?T:R):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?x:E}function F(e,t){for(var r,n,i;;){if(e.lookahead<k){if(M(e),e.lookahead<k&&t===u)return x;if(0===e.lookahead)break}if(r=0,e.lookahead>=b&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=b-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-k&&(e.match_length=z(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===b&&4096<e.strstart-e.match_start)&&(e.match_length=b-1)),e.prev_length>=b&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-b,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-b),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+b-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=b-1,e.strstart++,n&&(I(e,!1),0===e.strm.avail_out))return x}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&I(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return x}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<b-1?e.strstart:b-1,t===l?(I(e,!0),0===e.strm.avail_out?T:R):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?x:E}function N(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function U(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*y),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*g+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(_+1),this.heap=new i.Buf16(2*m+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*m+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=d,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:S,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),h):P(e,f)}function W(e){var t=H(e);return t===h&&function(e){e.window_size=2*e.w_size,A(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=b-1,e.match_available=0,e.ins_h=0}(e.state),t}function G(e,t,r,n,o,s){if(!e)return f;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),o<1||9<o||r!==p||n<8||15<n||t<0||9<t||s<0||4<s)return P(e,f);8===n&&(n=9);var c=new U;return(e.state=c).strm=e,c.wrap=a,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+b-1)/b),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=r,W(e)}n=[new N(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(M(e),0===e.lookahead&&t===u)return x;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,I(e,!1),0===e.strm.avail_out))return x;if(e.strstart-e.block_start>=e.w_size-k&&(I(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===l?(I(e,!0),0===e.strm.avail_out?T:R):(e.strstart>e.block_start&&(I(e,!1),e.strm.avail_out),x)})),new N(4,4,8,4,L),new N(4,5,16,8,L),new N(4,6,32,32,L),new N(4,4,16,16,F),new N(8,16,32,32,F),new N(8,16,128,128,F),new N(8,32,128,256,F),new N(32,128,258,1024,F),new N(32,258,258,4096,F)],r.deflateInit=function(e,t){return G(e,t,p,15,8,0)},r.deflateInit2=G,r.deflateReset=W,r.deflateResetKeep=H,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,h):f},r.deflate=function(e,t){var r,i,s,c;if(!e||!e.state||5<t||t<0)return e?P(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return P(e,0===e.avail_out?-5:f);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===C)if(2===i.wrap)e.adler=0,j(i,31),j(i,139),j(i,8),i.gzhead?(j(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),j(i,255&i.gzhead.time),j(i,i.gzhead.time>>8&255),j(i,i.gzhead.time>>16&255),j(i,i.gzhead.time>>24&255),j(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),j(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(j(i,255&i.gzhead.extra.length),j(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(j(i,0),j(i,0),j(i,0),j(i,0),j(i,0),j(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),j(i,3),i.status=S);else{var d=p+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=S,D(i,d),0!==i.strstart&&(D(i,e.adler>>>16),D(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),B(e),s=i.pending,i.pending!==i.pending_buf_size));)j(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),B(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,j(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),B(e),s=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,j(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&B(e),i.pending+2<=i.pending_buf_size&&(j(i,255&e.adler),j(i,e.adler>>8&255),e.adler=0,i.status=S)):i.status=S),0!==i.pending){if(B(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&O(t)<=O(r)&&t!==l)return P(e,-5);if(666===i.status&&0!==e.avail_in)return P(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var m=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(M(e),0===e.lookahead)){if(t===u)return x;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(I(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===l?(I(e,!0),0===e.strm.avail_out?T:R):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?x:E}(i,t):3===i.strategy?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=w){if(M(e),e.lookahead<=w&&t===u)return x;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=b&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+w;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=w-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=b?(r=o._tr_tally(e,1,e.match_length-b),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(I(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===l?(I(e,!0),0===e.strm.avail_out?T:R):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?x:E}(i,t):n[i.level].func(i,t);if(m!==T&&m!==R||(i.status=666),m===x||m===T)return 0===e.avail_out&&(i.last_flush=-1),h;if(m===E&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(A(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),B(e),0===e.avail_out))return i.last_flush=-1,h}return t!==l?h:i.wrap<=0?1:(2===i.wrap?(j(i,255&e.adler),j(i,e.adler>>8&255),j(i,e.adler>>16&255),j(i,e.adler>>24&255),j(i,255&e.total_in),j(i,e.total_in>>8&255),j(i,e.total_in>>16&255),j(i,e.total_in>>24&255)):(D(i,e.adler>>>16),D(i,65535&e.adler)),B(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==S&&666!==t?P(e,f):(e.state=null,t===S?P(e,-3):h):f},r.deflateSetDictionary=function(e,t){var r,n,o,a,c,u,l,d,p=t.length;if(!e||!e.state)return f;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==C||r.lookahead)return f;for(1===a&&(e.adler=s(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===a&&(A(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,t,p-r.w_size,r.w_size,0),t=d,p=r.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=p,e.next_in=0,e.input=t,M(r);r.lookahead>=b;){for(n=r.strstart,o=r.lookahead-(b-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+b-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=b-1,M(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=b-1,r.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,r.wrap=a,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,o,s,a,c,u,l,h,f,d,p,m,v,g,y,_,b,w,k,C,S,x,E;r=e.state,n=e.next_in,x=e.input,i=n+(e.avail_in-5),o=e.next_out,E=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,h=r.wnext,f=r.window,d=r.hold,p=r.bits,m=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),_=m[d&g];t:for(;;){if(d>>>=b=_>>>24,p-=b,0==(b=_>>>16&255))E[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=m[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&_,(b&=15)&&(p<b&&(d+=x[n++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),_=v[d&y];r:for(;;){if(d>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=v[(65535&_)+(d&(1<<b)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(k=65535&_,p<(b&=15)&&(d+=x[n++]<<p,(p+=8)<b&&(d+=x[n++]<<p,p+=8)),c<(k+=d&(1<<b)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=b,p-=b,(b=o-s)<k){if(l<(b=k-b)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=f,(C=0)===h){if(C+=u-b,b<w){for(w-=b;E[o++]=f[C++],--b;);C=o-k,S=E}}else if(h<b){if(C+=u+h-b,(b-=h)<w){for(w-=b;E[o++]=f[C++],--b;);if(C=0,h<w){for(w-=b=h;E[o++]=f[C++],--b;);C=o-k,S=E}}}else if(C+=h-b,b<w){for(w-=b;E[o++]=f[C++],--b;);C=o-k,S=E}for(;2<w;)E[o++]=S[C++],E[o++]=S[C++],E[o++]=S[C++],w-=3;w&&(E[o++]=S[C++],1<w&&(E[o++]=S[C++]))}else{for(C=o-k;E[o++]=E[C++],E[o++]=E[C++],E[o++]=E[C++],2<(w-=3););w&&(E[o++]=E[C++],1<w&&(E[o++]=E[C++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),c=1,u=2,l=0,h=-2,f=1,d=852,p=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(d),t.distcode=t.distdyn=new n.Buf32(p),t.sane=1,t.back=-1,l):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):h}function _(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,y(e))):h}function b(e,t){var r,n;return e?(n=new v,(e.state=n).window=null,(r=_(e,t))!==l&&(e.state=null),r):h}var w,k,C=!0;function S(e){if(C){var t;for(w=new n.Buf32(512),k=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(c,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(u,e.lens,0,32,k,0,e.work,{bits:5}),C=!1}e.lencode=w,e.lenbits=9,e.distcode=k,e.distbits=5}function x(e,t,r,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),n.arraySet(s.window,t,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=y,r.inflateReset2=_,r.inflateResetKeep=g,r.inflateInit=function(e){return b(e,15)},r.inflateInit2=b,r.inflate=function(e,t){var r,d,p,v,g,y,_,b,w,k,C,E,T,R,P,O,A,B,I,j,D,z,M,L,F=0,N=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(r=e.state).mode&&(r.mode=13),g=e.next_out,p=e.output,_=e.avail_out,v=e.next_in,d=e.input,y=e.avail_in,b=r.hold,w=r.bits,k=y,C=_,z=l;e:for(;;)switch(r.mode){case f:if(0===r.wrap){r.mode=13;break}for(;w<16;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(2&r.wrap&&35615===b){N[r.check=0]=255&b,N[1]=b>>>8&255,r.check=o(r.check,N,2,0),w=b=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",r.mode=30;break}if(w-=4,D=8+(15&(b>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&b?10:12,w=b=0;break;case 2:for(;w<16;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(r.flags=b,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=b>>8&1),512&r.flags&&(N[0]=255&b,N[1]=b>>>8&255,r.check=o(r.check,N,2,0)),w=b=0,r.mode=3;case 3:for(;w<32;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.head&&(r.head.time=b),512&r.flags&&(N[0]=255&b,N[1]=b>>>8&255,N[2]=b>>>16&255,N[3]=b>>>24&255,r.check=o(r.check,N,4,0)),w=b=0,r.mode=4;case 4:for(;w<16;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.head&&(r.head.xflags=255&b,r.head.os=b>>8),512&r.flags&&(N[0]=255&b,N[1]=b>>>8&255,r.check=o(r.check,N,2,0)),w=b=0,r.mode=5;case 5:if(1024&r.flags){for(;w<16;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.length=b,r.head&&(r.head.extra_len=b),512&r.flags&&(N[0]=255&b,N[1]=b>>>8&255,r.check=o(r.check,N,2,0)),w=b=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(y<(E=r.length)&&(E=y),E&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,d,v,E,D)),512&r.flags&&(r.check=o(r.check,d,E,v)),y-=E,v+=E,r.length-=E),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===y)break e;for(E=0;D=d[v+E++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&E<y;);if(512&r.flags&&(r.check=o(r.check,d,E,v)),y-=E,v+=E,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===y)break e;for(E=0;D=d[v+E++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&E<y;);if(512&r.flags&&(r.check=o(r.check,d,E,v)),y-=E,v+=E,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;w<16;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(b!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}w=b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;w<32;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}e.adler=r.check=m(b),w=b=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=g,e.avail_out=_,e.next_in=v,e.avail_in=y,r.hold=b,r.bits=w,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){b>>>=7&w,w-=7&w,r.mode=27;break}for(;w<3;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}switch(r.last=1&b,w-=1,3&(b>>>=1)){case 0:r.mode=14;break;case 1:if(S(r),r.mode=20,6!==t)break;b>>>=2,w-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}b>>>=2,w-=2;break;case 14:for(b>>>=7&w,w-=7&w;w<32;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&b,w=b=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(E=r.length){if(y<E&&(E=y),_<E&&(E=_),0===E)break e;n.arraySet(p,d,v,E,g),y-=E,v+=E,_-=E,g+=E,r.length-=E;break}r.mode=12;break;case 17:for(;w<14;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(r.nlen=257+(31&b),b>>>=5,w-=5,r.ndist=1+(31&b),b>>>=5,w-=5,r.ncode=4+(15&b),b>>>=4,w-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;w<3;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.lens[U[r.have++]]=7&b,b>>>=3,w-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},z=a(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,z){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(F=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,A=65535&F,!((P=F>>>24)<=w);){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(A<16)b>>>=P,w-=P,r.lens[r.have++]=A;else{if(16===A){for(L=P+2;w<L;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(b>>>=P,w-=P,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],E=3+(3&b),b>>>=2,w-=2}else if(17===A){for(L=P+3;w<L;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}w-=P,D=0,E=3+(7&(b>>>=P)),b>>>=3,w-=3}else{for(L=P+7;w<L;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}w-=P,D=0,E=11+(127&(b>>>=P)),b>>>=7,w-=7}if(r.have+E>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;E--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},z=a(c,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,z){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},z=a(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,z){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=y&&258<=_){e.next_out=g,e.avail_out=_,e.next_in=v,e.avail_in=y,r.hold=b,r.bits=w,s(e,C),g=e.next_out,p=e.output,_=e.avail_out,v=e.next_in,d=e.input,y=e.avail_in,b=r.hold,w=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(F=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,A=65535&F,!((P=F>>>24)<=w);){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(O&&0==(240&O)){for(B=P,I=O,j=A;O=(F=r.lencode[j+((b&(1<<B+I)-1)>>B)])>>>16&255,A=65535&F,!(B+(P=F>>>24)<=w);){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}b>>>=B,w-=B,r.back+=B}if(b>>>=P,w-=P,r.back+=P,r.length=A,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(L=r.extra;w<L;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.length+=b&(1<<r.extra)-1,b>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(F=r.distcode[b&(1<<r.distbits)-1])>>>16&255,A=65535&F,!((P=F>>>24)<=w);){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(0==(240&O)){for(B=P,I=O,j=A;O=(F=r.distcode[j+((b&(1<<B+I)-1)>>B)])>>>16&255,A=65535&F,!(B+(P=F>>>24)<=w);){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}b>>>=B,w-=B,r.back+=B}if(b>>>=P,w-=P,r.back+=P,64&O){e.msg="invalid distance code",r.mode=30;break}r.offset=A,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(L=r.extra;w<L;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}r.offset+=b&(1<<r.extra)-1,b>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===_)break e;if(E=C-_,r.offset>E){if((E=r.offset-E)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}T=E>r.wnext?(E-=r.wnext,r.wsize-E):r.wnext-E,E>r.length&&(E=r.length),R=r.window}else R=p,T=g-r.offset,E=r.length;for(_<E&&(E=_),_-=E,r.length-=E;p[g++]=R[T++],--E;);0===r.length&&(r.mode=21);break;case 26:if(0===_)break e;p[g++]=r.length,_--,r.mode=21;break;case 27:if(r.wrap){for(;w<32;){if(0===y)break e;y--,b|=d[v++]<<w,w+=8}if(C-=_,e.total_out+=C,r.total+=C,C&&(e.adler=r.check=r.flags?o(r.check,p,C,g-C):i(r.check,p,C,g-C)),C=_,(r.flags?b:m(b))!==r.check){e.msg="incorrect data check",r.mode=30;break}w=b=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;w<32;){if(0===y)break e;y--,b+=d[v++]<<w,w+=8}if(b!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}w=b=0}r.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;default:return h}return e.next_out=g,e.avail_out=_,e.next_in=v,e.avail_in=y,r.hold=b,r.bits=w,(r.wsize||C!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&x(e,e.output,e.next_out,C-e.avail_out)?(r.mode=31,-4):(k-=e.avail_in,C-=e.avail_out,e.total_in+=k,e.total_out+=C,r.total+=C,r.wrap&&C&&(e.adler=r.check=r.flags?o(r.check,p,C,e.next_out-C):i(r.check,p,C,e.next_out-C)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==k&&0===C||4===t)&&z===l&&(z=-5),z)},r.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,l},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?h:((r.head=t).done=!1,l):h},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?h:11===r.mode&&i(1,t,n,0)!==r.check?-3:x(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,l):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,u,l,h,f){var d,p,m,v,g,y,_,b,w,k=f.bits,C=0,S=0,x=0,E=0,T=0,R=0,P=0,O=0,A=0,B=0,I=null,j=0,D=new n.Buf16(16),z=new n.Buf16(16),M=null,L=0;for(C=0;C<=15;C++)D[C]=0;for(S=0;S<c;S++)D[t[r+S]]++;for(T=k,E=15;1<=E&&0===D[E];E--);if(E<T&&(T=E),0===E)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(x=1;x<E&&0===D[x];x++);for(T<x&&(T=x),C=O=1;C<=15;C++)if(O<<=1,(O-=D[C])<0)return-1;if(0<O&&(0===e||1!==E))return-1;for(z[1]=0,C=1;C<15;C++)z[C+1]=z[C]+D[C];for(S=0;S<c;S++)0!==t[r+S]&&(h[z[t[r+S]]++]=S);if(y=0===e?(I=M=h,19):1===e?(I=i,j-=257,M=o,L-=257,256):(I=s,M=a,-1),C=x,g=l,P=S=B=0,m=-1,v=(A=1<<(R=T))-1,1===e&&852<A||2===e&&592<A)return 1;for(;;){for(_=C-P,w=h[S]<y?(b=0,h[S]):h[S]>y?(b=M[L+h[S]],I[j+h[S]]):(b=96,0),d=1<<C-P,x=p=1<<R;u[g+(B>>P)+(p-=d)]=_<<24|b<<16|w|0,0!==p;);for(d=1<<C-1;B&d;)d>>=1;if(0!==d?(B&=d-1,B+=d):B=0,S++,0==--D[C]){if(C===E)break;C=t[r+h[S]]}if(T<C&&(B&v)!==m){for(0===P&&(P=T),g+=x,O=1<<(R=C-P);R+P<E&&!((O-=D[R+P])<=0);)R++,O<<=1;if(A+=1<<R,1===e&&852<A||2===e&&592<A)return 1;u[m=B&v]=T<<24|R<<16|g-l|0}}return 0!==B&&(u[g+B]=C-P<<24|64<<16|0),f.bits=T,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=256,s=o+1+29,a=30,c=19,u=2*s+1,l=15,h=16,f=256,d=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],p=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=new Array(2*(s+2));i(g);var y=new Array(60);i(y);var _=new Array(512);i(_);var b=new Array(256);i(b);var w=new Array(29);i(w);var k,C,S,x=new Array(a);function E(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function T(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function R(e){return e<256?_[e]:_[256+(e>>>7)]}function P(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,r){e.bi_valid>h-r?(e.bi_buf|=t<<e.bi_valid&65535,P(e,e.bi_buf),e.bi_buf=t>>h-e.bi_valid,e.bi_valid+=r-h):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function A(e,t,r){O(e,r[2*t],r[2*t+1])}function B(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function I(e,t,r){var n,i,o=new Array(l+1),s=0;for(n=1;n<=l;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=B(o[a]++,a))}}function j(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<c;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*f]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){8<e.bi_valid?P(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function M(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function L(e,t,r){var n,i,s,a,c=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?A(e,i,t):(A(e,(s=b[i])+o+1,t),0!==(a=d[s])&&O(e,i-=w[s],a),A(e,s=R(--n),r),0!==(a=p[s])&&O(e,n-=x[s],a)),c<e.last_lit;);A(e,f,t)}function F(e,t){var r,n,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=u,r=0;r<c;r++)0!==o[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=h,r=e.heap_len>>1;1<=r;r--)M(e,o,r);for(i=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],M(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,M(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,s,a,c=t.dyn_tree,h=t.max_code,f=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,v=t.stat_desc.max_length,g=0;for(o=0;o<=l;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<u;r++)v<(o=c[2*c[2*(n=e.heap[r])+1]+1]+1)&&(o=v,g++),c[2*n+1]=o,h<n||(e.bl_count[o]++,s=0,m<=n&&(s=p[n-m]),a=c[2*n],e.opt_len+=a*(o+s),d&&(e.static_len+=a*(f[2*n+1]+s)));if(0!==g){do{for(o=v-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[v]--,g-=2}while(0<g);for(o=v;0!==o;o--)for(n=e.bl_count[o];0!==n;)h<(i=e.heap[--r])||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),n--)}}(e,t),I(o,h,e.bl_count)}function N(e,t,r){var n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<c&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,u=(a=0)===s?(c=138,3):i===s?(c=6,3):(c=7,4))}function U(e,t,r){var n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<c&&i===s)){if(a<u)for(;A(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==o&&(A(e,i,e.bl_tree),a--),A(e,16,e.bl_tree),O(e,a-3,2)):a<=10?(A(e,17,e.bl_tree),O(e,a-3,3)):(A(e,18,e.bl_tree),O(e,a-11,7));o=i,u=(a=0)===s?(c=138,3):i===s?(c=6,3):(c=7,4)}}i(x);var H=!1;function W(e,t,r,i){O(e,0+(i?1:0),3),function(e,t,r,i){D(e),P(e,r),P(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){H||(function(){var e,t,r,n,i,u=new Array(l+1);for(n=r=0;n<28;n++)for(w[n]=r,e=0;e<1<<d[n];e++)b[r++]=n;for(b[r-1]=n,n=i=0;n<16;n++)for(x[n]=i,e=0;e<1<<p[n];e++)_[i++]=n;for(i>>=7;n<a;n++)for(x[n]=i<<7,e=0;e<1<<p[n]-7;e++)_[256+i++]=n;for(t=0;t<=l;t++)u[t]=0;for(e=0;e<=143;)g[2*e+1]=8,e++,u[8]++;for(;e<=255;)g[2*e+1]=9,e++,u[9]++;for(;e<=279;)g[2*e+1]=7,e++,u[7]++;for(;e<=287;)g[2*e+1]=8,e++,u[8]++;for(I(g,s+1,u),e=0;e<a;e++)y[2*e+1]=5,y[2*e]=B(e,5);k=new E(g,d,o+1,s,l),C=new E(y,p,0,a,l),S=new E(new Array(0),m,0,c,7)}(),H=!0),e.l_desc=new T(e.dyn_ltree,k),e.d_desc=new T(e.dyn_dtree,C),e.bl_desc=new T(e.bl_tree,S),e.bi_buf=0,e.bi_valid=0,j(e)},r._tr_stored_block=W,r._tr_flush_block=function(e,t,r,n){var i,s,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),F(e,e.l_desc),F(e,e.d_desc),a=function(e){var t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),F(e,e.bl_desc),t=c-1;3<=t&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?W(e,t,r,n):4===e.strategy||s===i?(O(e,2+(n?1:0),3),L(e,g,y)):(O(e,4+(n?1:0),3),function(e,t,r,n){var i;for(O(e,t-257,5),O(e,r-1,5),O(e,n-4,4),i=0;i<n;i++)O(e,e.bl_tree[2*v[i]+1],3);U(e,e.dyn_ltree,t-1),U(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),L(e,e.dyn_ltree,e.dyn_dtree)),j(e),n&&D(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(b[r]+o+1)]++,e.dyn_dtree[2*R(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){O(e,2,3),A(e,f,g),function(e){16===e.bi_valid?(P(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,n,i,o,s=1,a={},c=!1,u=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,r="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(f,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return a[s]=i,r(s),s++},l.clearImmediate=h}function h(e){delete a[e]}function f(e){if(c)setTimeout(f,0,e);else{var r=a[e];if(r){c=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{h(e),c=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},6486:function(e,t,r){var n;e=r.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,u=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],m="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",_="[object Error]",b="[object Function]",w="[object GeneratorFunction]",k="[object Map]",C="[object Number]",S="[object Object]",x="[object Promise]",E="[object RegExp]",T="[object Set]",R="[object String]",P="[object Symbol]",O="[object WeakMap]",A="[object ArrayBuffer]",B="[object DataView]",I="[object Float32Array]",j="[object Float64Array]",D="[object Int8Array]",z="[object Int16Array]",M="[object Int32Array]",L="[object Uint8Array]",F="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",H=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,q=RegExp(Z.source),V=RegExp($.source),K=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ne=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,be=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="["+we+"]",Pe="["+Te+"]",Oe="["+ke+"]",Ae="\\d+",Be="["+Ce+"]",Ie="["+Se+"]",je="[^"+we+Te+Ae+Ce+Se+xe+"]",De="\\ud83c[\\udffb-\\udfff]",ze="[^"+we+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+xe+"]",Ne="\\u200d",Ue="(?:"+Ie+"|"+je+")",He="(?:"+Fe+"|"+je+")",We="(?:['](?:d|ll|m|re|s|t|ve))?",Ge="(?:['](?:D|LL|M|RE|S|T|VE))?",Ze="(?:"+Oe+"|"+De+")?",$e="["+Ee+"]?",qe=$e+Ze+"(?:"+Ne+"(?:"+[ze,Me,Le].join("|")+")"+$e+Ze+")*",Ve="(?:"+[Be,Me,Le].join("|")+")"+qe,Ke="(?:"+[ze+Oe+"?",Oe,Me,Le,Re].join("|")+")",Je=RegExp("[']","g"),Ye=RegExp(Oe,"g"),Qe=RegExp(De+"(?="+De+")|"+Ke+qe,"g"),Xe=RegExp([Fe+"?"+Ie+"+"+We+"(?="+[Pe,Fe,"$"].join("|")+")",He+"+"+Ge+"(?="+[Pe,Fe+Ue,"$"].join("|")+")",Fe+"?"+Ue+"+"+We,Fe+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Ve].join("|"),"g"),et=RegExp("["+Ne+we+ke+Ee+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,it={};it[I]=it[j]=it[D]=it[z]=it[M]=it[L]=it[F]=it[N]=it[U]=!0,it[m]=it[v]=it[A]=it[g]=it[B]=it[y]=it[_]=it[b]=it[k]=it[C]=it[S]=it[E]=it[T]=it[R]=it[O]=!1;var ot={};ot[m]=ot[v]=ot[A]=ot[B]=ot[g]=ot[y]=ot[I]=ot[j]=ot[D]=ot[z]=ot[M]=ot[k]=ot[C]=ot[S]=ot[E]=ot[T]=ot[R]=ot[P]=ot[L]=ot[F]=ot[N]=ot[U]=!0,ot[_]=ot[b]=ot[O]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,ct=parseInt,ut="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,lt="object"==typeof self&&self&&self.Object===Object&&self,ht=ut||lt||Function("return this")(),ft=t&&!t.nodeType&&t,dt=ft&&e&&!e.nodeType&&e,pt=dt&&dt.exports===ft,mt=pt&&ut.process,vt=function(){try{return dt&&dt.require&&dt.require("util").types||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),gt=vt&&vt.isArrayBuffer,yt=vt&&vt.isDate,_t=vt&&vt.isMap,bt=vt&&vt.isRegExp,wt=vt&&vt.isSet,kt=vt&&vt.isTypedArray;function Ct(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function St(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function xt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Et(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Rt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Pt(e,t){return!(null==e||!e.length)&&Ft(e,t,0)>-1}function Ot(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function At(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Bt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function It(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function jt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Dt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var zt=Wt("length");function Mt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Lt(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ft(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Lt(e,Ut,r)}function Nt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Ut(e){return e!=e}function Ht(e,t){var r=null==e?0:e.length;return r?$t(e,t)/r:f}function Wt(e){return function(t){return null==t?i:t[e]}}function Gt(e){return function(t){return null==e?i:e[t]}}function Zt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function $t(e,t){for(var r,n=-1,o=e.length;++n<o;){var s=t(e[n]);s!==i&&(r=r===i?s:r+s)}return r}function qt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Vt(e){return e?e.slice(0,hr(e)+1).replace(ne,""):e}function Kt(e){return function(t){return e(t)}}function Jt(e,t){return At(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Qt(e,t){for(var r=-1,n=e.length;++r<n&&Ft(t,e[r],0)>-1;);return r}function Xt(e,t){for(var r=e.length;r--&&Ft(t,e[r],0)>-1;);return r}var er=Gt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tr=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rr(e){return"\\"+st[e]}function nr(e){return et.test(e)}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function or(e,t){return function(r){return e(t(r))}}function sr(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==a||(e[r]=a,o[i++]=r)}return o}function ar(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function cr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function ur(e){return nr(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):zt(e)}function lr(e){return nr(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function hr(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var fr=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dr=function e(t){var r,n=(t=null==t?ht:dr.defaults(ht.Object(),t,dr.pick(ht,rt))).Array,ie=t.Date,we=t.Error,ke=t.Function,Ce=t.Math,Se=t.Object,xe=t.RegExp,Ee=t.String,Te=t.TypeError,Re=n.prototype,Pe=ke.prototype,Oe=Se.prototype,Ae=t["__core-js_shared__"],Be=Pe.toString,Ie=Oe.hasOwnProperty,je=0,De=(r=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",ze=Oe.toString,Me=Be.call(Se),Le=ht._,Fe=xe("^"+Be.call(Ie).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=pt?t.Buffer:i,Ue=t.Symbol,He=t.Uint8Array,We=Ne?Ne.allocUnsafe:i,Ge=or(Se.getPrototypeOf,Se),Ze=Se.create,$e=Oe.propertyIsEnumerable,qe=Re.splice,Ve=Ue?Ue.isConcatSpreadable:i,Ke=Ue?Ue.iterator:i,Qe=Ue?Ue.toStringTag:i,et=function(){try{var e=co(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),st=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ut=ie&&ie.now!==ht.Date.now&&ie.now,lt=t.setTimeout!==ht.setTimeout&&t.setTimeout,ft=Ce.ceil,dt=Ce.floor,mt=Se.getOwnPropertySymbols,vt=Ne?Ne.isBuffer:i,zt=t.isFinite,Gt=Re.join,pr=or(Se.keys,Se),mr=Ce.max,vr=Ce.min,gr=ie.now,yr=t.parseInt,_r=Ce.random,br=Re.reverse,wr=co(t,"DataView"),kr=co(t,"Map"),Cr=co(t,"Promise"),Sr=co(t,"Set"),xr=co(t,"WeakMap"),Er=co(Se,"create"),Tr=xr&&new xr,Rr={},Pr=Mo(wr),Or=Mo(kr),Ar=Mo(Cr),Br=Mo(Sr),Ir=Mo(xr),jr=Ue?Ue.prototype:i,Dr=jr?jr.valueOf:i,zr=jr?jr.toString:i;function Mr(e){if(ea(e)&&!Ws(e)&&!(e instanceof Ur)){if(e instanceof Nr)return e;if(Ie.call(e,"__wrapped__"))return Lo(e)}return new Nr(e)}var Lr=function(){function e(){}return function(t){if(!Xs(t))return{};if(Ze)return Ze(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function Fr(){}function Nr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Zr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Gr;++t<r;)this.add(e[t])}function $r(e){var t=this.__data__=new Wr(e);this.size=t.size}function qr(e,t){var r=Ws(e),n=!r&&Hs(e),i=!r&&!n&&qs(e),o=!r&&!n&&!i&&ca(e),s=r||n||i||o,a=s?qt(e.length,Ee):[],c=a.length;for(var u in e)!t&&!Ie.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vo(u,c))||a.push(u);return a}function Vr(e){var t=e.length;return t?e[Zn(0,t-1)]:i}function Kr(e,t){return Bo(Ei(e),on(t,0,e.length))}function Jr(e){return Bo(Ei(e))}function Yr(e,t,r){(r!==i&&!Fs(e[t],r)||r===i&&!(t in e))&&rn(e,t,r)}function Qr(e,t,r){var n=e[t];Ie.call(e,t)&&Fs(n,r)&&(r!==i||t in e)||rn(e,t,r)}function Xr(e,t){for(var r=e.length;r--;)if(Fs(e[r][0],t))return r;return-1}function en(e,t,r,n){return ln(e,(function(e,i,o){t(n,e,r(e),o)})),n}function tn(e,t){return e&&Ti(t,Oa(t),e)}function rn(e,t,r){"__proto__"==t&&et?et(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function nn(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:xa(e,t[r]);return s}function on(e,t,r){return e==e&&(r!==i&&(e=e<=r?e:r),t!==i&&(e=e>=t?e:t)),e}function sn(e,t,r,n,o,s){var a,c=1&t,u=2&t,l=4&t;if(r&&(a=o?r(e,n,o,s):r(e)),a!==i)return a;if(!Xs(e))return e;var h=Ws(e);if(h){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!c)return Ei(e,a)}else{var f=ho(e),d=f==b||f==w;if(qs(e))return bi(e,c);if(f==S||f==m||d&&!o){if(a=u||d?{}:po(e),!c)return u?function(e,t){return Ti(e,lo(e),t)}(e,function(e,t){return e&&Ti(t,Aa(t),e)}(a,e)):function(e,t){return Ti(e,uo(e),t)}(e,tn(a,e))}else{if(!ot[f])return o?e:{};a=function(e,t,r){var n,i=e.constructor;switch(t){case A:return wi(e);case g:case y:return new i(+e);case B:return function(e,t){var r=t?wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case I:case j:case D:case z:case M:case L:case F:case N:case U:return ki(e,r);case k:return new i;case C:case R:return new i(e);case E:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new i;case P:return n=e,Dr?Se(Dr.call(n)):{}}}(e,f,c)}}s||(s=new $r);var p=s.get(e);if(p)return p;s.set(e,a),oa(e)?e.forEach((function(n){a.add(sn(n,t,r,n,e,s))})):ta(e)&&e.forEach((function(n,i){a.set(i,sn(n,t,r,i,e,s))}));var v=h?i:(l?u?to:eo:u?Aa:Oa)(e);return xt(v||e,(function(n,i){v&&(n=e[i=n]),Qr(a,i,sn(n,t,r,i,e,s))})),a}function an(e,t,r){var n=r.length;if(null==e)return!n;for(e=Se(e);n--;){var o=r[n],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function cn(e,t,r){if("function"!=typeof e)throw new Te(o);return Ro((function(){e.apply(i,r)}),t)}function un(e,t,r,n){var i=-1,o=Pt,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;r&&(t=At(t,Kt(r))),n?(o=Ot,s=!1):t.length>=200&&(o=Yt,s=!1,t=new Zr(t));e:for(;++i<a;){var l=e[i],h=null==r?l:r(l);if(l=n||0!==l?l:0,s&&h==h){for(var f=u;f--;)if(t[f]===h)continue e;c.push(l)}else o(t,h,n)||c.push(l)}return c}Mr.templateSettings={escape:K,evaluate:J,interpolate:Y,variable:"",imports:{_:Mr}},Mr.prototype=Fr.prototype,Mr.prototype.constructor=Mr,Nr.prototype=Lr(Fr.prototype),Nr.prototype.constructor=Nr,Ur.prototype=Lr(Fr.prototype),Ur.prototype.constructor=Ur,Hr.prototype.clear=function(){this.__data__=Er?Er(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(e){var t=this.__data__;if(Er){var r=t[e];return r===s?i:r}return Ie.call(t,e)?t[e]:i},Hr.prototype.has=function(e){var t=this.__data__;return Er?t[e]!==i:Ie.call(t,e)},Hr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Er&&t===i?s:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=Xr(t,e);return!(r<0||(r==t.length-1?t.pop():qe.call(t,r,1),--this.size,0))},Wr.prototype.get=function(e){var t=this.__data__,r=Xr(t,e);return r<0?i:t[r][1]},Wr.prototype.has=function(e){return Xr(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,n=Xr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Gr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(kr||Wr),string:new Hr}},Gr.prototype.delete=function(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t},Gr.prototype.get=function(e){return so(this,e).get(e)},Gr.prototype.has=function(e){return so(this,e).has(e)},Gr.prototype.set=function(e,t){var r=so(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Zr.prototype.add=Zr.prototype.push=function(e){return this.__data__.set(e,s),this},Zr.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.clear=function(){this.__data__=new Wr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!kr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gr(n)}return r.set(e,t),this.size=r.size,this};var ln=Oi(yn),hn=Oi(_n,!0);function fn(e,t){var r=!0;return ln(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function dn(e,t,r){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(c===i?a==a&&!aa(a):r(a,c)))var c=a,u=s}return u}function pn(e,t){var r=[];return ln(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function mn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=mo),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?mn(a,t-1,r,n,i):Bt(i,a):n||(i[i.length]=a)}return i}var vn=Ai(),gn=Ai(!0);function yn(e,t){return e&&vn(e,t,Oa)}function _n(e,t){return e&&gn(e,t,Oa)}function bn(e,t){return Rt(t,(function(t){return Js(e[t])}))}function wn(e,t){for(var r=0,n=(t=vi(t,e)).length;null!=e&&r<n;)e=e[zo(t[r++])];return r&&r==n?e:i}function kn(e,t,r){var n=t(e);return Ws(e)?n:Bt(n,r(e))}function Cn(e){return null==e?e===i?"[object Undefined]":"[object Null]":Qe&&Qe in Se(e)?function(e){var t=Ie.call(e,Qe),r=e[Qe];try{e[Qe]=i;var n=!0}catch(e){}var o=ze.call(e);return n&&(t?e[Qe]=r:delete e[Qe]),o}(e):function(e){return ze.call(e)}(e)}function Sn(e,t){return e>t}function xn(e,t){return null!=e&&Ie.call(e,t)}function En(e,t){return null!=e&&t in Se(e)}function Tn(e,t,r){for(var o=r?Ot:Pt,s=e[0].length,a=e.length,c=a,u=n(a),l=1/0,h=[];c--;){var f=e[c];c&&t&&(f=At(f,Kt(t))),l=vr(f.length,l),u[c]=!r&&(t||s>=120&&f.length>=120)?new Zr(c&&f):i}f=e[0];var d=-1,p=u[0];e:for(;++d<s&&h.length<l;){var m=f[d],v=t?t(m):m;if(m=r||0!==m?m:0,!(p?Yt(p,v):o(h,v,r))){for(c=a;--c;){var g=u[c];if(!(g?Yt(g,v):o(e[c],v,r)))continue e}p&&p.push(v),h.push(m)}}return h}function Rn(e,t,r){var n=null==(e=xo(e,t=vi(t,e)))?e:e[zo(Ko(t))];return null==n?i:Ct(n,e,r)}function Pn(e){return ea(e)&&Cn(e)==m}function On(e,t,r,n,o){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,r,n,o,s){var a=Ws(e),c=Ws(t),u=a?v:ho(e),l=c?v:ho(t),h=(u=u==m?S:u)==S,f=(l=l==m?S:l)==S,d=u==l;if(d&&qs(e)){if(!qs(t))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new $r),a||ca(e)?Qi(e,t,r,n,o,s):function(e,t,r,n,i,o,s){switch(r){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case g:case y:case C:return Fs(+e,+t);case _:return e.name==t.name&&e.message==t.message;case E:case R:return e==t+"";case k:var a=ir;case T:var c=1&n;if(a||(a=ar),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var l=Qi(a(e),a(t),n,i,o,s);return s.delete(e),l;case P:if(Dr)return Dr.call(e)==Dr.call(t)}return!1}(e,t,u,r,n,o,s);if(!(1&r)){var p=h&&Ie.call(e,"__wrapped__"),b=f&&Ie.call(t,"__wrapped__");if(p||b){var w=p?e.value():e,x=b?t.value():t;return s||(s=new $r),o(w,x,r,n,s)}}return!!d&&(s||(s=new $r),function(e,t,r,n,o,s){var a=1&r,c=eo(e),u=c.length;if(u!=eo(t).length&&!a)return!1;for(var l=u;l--;){var h=c[l];if(!(a?h in t:Ie.call(t,h)))return!1}var f=s.get(e),d=s.get(t);if(f&&d)return f==t&&d==e;var p=!0;s.set(e,t),s.set(t,e);for(var m=a;++l<u;){var v=e[h=c[l]],g=t[h];if(n)var y=a?n(g,v,h,t,e,s):n(v,g,h,e,t,s);if(!(y===i?v===g||o(v,g,r,n,s):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,r,n,o,s))}(e,t,r,n,On,o))}function An(e,t,r,n){var o=r.length,s=o,a=!n;if(null==e)return!s;for(e=Se(e);o--;){var c=r[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=r[o])[0],l=e[u],h=c[1];if(a&&c[2]){if(l===i&&!(u in e))return!1}else{var f=new $r;if(n)var d=n(l,h,u,e,t,f);if(!(d===i?On(h,l,3,n,f):d))return!1}}return!0}function Bn(e){return!(!Xs(e)||(t=e,De&&De in t))&&(Js(e)?Fe:me).test(Mo(e));var t}function In(e){return"function"==typeof e?e:null==e?rc:"object"==typeof e?Ws(e)?Ln(e[0],e[1]):Mn(e):hc(e)}function jn(e){if(!wo(e))return pr(e);var t=[];for(var r in Se(e))Ie.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Dn(e,t){return e<t}function zn(e,t){var r=-1,i=Zs(e)?n(e.length):[];return ln(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Mn(e){var t=ao(e);return 1==t.length&&t[0][2]?Co(t[0][0],t[0][1]):function(r){return r===e||An(r,e,t)}}function Ln(e,t){return yo(e)&&ko(t)?Co(zo(e),t):function(r){var n=xa(r,e);return n===i&&n===t?Ea(r,e):On(t,n,3)}}function Fn(e,t,r,n,o){e!==t&&vn(t,(function(s,a){if(o||(o=new $r),Xs(s))!function(e,t,r,n,o,s,a){var c=Eo(e,r),u=Eo(t,r),l=a.get(u);if(l)Yr(e,r,l);else{var h=s?s(c,u,r+"",e,t,a):i,f=h===i;if(f){var d=Ws(u),p=!d&&qs(u),m=!d&&!p&&ca(u);h=u,d||p||m?Ws(c)?h=c:$s(c)?h=Ei(c):p?(f=!1,h=bi(u,!0)):m?(f=!1,h=ki(u,!0)):h=[]:na(u)||Hs(u)?(h=c,Hs(c)?h=va(c):Xs(c)&&!Js(c)||(h=po(u))):f=!1}f&&(a.set(u,h),o(h,u,n,s,a),a.delete(u)),Yr(e,r,h)}}(e,t,a,r,Fn,n,o);else{var c=n?n(Eo(e,a),s,a+"",e,t,o):i;c===i&&(c=s),Yr(e,a,c)}}),Aa)}function Nn(e,t){var r=e.length;if(r)return vo(t+=t<0?r:0,r)?e[t]:i}function Un(e,t,r){t=t.length?At(t,(function(e){return Ws(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e})):[rc];var n=-1;t=At(t,Kt(oo()));var i=zn(e,(function(e,r,i){var o=At(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var c=Ci(i[n],o[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));n--;)e[n]=e[n].value;return e}(i)}function Hn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=wn(e,s);r(a,s)&&Jn(o,vi(s,e),a)}return o}function Wn(e,t,r,n){var i=n?Nt:Ft,o=-1,s=t.length,a=e;for(e===t&&(t=Ei(t)),r&&(a=At(e,Kt(r)));++o<s;)for(var c=0,u=t[o],l=r?r(u):u;(c=i(a,l,c,n))>-1;)a!==e&&qe.call(a,c,1),qe.call(e,c,1);return e}function Gn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;vo(i)?qe.call(e,i,1):ci(e,i)}}return e}function Zn(e,t){return e+dt(_r()*(t-e+1))}function $n(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=dt(t/2))&&(e+=e)}while(t);return r}function qn(e,t){return Po(So(e,t,rc),e+"")}function Vn(e){return Vr(Fa(e))}function Kn(e,t){var r=Fa(e);return Bo(r,on(t,0,r.length))}function Jn(e,t,r,n){if(!Xs(e))return e;for(var o=-1,s=(t=vi(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var u=zo(t[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var h=c[u];(l=n?n(h,u,c):i)===i&&(l=Xs(h)?h:vo(t[o+1])?[]:{})}Qr(c,u,l),c=c[u]}return e}var Yn=Tr?function(e,t){return Tr.set(e,t),e}:rc,Qn=et?function(e,t){return et(e,"toString",{configurable:!0,enumerable:!1,value:Xa(t),writable:!0})}:rc;function Xn(e){return Bo(Fa(e))}function ei(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function ti(e,t){var r;return ln(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!aa(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return ni(e,t,rc,r)}function ni(e,t,r,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=r(t))!=t,c=null===t,u=aa(t),l=t===i;o<s;){var h=dt((o+s)/2),f=r(e[h]),d=f!==i,p=null===f,m=f==f,v=aa(f);if(a)var g=n||m;else g=l?m&&(n||d):c?m&&d&&(n||!p):u?m&&d&&!p&&(n||!v):!p&&!v&&(n?f<=t:f<t);g?o=h+1:s=h}return vr(s,4294967294)}function ii(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!Fs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function oi(e){return"number"==typeof e?e:aa(e)?f:+e}function si(e){if("string"==typeof e)return e;if(Ws(e))return At(e,si)+"";if(aa(e))return zr?zr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ai(e,t,r){var n=-1,i=Pt,o=e.length,s=!0,a=[],c=a;if(r)s=!1,i=Ot;else if(o>=200){var u=t?null:$i(e);if(u)return ar(u);s=!1,i=Yt,c=new Zr}else c=t?[]:a;e:for(;++n<o;){var l=e[n],h=t?t(l):l;if(l=r||0!==l?l:0,s&&h==h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),a.push(l)}else i(c,h,r)||(c!==a&&c.push(h),a.push(l))}return a}function ci(e,t){return null==(e=xo(e,t=vi(t,e)))||delete e[zo(Ko(t))]}function ui(e,t,r,n){return Jn(e,t,r(wn(e,t)),n)}function li(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ei(e,n?0:o,n?o+1:i):ei(e,n?o+1:0,n?i:o)}function hi(e,t){var r=e;return r instanceof Ur&&(r=r.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,Bt([e],t.args))}),r)}function fi(e,t,r){var i=e.length;if(i<2)return i?ai(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=un(s[o]||a,e[c],t,r));return ai(mn(s,1),t,r)}function di(e,t,r){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var c=n<s?t[n]:i;r(a,e[n],c)}return a}function pi(e){return $s(e)?e:[]}function mi(e){return"function"==typeof e?e:rc}function vi(e,t){return Ws(e)?e:yo(e,t)?[e]:Do(ga(e))}var gi=qn;function yi(e,t,r){var n=e.length;return r=r===i?n:r,!t&&r>=n?e:ei(e,t,r)}var _i=st||function(e){return ht.clearTimeout(e)};function bi(e,t){if(t)return e.slice();var r=e.length,n=We?We(r):new e.constructor(r);return e.copy(n),n}function wi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function ki(e,t){var r=t?wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var r=e!==i,n=null===e,o=e==e,s=aa(e),a=t!==i,c=null===t,u=t==t,l=aa(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||n&&a&&u||!r&&u||!o)return 1;if(!n&&!s&&!l&&e<t||l&&r&&o&&!n&&!s||c&&r&&o||!a&&o||!u)return-1}return 0}function Si(e,t,r,i){for(var o=-1,s=e.length,a=r.length,c=-1,u=t.length,l=mr(s-a,0),h=n(u+l),f=!i;++c<u;)h[c]=t[c];for(;++o<a;)(f||o<s)&&(h[r[o]]=e[o]);for(;l--;)h[c++]=e[o++];return h}function xi(e,t,r,i){for(var o=-1,s=e.length,a=-1,c=r.length,u=-1,l=t.length,h=mr(s-c,0),f=n(h+l),d=!i;++o<h;)f[o]=e[o];for(var p=o;++u<l;)f[p+u]=t[u];for(;++a<c;)(d||o<s)&&(f[p+r[a]]=e[o++]);return f}function Ei(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ti(e,t,r,n){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=n?n(r[c],e[c],c,r,e):i;u===i&&(u=e[c]),o?rn(r,c,u):Qr(r,c,u)}return r}function Ri(e,t){return function(r,n){var i=Ws(r)?St:en,o=t?t():{};return i(r,e,oo(n,2),o)}}function Pi(e){return qn((function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:i,a=o>2?r[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&go(r[0],r[1],a)&&(s=o<3?i:s,o=1),t=Se(t);++n<o;){var c=r[n];c&&e(t,c,n,s)}return t}))}function Oi(e,t){return function(r,n){if(null==r)return r;if(!Zs(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Se(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Ai(e){return function(t,r,n){for(var i=-1,o=Se(t),s=n(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===r(o[c],c,o))break}return t}}function Bi(e){return function(t){var r=nr(t=ga(t))?lr(t):i,n=r?r[0]:t.charAt(0),o=r?yi(r,1).join(""):t.slice(1);return n[e]()+o}}function Ii(e){return function(t){return It(Ja(Ha(t).replace(Je,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Lr(e.prototype),n=e.apply(r,t);return Xs(n)?n:r}}function Di(e){return function(t,r,n){var o=Se(t);if(!Zs(t)){var s=oo(r,3);t=Oa(t),r=function(e){return s(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[s?t[a]:a]:i}}function zi(e){return Xi((function(t){var r=t.length,n=r,s=Nr.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new Te(o);if(s&&!c&&"wrapper"==no(a))var c=new Nr([],!0)}for(n=c?n:r;++n<r;){var u=no(a=t[n]),l="wrapper"==u?ro(a):i;c=l&&_o(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[no(l[0])].apply(c,l[3]):1==a.length&&_o(a)?c[u]():c.thru(a)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&Ws(n))return c.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}}))}function Mi(e,t,r,o,s,a,c,l,h,f){var d=t&u,p=1&t,m=2&t,v=24&t,g=512&t,y=m?i:ji(e);return function u(){for(var _=arguments.length,b=n(_),w=_;w--;)b[w]=arguments[w];if(v)var k=io(u),C=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,k);if(o&&(b=Si(b,o,s,v)),a&&(b=xi(b,a,c,v)),_-=C,v&&_<f){var S=sr(b,k);return Gi(e,t,Mi,u.placeholder,r,b,S,l,h,f-_)}var x=p?r:this,E=m?x[e]:e;return _=b.length,l?b=function(e,t){for(var r=e.length,n=vr(t.length,r),o=Ei(e);n--;){var s=t[n];e[n]=vo(s,r)?o[s]:i}return e}(b,l):g&&_>1&&b.reverse(),d&&h<_&&(b.length=h),this&&this!==ht&&this instanceof u&&(E=y||ji(E)),E.apply(x,b)}}function Li(e,t){return function(r,n){return function(e,t,r,n){return yn(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Fi(e,t){return function(r,n){var o;if(r===i&&n===i)return t;if(r!==i&&(o=r),n!==i){if(o===i)return n;"string"==typeof r||"string"==typeof n?(r=si(r),n=si(n)):(r=oi(r),n=oi(n)),o=e(r,n)}return o}}function Ni(e){return Xi((function(t){return t=At(t,Kt(oo())),qn((function(r){var n=this;return e(t,(function(e){return Ct(e,n,r)}))}))}))}function Ui(e,t){var r=(t=t===i?" ":si(t)).length;if(r<2)return r?$n(t,e):t;var n=$n(t,ft(e/ur(t)));return nr(t)?yi(lr(n),0,e).join(""):n.slice(0,e)}function Hi(e){return function(t,r,o){return o&&"number"!=typeof o&&go(t,r,o)&&(r=o=i),t=fa(t),r===i?(r=t,t=0):r=fa(r),function(e,t,r,i){for(var o=-1,s=mr(ft((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:fa(o),e)}}function Wi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ma(t),r=ma(r)),e(t,r)}}function Gi(e,t,r,n,o,s,a,u,l,h){var f=8&t;t|=f?c:64,4&(t&=~(f?64:c))||(t&=-4);var d=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,u,l,h],p=r.apply(i,d);return _o(e)&&To(p,d),p.placeholder=n,Oo(p,e,t)}function Zi(e){var t=Ce[e];return function(e,r){if(e=ma(e),(r=null==r?0:vr(da(r),292))&&zt(e)){var n=(ga(e)+"e").split("e");return+((n=(ga(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var $i=Sr&&1/ar(new Sr([,-0]))[1]==l?function(e){return new Sr(e)}:ac;function qi(e){return function(t){var r=ho(t);return r==k?ir(t):r==T?cr(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Vi(e,t,r,s,l,h,f,d){var p=2&t;if(!p&&"function"!=typeof e)throw new Te(o);var m=s?s.length:0;if(m||(t&=-97,s=l=i),f=f===i?f:mr(da(f),0),d=d===i?d:da(d),m-=l?l.length:0,64&t){var v=s,g=l;s=l=i}var y=p?i:ro(e),_=[e,t,r,s,l,v,g,h,f,d];if(y&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,s=n==u&&8==r||n==u&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Si(l,c,t[4]):c,e[4]=l?sr(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?xi(l,c,t[6]):c,e[6]=l?sr(e[5],a):t[6]),(c=t[7])&&(e[7]=c),n&u&&(e[8]=null==e[8]?t[8]:vr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(_,y),e=_[0],t=_[1],r=_[2],s=_[3],l=_[4],!(d=_[9]=_[9]===i?p?0:e.length:mr(_[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,r){var o=ji(e);return function s(){for(var a=arguments.length,c=n(a),u=a,l=io(s);u--;)c[u]=arguments[u];var h=a<3&&c[0]!==l&&c[a-1]!==l?[]:sr(c,l);return(a-=h.length)<r?Gi(e,t,Mi,s.placeholder,i,c,h,i,i,r-a):Ct(this&&this!==ht&&this instanceof s?o:e,this,c)}}(e,t,d):t!=c&&33!=t||l.length?Mi.apply(i,_):function(e,t,r,i){var o=1&t,s=ji(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=i.length,h=n(l+c),f=this&&this!==ht&&this instanceof t?s:e;++u<l;)h[u]=i[u];for(;c--;)h[u++]=arguments[++a];return Ct(f,o?r:this,h)}}(e,t,r,s);else var b=function(e,t,r){var n=1&t,i=ji(e);return function t(){return(this&&this!==ht&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return Oo((y?Yn:To)(b,_),e,t)}function Ki(e,t,r,n){return e===i||Fs(e,Oe[r])&&!Ie.call(n,r)?t:e}function Ji(e,t,r,n,o,s){return Xs(e)&&Xs(t)&&(s.set(t,e),Fn(e,t,i,Ji,s),s.delete(t)),e}function Yi(e){return na(e)?i:e}function Qi(e,t,r,n,o,s){var a=1&r,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e),h=s.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&r?new Zr:i;for(s.set(e,t),s.set(t,e);++f<c;){var m=e[f],v=t[f];if(n)var g=a?n(v,m,f,t,e,s):n(m,v,f,e,t,s);if(g!==i){if(g)continue;d=!1;break}if(p){if(!Dt(t,(function(e,t){if(!Yt(p,t)&&(m===e||o(m,e,r,n,s)))return p.push(t)}))){d=!1;break}}else if(m!==v&&!o(m,v,r,n,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Xi(e){return Po(So(e,i,Go),e+"")}function eo(e){return kn(e,Oa,uo)}function to(e){return kn(e,Aa,lo)}var ro=Tr?function(e){return Tr.get(e)}:ac;function no(e){for(var t=e.name+"",r=Rr[t],n=Ie.call(Rr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function io(e){return(Ie.call(Mr,"placeholder")?Mr:e).placeholder}function oo(){var e=Mr.iteratee||nc;return e=e===nc?In:e,arguments.length?e(arguments[0],arguments[1]):e}function so(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ao(e){for(var t=Oa(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ko(i)]}return t}function co(e,t){var r=function(e,t){return null==e?i:e[t]}(e,t);return Bn(r)?r:i}var uo=mt?function(e){return null==e?[]:(e=Se(e),Rt(mt(e),(function(t){return $e.call(e,t)})))}:pc,lo=mt?function(e){for(var t=[];e;)Bt(t,uo(e)),e=Ge(e);return t}:pc,ho=Cn;function fo(e,t,r){for(var n=-1,i=(t=vi(t,e)).length,o=!1;++n<i;){var s=zo(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Qs(i)&&vo(s,i)&&(Ws(e)||Hs(e))}function po(e){return"function"!=typeof e.constructor||wo(e)?{}:Lr(Ge(e))}function mo(e){return Ws(e)||Hs(e)||!!(Ve&&e&&e[Ve])}function vo(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function go(e,t,r){if(!Xs(r))return!1;var n=typeof t;return!!("number"==n?Zs(r)&&vo(t,r.length):"string"==n&&t in r)&&Fs(r[t],e)}function yo(e,t){if(Ws(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!aa(e))||X.test(e)||!Q.test(e)||null!=t&&e in Se(t)}function _o(e){var t=no(e),r=Mr[t];if("function"!=typeof r||!(t in Ur.prototype))return!1;if(e===r)return!0;var n=ro(r);return!!n&&e===n[0]}(wr&&ho(new wr(new ArrayBuffer(1)))!=B||kr&&ho(new kr)!=k||Cr&&ho(Cr.resolve())!=x||Sr&&ho(new Sr)!=T||xr&&ho(new xr)!=O)&&(ho=function(e){var t=Cn(e),r=t==S?e.constructor:i,n=r?Mo(r):"";if(n)switch(n){case Pr:return B;case Or:return k;case Ar:return x;case Br:return T;case Ir:return O}return t});var bo=Ae?Js:mc;function wo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function ko(e){return e==e&&!Xs(e)}function Co(e,t){return function(r){return null!=r&&r[e]===t&&(t!==i||e in Se(r))}}function So(e,t,r){return t=mr(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=mr(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=i[o];return c[t]=r(a),Ct(e,this,c)}}function xo(e,t){return t.length<2?e:wn(e,ei(t,0,-1))}function Eo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=Ao(Yn),Ro=lt||function(e,t){return ht.setTimeout(e,t)},Po=Ao(Qn);function Oo(e,t,r){var n=t+"";return Po(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return xt(p,(function(r){var n="_."+r[0];t&r[1]&&!Pt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(ae):[]}(n),r)))}function Ao(e){var t=0,r=0;return function(){var n=gr(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Bo(e,t){var r=-1,n=e.length,o=n-1;for(t=t===i?n:t;++r<t;){var s=Zn(r,o),a=e[s];e[s]=e[r],e[r]=a}return e.length=t,e}var Io,jo,Do=(Io=Is((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,r,n,i){t.push(n?i.replace(le,"$1"):r||e)})),t}),(function(e){return 500===jo.size&&jo.clear(),e})),jo=Io.cache,Io);function zo(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Mo(e){if(null!=e){try{return Be.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Lo(e){if(e instanceof Ur)return e.clone();var t=new Nr(e.__wrapped__,e.__chain__);return t.__actions__=Ei(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fo=qn((function(e,t){return $s(e)?un(e,mn(t,1,$s,!0)):[]})),No=qn((function(e,t){var r=Ko(t);return $s(r)&&(r=i),$s(e)?un(e,mn(t,1,$s,!0),oo(r,2)):[]})),Uo=qn((function(e,t){var r=Ko(t);return $s(r)&&(r=i),$s(e)?un(e,mn(t,1,$s,!0),i,r):[]}));function Ho(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:da(r);return i<0&&(i=mr(n+i,0)),Lt(e,oo(t,3),i)}function Wo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return r!==i&&(o=da(r),o=r<0?mr(n+o,0):vr(o,n-1)),Lt(e,oo(t,3),o,!0)}function Go(e){return null!=e&&e.length?mn(e,1):[]}function Zo(e){return e&&e.length?e[0]:i}var $o=qn((function(e){var t=At(e,pi);return t.length&&t[0]===e[0]?Tn(t):[]})),qo=qn((function(e){var t=Ko(e),r=At(e,pi);return t===Ko(r)?t=i:r.pop(),r.length&&r[0]===e[0]?Tn(r,oo(t,2)):[]})),Vo=qn((function(e){var t=Ko(e),r=At(e,pi);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?Tn(r,i,t):[]}));function Ko(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Jo=qn(Yo);function Yo(e,t){return e&&e.length&&t&&t.length?Wn(e,t):e}var Qo=Xi((function(e,t){var r=null==e?0:e.length,n=nn(e,t);return Gn(e,At(t,(function(e){return vo(e,r)?+e:e})).sort(Ci)),n}));function Xo(e){return null==e?e:br.call(e)}var es=qn((function(e){return ai(mn(e,1,$s,!0))})),ts=qn((function(e){var t=Ko(e);return $s(t)&&(t=i),ai(mn(e,1,$s,!0),oo(t,2))})),rs=qn((function(e){var t=Ko(e);return t="function"==typeof t?t:i,ai(mn(e,1,$s,!0),i,t)}));function ns(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if($s(e))return t=mr(e.length,t),!0})),qt(t,(function(t){return At(e,Wt(t))}))}function is(e,t){if(!e||!e.length)return[];var r=ns(e);return null==t?r:At(r,(function(e){return Ct(t,i,e)}))}var os=qn((function(e,t){return $s(e)?un(e,t):[]})),ss=qn((function(e){return fi(Rt(e,$s))})),as=qn((function(e){var t=Ko(e);return $s(t)&&(t=i),fi(Rt(e,$s),oo(t,2))})),cs=qn((function(e){var t=Ko(e);return t="function"==typeof t?t:i,fi(Rt(e,$s),i,t)})),us=qn(ns),ls=qn((function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,is(e,r)}));function hs(e){var t=Mr(e);return t.__chain__=!0,t}function fs(e,t){return t(e)}var ds=Xi((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return nn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Ur&&vo(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:fs,args:[o],thisArg:i}),new Nr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),ps=Ri((function(e,t,r){Ie.call(e,r)?++e[r]:rn(e,r,1)})),ms=Di(Ho),vs=Di(Wo);function gs(e,t){return(Ws(e)?xt:ln)(e,oo(t,3))}function ys(e,t){return(Ws(e)?Et:hn)(e,oo(t,3))}var _s=Ri((function(e,t,r){Ie.call(e,r)?e[r].push(t):rn(e,r,[t])})),bs=qn((function(e,t,r){var i=-1,o="function"==typeof t,s=Zs(e)?n(e.length):[];return ln(e,(function(e){s[++i]=o?Ct(t,e,r):Rn(e,t,r)})),s})),ws=Ri((function(e,t,r){rn(e,r,t)}));function ks(e,t){return(Ws(e)?At:zn)(e,oo(t,3))}var Cs=Ri((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Ss=qn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&go(e,t[0],t[1])?t=[]:r>2&&go(t[0],t[1],t[2])&&(t=[t[0]]),Un(e,mn(t,1),[])})),xs=ut||function(){return ht.Date.now()};function Es(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,Vi(e,u,i,i,i,i,t)}function Ts(e,t){var r;if("function"!=typeof t)throw new Te(o);return e=da(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var Rs=qn((function(e,t,r){var n=1;if(r.length){var i=sr(r,io(Rs));n|=c}return Vi(e,n,t,r,i)})),Ps=qn((function(e,t,r){var n=3;if(r.length){var i=sr(r,io(Ps));n|=c}return Vi(t,n,e,r,i)}));function Os(e,t,r){var n,s,a,c,u,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Te(o);function m(t){var r=n,o=s;return n=s=i,h=t,c=e.apply(o,r)}function v(e){var r=e-l;return l===i||r>=t||r<0||d&&e-h>=a}function g(){var e=xs();if(v(e))return y(e);u=Ro(g,function(e){var r=t-(e-l);return d?vr(r,a-(e-h)):r}(e))}function y(e){return u=i,p&&n?m(e):(n=s=i,c)}function _(){var e=xs(),r=v(e);if(n=arguments,s=this,l=e,r){if(u===i)return function(e){return h=e,u=Ro(g,t),f?m(e):c}(l);if(d)return _i(u),u=Ro(g,t),m(l)}return u===i&&(u=Ro(g,t)),c}return t=ma(t)||0,Xs(r)&&(f=!!r.leading,a=(d="maxWait"in r)?mr(ma(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),_.cancel=function(){u!==i&&_i(u),h=0,n=l=s=u=i},_.flush=function(){return u===i?c:y(xs())},_}var As=qn((function(e,t){return cn(e,1,t)})),Bs=qn((function(e,t,r){return cn(e,ma(t)||0,r)}));function Is(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Is.Cache||Gr),r}function js(e){if("function"!=typeof e)throw new Te(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Is.Cache=Gr;var Ds=gi((function(e,t){var r=(t=1==t.length&&Ws(t[0])?At(t[0],Kt(oo())):At(mn(t,1),Kt(oo()))).length;return qn((function(n){for(var i=-1,o=vr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Ct(e,this,n)}))})),zs=qn((function(e,t){var r=sr(t,io(zs));return Vi(e,c,i,t,r)})),Ms=qn((function(e,t){var r=sr(t,io(Ms));return Vi(e,64,i,t,r)})),Ls=Xi((function(e,t){return Vi(e,256,i,i,i,t)}));function Fs(e,t){return e===t||e!=e&&t!=t}var Ns=Wi(Sn),Us=Wi((function(e,t){return e>=t})),Hs=Pn(function(){return arguments}())?Pn:function(e){return ea(e)&&Ie.call(e,"callee")&&!$e.call(e,"callee")},Ws=n.isArray,Gs=gt?Kt(gt):function(e){return ea(e)&&Cn(e)==A};function Zs(e){return null!=e&&Qs(e.length)&&!Js(e)}function $s(e){return ea(e)&&Zs(e)}var qs=vt||mc,Vs=yt?Kt(yt):function(e){return ea(e)&&Cn(e)==y};function Ks(e){if(!ea(e))return!1;var t=Cn(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!na(e)}function Js(e){if(!Xs(e))return!1;var t=Cn(e);return t==b||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ys(e){return"number"==typeof e&&e==da(e)}function Qs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function Xs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=_t?Kt(_t):function(e){return ea(e)&&ho(e)==k};function ra(e){return"number"==typeof e||ea(e)&&Cn(e)==C}function na(e){if(!ea(e)||Cn(e)!=S)return!1;var t=Ge(e);if(null===t)return!0;var r=Ie.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Be.call(r)==Me}var ia=bt?Kt(bt):function(e){return ea(e)&&Cn(e)==E},oa=wt?Kt(wt):function(e){return ea(e)&&ho(e)==T};function sa(e){return"string"==typeof e||!Ws(e)&&ea(e)&&Cn(e)==R}function aa(e){return"symbol"==typeof e||ea(e)&&Cn(e)==P}var ca=kt?Kt(kt):function(e){return ea(e)&&Qs(e.length)&&!!it[Cn(e)]},ua=Wi(Dn),la=Wi((function(e,t){return e<=t}));function ha(e){if(!e)return[];if(Zs(e))return sa(e)?lr(e):Ei(e);if(Ke&&e[Ke])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Ke]());var t=ho(e);return(t==k?ir:t==T?ar:Fa)(e)}function fa(e){return e?(e=ma(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function da(e){var t=fa(e),r=t%1;return t==t?r?t-r:t:0}function pa(e){return e?on(da(e),0,d):0}function ma(e){if("number"==typeof e)return e;if(aa(e))return f;if(Xs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Xs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var r=pe.test(e);return r||ve.test(e)?ct(e.slice(2),r?2:8):de.test(e)?f:+e}function va(e){return Ti(e,Aa(e))}function ga(e){return null==e?"":si(e)}var ya=Pi((function(e,t){if(wo(t)||Zs(t))Ti(t,Oa(t),e);else for(var r in t)Ie.call(t,r)&&Qr(e,r,t[r])})),_a=Pi((function(e,t){Ti(t,Aa(t),e)})),ba=Pi((function(e,t,r,n){Ti(t,Aa(t),e,n)})),wa=Pi((function(e,t,r,n){Ti(t,Oa(t),e,n)})),ka=Xi(nn),Ca=qn((function(e,t){e=Se(e);var r=-1,n=t.length,o=n>2?t[2]:i;for(o&&go(t[0],t[1],o)&&(n=1);++r<n;)for(var s=t[r],a=Aa(s),c=-1,u=a.length;++c<u;){var l=a[c],h=e[l];(h===i||Fs(h,Oe[l])&&!Ie.call(e,l))&&(e[l]=s[l])}return e})),Sa=qn((function(e){return e.push(i,Ji),Ct(Ia,i,e)}));function xa(e,t,r){var n=null==e?i:wn(e,t);return n===i?r:n}function Ea(e,t){return null!=e&&fo(e,t,En)}var Ta=Li((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),e[t]=r}),Xa(rc)),Ra=Li((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ze.call(t)),Ie.call(e,t)?e[t].push(r):e[t]=[r]}),oo),Pa=qn(Rn);function Oa(e){return Zs(e)?qr(e):jn(e)}function Aa(e){return Zs(e)?qr(e,!0):function(e){if(!Xs(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=wo(e),r=[];for(var n in e)("constructor"!=n||!t&&Ie.call(e,n))&&r.push(n);return r}(e)}var Ba=Pi((function(e,t,r){Fn(e,t,r)})),Ia=Pi((function(e,t,r,n){Fn(e,t,r,n)})),ja=Xi((function(e,t){var r={};if(null==e)return r;var n=!1;t=At(t,(function(t){return t=vi(t,e),n||(n=t.length>1),t})),Ti(e,to(e),r),n&&(r=sn(r,7,Yi));for(var i=t.length;i--;)ci(r,t[i]);return r})),Da=Xi((function(e,t){return null==e?{}:function(e,t){return Hn(e,t,(function(t,r){return Ea(e,r)}))}(e,t)}));function za(e,t){if(null==e)return{};var r=At(to(e),(function(e){return[e]}));return t=oo(t),Hn(e,r,(function(e,r){return t(e,r[0])}))}var Ma=qi(Oa),La=qi(Aa);function Fa(e){return null==e?[]:Jt(e,Oa(e))}var Na=Ii((function(e,t,r){return t=t.toLowerCase(),e+(r?Ua(t):t)}));function Ua(e){return Ka(ga(e).toLowerCase())}function Ha(e){return(e=ga(e))&&e.replace(ye,er).replace(Ye,"")}var Wa=Ii((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Ga=Ii((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Za=Bi("toLowerCase"),$a=Ii((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),qa=Ii((function(e,t,r){return e+(r?" ":"")+Ka(t)})),Va=Ii((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ka=Bi("toUpperCase");function Ja(e,t,r){return e=ga(e),(t=r?i:t)===i?function(e){return tt.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var Ya=qn((function(e,t){try{return Ct(e,i,t)}catch(e){return Ks(e)?e:new we(e)}})),Qa=Xi((function(e,t){return xt(t,(function(t){t=zo(t),rn(e,t,Rs(e[t],e))})),e}));function Xa(e){return function(){return e}}var ec=zi(),tc=zi(!0);function rc(e){return e}function nc(e){return In("function"==typeof e?e:sn(e,1))}var ic=qn((function(e,t){return function(r){return Rn(r,e,t)}})),oc=qn((function(e,t){return function(r){return Rn(e,r,t)}}));function sc(e,t,r){var n=Oa(t),i=bn(t,n);null!=r||Xs(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=bn(t,Oa(t)));var o=!(Xs(r)&&"chain"in r&&!r.chain),s=Js(e);return xt(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Ei(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Bt([this.value()],arguments))})})),e}function ac(){}var cc=Ni(At),uc=Ni(Tt),lc=Ni(Dt);function hc(e){return yo(e)?Wt(zo(e)):function(e){return function(t){return wn(t,e)}}(e)}var fc=Hi(),dc=Hi(!0);function pc(){return[]}function mc(){return!1}var vc,gc=Fi((function(e,t){return e+t}),0),yc=Zi("ceil"),_c=Fi((function(e,t){return e/t}),1),bc=Zi("floor"),wc=Fi((function(e,t){return e*t}),1),kc=Zi("round"),Cc=Fi((function(e,t){return e-t}),0);return Mr.after=function(e,t){if("function"!=typeof t)throw new Te(o);return e=da(e),function(){if(--e<1)return t.apply(this,arguments)}},Mr.ary=Es,Mr.assign=ya,Mr.assignIn=_a,Mr.assignInWith=ba,Mr.assignWith=wa,Mr.at=ka,Mr.before=Ts,Mr.bind=Rs,Mr.bindAll=Qa,Mr.bindKey=Ps,Mr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ws(e)?e:[e]},Mr.chain=hs,Mr.chunk=function(e,t,r){t=(r?go(e,t,r):t===i)?1:mr(da(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=n(ft(o/t));s<o;)c[a++]=ei(e,s,s+=t);return c},Mr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},Mr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Bt(Ws(r)?Ei(r):[r],mn(t,1))},Mr.cond=function(e){var t=null==e?0:e.length,r=oo();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Te(o);return[r(e[0]),e[1]]})):[],qn((function(r){for(var n=-1;++n<t;){var i=e[n];if(Ct(i[0],this,r))return Ct(i[1],this,r)}}))},Mr.conforms=function(e){return function(e){var t=Oa(e);return function(r){return an(r,e,t)}}(sn(e,1))},Mr.constant=Xa,Mr.countBy=ps,Mr.create=function(e,t){var r=Lr(e);return null==t?r:tn(r,t)},Mr.curry=function e(t,r,n){var o=Vi(t,8,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},Mr.curryRight=function e(t,r,n){var o=Vi(t,16,i,i,i,i,i,r=n?i:r);return o.placeholder=e.placeholder,o},Mr.debounce=Os,Mr.defaults=Ca,Mr.defaultsDeep=Sa,Mr.defer=As,Mr.delay=Bs,Mr.difference=Fo,Mr.differenceBy=No,Mr.differenceWith=Uo,Mr.drop=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=r||t===i?1:da(t))<0?0:t,n):[]},Mr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,0,(t=n-(t=r||t===i?1:da(t)))<0?0:t):[]},Mr.dropRightWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!0,!0):[]},Mr.dropWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!0):[]},Mr.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&go(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=da(r))<0&&(r=-r>o?0:o+r),(n=n===i||n>o?o:da(n))<0&&(n+=o),n=r>n?0:pa(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Mr.filter=function(e,t){return(Ws(e)?Rt:pn)(e,oo(t,3))},Mr.flatMap=function(e,t){return mn(ks(e,t),1)},Mr.flatMapDeep=function(e,t){return mn(ks(e,t),l)},Mr.flatMapDepth=function(e,t,r){return r=r===i?1:da(r),mn(ks(e,t),r)},Mr.flatten=Go,Mr.flattenDeep=function(e){return null!=e&&e.length?mn(e,l):[]},Mr.flattenDepth=function(e,t){return null!=e&&e.length?mn(e,t=t===i?1:da(t)):[]},Mr.flip=function(e){return Vi(e,512)},Mr.flow=ec,Mr.flowRight=tc,Mr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Mr.functions=function(e){return null==e?[]:bn(e,Oa(e))},Mr.functionsIn=function(e){return null==e?[]:bn(e,Aa(e))},Mr.groupBy=_s,Mr.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Mr.intersection=$o,Mr.intersectionBy=qo,Mr.intersectionWith=Vo,Mr.invert=Ta,Mr.invertBy=Ra,Mr.invokeMap=bs,Mr.iteratee=nc,Mr.keyBy=ws,Mr.keys=Oa,Mr.keysIn=Aa,Mr.map=ks,Mr.mapKeys=function(e,t){var r={};return t=oo(t,3),yn(e,(function(e,n,i){rn(r,t(e,n,i),e)})),r},Mr.mapValues=function(e,t){var r={};return t=oo(t,3),yn(e,(function(e,n,i){rn(r,n,t(e,n,i))})),r},Mr.matches=function(e){return Mn(sn(e,1))},Mr.matchesProperty=function(e,t){return Ln(e,sn(t,1))},Mr.memoize=Is,Mr.merge=Ba,Mr.mergeWith=Ia,Mr.method=ic,Mr.methodOf=oc,Mr.mixin=sc,Mr.negate=js,Mr.nthArg=function(e){return e=da(e),qn((function(t){return Nn(t,e)}))},Mr.omit=ja,Mr.omitBy=function(e,t){return za(e,js(oo(t)))},Mr.once=function(e){return Ts(2,e)},Mr.orderBy=function(e,t,r,n){return null==e?[]:(Ws(t)||(t=null==t?[]:[t]),Ws(r=n?i:r)||(r=null==r?[]:[r]),Un(e,t,r))},Mr.over=cc,Mr.overArgs=Ds,Mr.overEvery=uc,Mr.overSome=lc,Mr.partial=zs,Mr.partialRight=Ms,Mr.partition=Cs,Mr.pick=Da,Mr.pickBy=za,Mr.property=hc,Mr.propertyOf=function(e){return function(t){return null==e?i:wn(e,t)}},Mr.pull=Jo,Mr.pullAll=Yo,Mr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Wn(e,t,oo(r,2)):e},Mr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Wn(e,t,i,r):e},Mr.pullAt=Qo,Mr.range=fc,Mr.rangeRight=dc,Mr.rearg=Ls,Mr.reject=function(e,t){return(Ws(e)?Rt:pn)(e,js(oo(t,3)))},Mr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=oo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return Gn(e,i),r},Mr.rest=function(e,t){if("function"!=typeof e)throw new Te(o);return qn(e,t=t===i?t:da(t))},Mr.reverse=Xo,Mr.sampleSize=function(e,t,r){return t=(r?go(e,t,r):t===i)?1:da(t),(Ws(e)?Kr:Kn)(e,t)},Mr.set=function(e,t,r){return null==e?e:Jn(e,t,r)},Mr.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:Jn(e,t,r,n)},Mr.shuffle=function(e){return(Ws(e)?Jr:Xn)(e)},Mr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&go(e,t,r)?(t=0,r=n):(t=null==t?0:da(t),r=r===i?n:da(r)),ei(e,t,r)):[]},Mr.sortBy=Ss,Mr.sortedUniq=function(e){return e&&e.length?ii(e):[]},Mr.sortedUniqBy=function(e,t){return e&&e.length?ii(e,oo(t,2)):[]},Mr.split=function(e,t,r){return r&&"number"!=typeof r&&go(e,t,r)&&(t=r=i),(r=r===i?d:r>>>0)?(e=ga(e))&&("string"==typeof t||null!=t&&!ia(t))&&!(t=si(t))&&nr(e)?yi(lr(e),0,r):e.split(t,r):[]},Mr.spread=function(e,t){if("function"!=typeof e)throw new Te(o);return t=null==t?0:mr(da(t),0),qn((function(r){var n=r[t],i=yi(r,0,t);return n&&Bt(i,n),Ct(e,this,i)}))},Mr.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Mr.take=function(e,t,r){return e&&e.length?ei(e,0,(t=r||t===i?1:da(t))<0?0:t):[]},Mr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ei(e,(t=n-(t=r||t===i?1:da(t)))<0?0:t,n):[]},Mr.takeRightWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!1,!0):[]},Mr.takeWhile=function(e,t){return e&&e.length?li(e,oo(t,3)):[]},Mr.tap=function(e,t){return t(e),e},Mr.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new Te(o);return Xs(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Os(e,t,{leading:n,maxWait:t,trailing:i})},Mr.thru=fs,Mr.toArray=ha,Mr.toPairs=Ma,Mr.toPairsIn=La,Mr.toPath=function(e){return Ws(e)?At(e,zo):aa(e)?[e]:Ei(Do(ga(e)))},Mr.toPlainObject=va,Mr.transform=function(e,t,r){var n=Ws(e),i=n||qs(e)||ca(e);if(t=oo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Xs(e)&&Js(o)?Lr(Ge(e)):{}}return(i?xt:yn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Mr.unary=function(e){return Es(e,1)},Mr.union=es,Mr.unionBy=ts,Mr.unionWith=rs,Mr.uniq=function(e){return e&&e.length?ai(e):[]},Mr.uniqBy=function(e,t){return e&&e.length?ai(e,oo(t,2)):[]},Mr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ai(e,i,t):[]},Mr.unset=function(e,t){return null==e||ci(e,t)},Mr.unzip=ns,Mr.unzipWith=is,Mr.update=function(e,t,r){return null==e?e:ui(e,t,mi(r))},Mr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:ui(e,t,mi(r),n)},Mr.values=Fa,Mr.valuesIn=function(e){return null==e?[]:Jt(e,Aa(e))},Mr.without=os,Mr.words=Ja,Mr.wrap=function(e,t){return zs(mi(t),e)},Mr.xor=ss,Mr.xorBy=as,Mr.xorWith=cs,Mr.zip=us,Mr.zipObject=function(e,t){return di(e||[],t||[],Qr)},Mr.zipObjectDeep=function(e,t){return di(e||[],t||[],Jn)},Mr.zipWith=ls,Mr.entries=Ma,Mr.entriesIn=La,Mr.extend=_a,Mr.extendWith=ba,sc(Mr,Mr),Mr.add=gc,Mr.attempt=Ya,Mr.camelCase=Na,Mr.capitalize=Ua,Mr.ceil=yc,Mr.clamp=function(e,t,r){return r===i&&(r=t,t=i),r!==i&&(r=(r=ma(r))==r?r:0),t!==i&&(t=(t=ma(t))==t?t:0),on(ma(e),t,r)},Mr.clone=function(e){return sn(e,4)},Mr.cloneDeep=function(e){return sn(e,5)},Mr.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:i)},Mr.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:i)},Mr.conformsTo=function(e,t){return null==t||an(e,t,Oa(t))},Mr.deburr=Ha,Mr.defaultTo=function(e,t){return null==e||e!=e?t:e},Mr.divide=_c,Mr.endsWith=function(e,t,r){e=ga(e),t=si(t);var n=e.length,o=r=r===i?n:on(da(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},Mr.eq=Fs,Mr.escape=function(e){return(e=ga(e))&&V.test(e)?e.replace($,tr):e},Mr.escapeRegExp=function(e){return(e=ga(e))&&re.test(e)?e.replace(te,"\\$&"):e},Mr.every=function(e,t,r){var n=Ws(e)?Tt:fn;return r&&go(e,t,r)&&(t=i),n(e,oo(t,3))},Mr.find=ms,Mr.findIndex=Ho,Mr.findKey=function(e,t){return Mt(e,oo(t,3),yn)},Mr.findLast=vs,Mr.findLastIndex=Wo,Mr.findLastKey=function(e,t){return Mt(e,oo(t,3),_n)},Mr.floor=bc,Mr.forEach=gs,Mr.forEachRight=ys,Mr.forIn=function(e,t){return null==e?e:vn(e,oo(t,3),Aa)},Mr.forInRight=function(e,t){return null==e?e:gn(e,oo(t,3),Aa)},Mr.forOwn=function(e,t){return e&&yn(e,oo(t,3))},Mr.forOwnRight=function(e,t){return e&&_n(e,oo(t,3))},Mr.get=xa,Mr.gt=Ns,Mr.gte=Us,Mr.has=function(e,t){return null!=e&&fo(e,t,xn)},Mr.hasIn=Ea,Mr.head=Zo,Mr.identity=rc,Mr.includes=function(e,t,r,n){e=Zs(e)?e:Fa(e),r=r&&!n?da(r):0;var i=e.length;return r<0&&(r=mr(i+r,0)),sa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Ft(e,t,r)>-1},Mr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:da(r);return i<0&&(i=mr(n+i,0)),Ft(e,t,i)},Mr.inRange=function(e,t,r){return t=fa(t),r===i?(r=t,t=0):r=fa(r),function(e,t,r){return e>=vr(t,r)&&e<mr(t,r)}(e=ma(e),t,r)},Mr.invoke=Pa,Mr.isArguments=Hs,Mr.isArray=Ws,Mr.isArrayBuffer=Gs,Mr.isArrayLike=Zs,Mr.isArrayLikeObject=$s,Mr.isBoolean=function(e){return!0===e||!1===e||ea(e)&&Cn(e)==g},Mr.isBuffer=qs,Mr.isDate=Vs,Mr.isElement=function(e){return ea(e)&&1===e.nodeType&&!na(e)},Mr.isEmpty=function(e){if(null==e)return!0;if(Zs(e)&&(Ws(e)||"string"==typeof e||"function"==typeof e.splice||qs(e)||ca(e)||Hs(e)))return!e.length;var t=ho(e);if(t==k||t==T)return!e.size;if(wo(e))return!jn(e).length;for(var r in e)if(Ie.call(e,r))return!1;return!0},Mr.isEqual=function(e,t){return On(e,t)},Mr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return n===i?On(e,t,i,r):!!n},Mr.isError=Ks,Mr.isFinite=function(e){return"number"==typeof e&&zt(e)},Mr.isFunction=Js,Mr.isInteger=Ys,Mr.isLength=Qs,Mr.isMap=ta,Mr.isMatch=function(e,t){return e===t||An(e,t,ao(t))},Mr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,An(e,t,ao(t),r)},Mr.isNaN=function(e){return ra(e)&&e!=+e},Mr.isNative=function(e){if(bo(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Bn(e)},Mr.isNil=function(e){return null==e},Mr.isNull=function(e){return null===e},Mr.isNumber=ra,Mr.isObject=Xs,Mr.isObjectLike=ea,Mr.isPlainObject=na,Mr.isRegExp=ia,Mr.isSafeInteger=function(e){return Ys(e)&&e>=-9007199254740991&&e<=h},Mr.isSet=oa,Mr.isString=sa,Mr.isSymbol=aa,Mr.isTypedArray=ca,Mr.isUndefined=function(e){return e===i},Mr.isWeakMap=function(e){return ea(e)&&ho(e)==O},Mr.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==Cn(e)},Mr.join=function(e,t){return null==e?"":Gt.call(e,t)},Mr.kebabCase=Wa,Mr.last=Ko,Mr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return r!==i&&(o=(o=da(r))<0?mr(n+o,0):vr(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Lt(e,Ut,o,!0)},Mr.lowerCase=Ga,Mr.lowerFirst=Za,Mr.lt=ua,Mr.lte=la,Mr.max=function(e){return e&&e.length?dn(e,rc,Sn):i},Mr.maxBy=function(e,t){return e&&e.length?dn(e,oo(t,2),Sn):i},Mr.mean=function(e){return Ht(e,rc)},Mr.meanBy=function(e,t){return Ht(e,oo(t,2))},Mr.min=function(e){return e&&e.length?dn(e,rc,Dn):i},Mr.minBy=function(e,t){return e&&e.length?dn(e,oo(t,2),Dn):i},Mr.stubArray=pc,Mr.stubFalse=mc,Mr.stubObject=function(){return{}},Mr.stubString=function(){return""},Mr.stubTrue=function(){return!0},Mr.multiply=wc,Mr.nth=function(e,t){return e&&e.length?Nn(e,da(t)):i},Mr.noConflict=function(){return ht._===this&&(ht._=Le),this},Mr.noop=ac,Mr.now=xs,Mr.pad=function(e,t,r){e=ga(e);var n=(t=da(t))?ur(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Ui(dt(i),r)+e+Ui(ft(i),r)},Mr.padEnd=function(e,t,r){e=ga(e);var n=(t=da(t))?ur(e):0;return t&&n<t?e+Ui(t-n,r):e},Mr.padStart=function(e,t,r){e=ga(e);var n=(t=da(t))?ur(e):0;return t&&n<t?Ui(t-n,r)+e:e},Mr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),yr(ga(e).replace(ne,""),t||0)},Mr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&go(e,t,r)&&(t=r=i),r===i&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fa(e),t===i?(t=e,e=0):t=fa(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=_r();return vr(e+o*(t-e+at("1e-"+((o+"").length-1))),t)}return Zn(e,t)},Mr.reduce=function(e,t,r){var n=Ws(e)?It:Zt,i=arguments.length<3;return n(e,oo(t,4),r,i,ln)},Mr.reduceRight=function(e,t,r){var n=Ws(e)?jt:Zt,i=arguments.length<3;return n(e,oo(t,4),r,i,hn)},Mr.repeat=function(e,t,r){return t=(r?go(e,t,r):t===i)?1:da(t),$n(ga(e),t)},Mr.replace=function(){var e=arguments,t=ga(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mr.result=function(e,t,r){var n=-1,o=(t=vi(t,e)).length;for(o||(o=1,e=i);++n<o;){var s=null==e?i:e[zo(t[n])];s===i&&(n=o,s=r),e=Js(s)?s.call(e):s}return e},Mr.round=kc,Mr.runInContext=e,Mr.sample=function(e){return(Ws(e)?Vr:Vn)(e)},Mr.size=function(e){if(null==e)return 0;if(Zs(e))return sa(e)?ur(e):e.length;var t=ho(e);return t==k||t==T?e.size:jn(e).length},Mr.snakeCase=$a,Mr.some=function(e,t,r){var n=Ws(e)?Dt:ti;return r&&go(e,t,r)&&(t=i),n(e,oo(t,3))},Mr.sortedIndex=function(e,t){return ri(e,t)},Mr.sortedIndexBy=function(e,t,r){return ni(e,t,oo(r,2))},Mr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ri(e,t);if(n<r&&Fs(e[n],t))return n}return-1},Mr.sortedLastIndex=function(e,t){return ri(e,t,!0)},Mr.sortedLastIndexBy=function(e,t,r){return ni(e,t,oo(r,2),!0)},Mr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ri(e,t,!0)-1;if(Fs(e[r],t))return r}return-1},Mr.startCase=qa,Mr.startsWith=function(e,t,r){return e=ga(e),r=null==r?0:on(da(r),0,e.length),t=si(t),e.slice(r,r+t.length)==t},Mr.subtract=Cc,Mr.sum=function(e){return e&&e.length?$t(e,rc):0},Mr.sumBy=function(e,t){return e&&e.length?$t(e,oo(t,2)):0},Mr.template=function(e,t,r){var n=Mr.templateSettings;r&&go(e,t,r)&&(t=i),e=ga(e),t=ba({},t,n,Ki);var o,s,a=ba({},t.imports,n.imports,Ki),c=Oa(a),u=Jt(a,c),l=0,h=t.interpolate||_e,f="__p += '",d=xe((t.escape||_e).source+"|"+h.source+"|"+(h===Y?he:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(d,(function(t,r,n,i,a,c){return n||(n=i),f+=e.slice(l,c).replace(be,rr),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),f+="';\n";var m=Ie.call(t,"variable")&&t.variable;if(m){if(ue.test(m))throw new we("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(H,""):f).replace(W,"$1").replace(G,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ya((function(){return ke(c,p+"return "+f).apply(i,u)}));if(v.source=f,Ks(v))throw v;return v},Mr.times=function(e,t){if((e=da(e))<1||e>h)return[];var r=d,n=vr(e,d);t=oo(t),e-=d;for(var i=qt(n,t);++r<e;)t(r);return i},Mr.toFinite=fa,Mr.toInteger=da,Mr.toLength=pa,Mr.toLower=function(e){return ga(e).toLowerCase()},Mr.toNumber=ma,Mr.toSafeInteger=function(e){return e?on(da(e),-9007199254740991,h):0===e?e:0},Mr.toString=ga,Mr.toUpper=function(e){return ga(e).toUpperCase()},Mr.trim=function(e,t,r){if((e=ga(e))&&(r||t===i))return Vt(e);if(!e||!(t=si(t)))return e;var n=lr(e),o=lr(t);return yi(n,Qt(n,o),Xt(n,o)+1).join("")},Mr.trimEnd=function(e,t,r){if((e=ga(e))&&(r||t===i))return e.slice(0,hr(e)+1);if(!e||!(t=si(t)))return e;var n=lr(e);return yi(n,0,Xt(n,lr(t))+1).join("")},Mr.trimStart=function(e,t,r){if((e=ga(e))&&(r||t===i))return e.replace(ne,"");if(!e||!(t=si(t)))return e;var n=lr(e);return yi(n,Qt(n,lr(t))).join("")},Mr.truncate=function(e,t){var r=30,n="...";if(Xs(t)){var o="separator"in t?t.separator:o;r="length"in t?da(t.length):r,n="omission"in t?si(t.omission):n}var s=(e=ga(e)).length;if(nr(e)){var a=lr(e);s=a.length}if(r>=s)return e;var c=r-ur(n);if(c<1)return n;var u=a?yi(a,0,c).join(""):e.slice(0,c);if(o===i)return u+n;if(a&&(c+=u.length-c),ia(o)){if(e.slice(c).search(o)){var l,h=u;for(o.global||(o=xe(o.source,ga(fe.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;u=u.slice(0,f===i?c:f)}}else if(e.indexOf(si(o),c)!=c){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+n},Mr.unescape=function(e){return(e=ga(e))&&q.test(e)?e.replace(Z,fr):e},Mr.uniqueId=function(e){var t=++je;return ga(e)+t},Mr.upperCase=Va,Mr.upperFirst=Ka,Mr.each=gs,Mr.eachRight=ys,Mr.first=Zo,sc(Mr,(vc={},yn(Mr,(function(e,t){Ie.call(Mr.prototype,t)||(vc[t]=e)})),vc),{chain:!1}),Mr.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mr[e].placeholder=Mr})),xt(["drop","take"],(function(e,t){Ur.prototype[e]=function(r){r=r===i?1:mr(da(r),0);var n=this.__filtered__&&!t?new Ur(this):this.clone();return n.__filtered__?n.__takeCount__=vr(r,n.__takeCount__):n.__views__.push({size:vr(r,d),type:e+(n.__dir__<0?"Right":"")}),n},Ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),xt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Ur.prototype[e]=function(){return this[r](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Ur.prototype[e]=function(){return this.__filtered__?new Ur(this):this[r](1)}})),Ur.prototype.compact=function(){return this.filter(rc)},Ur.prototype.find=function(e){return this.filter(e).head()},Ur.prototype.findLast=function(e){return this.reverse().find(e)},Ur.prototype.invokeMap=qn((function(e,t){return"function"==typeof e?new Ur(this):this.map((function(r){return Rn(r,e,t)}))})),Ur.prototype.reject=function(e){return this.filter(js(oo(e)))},Ur.prototype.slice=function(e,t){e=da(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Ur(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==i&&(r=(t=da(t))<0?r.dropRight(-t):r.take(t-e)),r)},Ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ur.prototype.toArray=function(){return this.take(d)},yn(Ur.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Mr[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(Mr.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,c=t instanceof Ur,u=a[0],l=c||Ws(t),h=function(e){var t=o.apply(Mr,Bt([e],a));return n&&f?t[0]:t};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,m=c&&!d;if(!s&&l){t=m?t:new Ur(this);var v=e.apply(t,a);return v.__actions__.push({func:fs,args:[h],thisArg:i}),new Nr(v,f)}return p&&m?e.apply(this,a):(v=this.thru(h),p?n?v.value()[0]:v.value():v)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Mr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Ws(i)?i:[],e)}return this[r]((function(r){return t.apply(Ws(r)?r:[],e)}))}})),yn(Ur.prototype,(function(e,t){var r=Mr[t];if(r){var n=r.name+"";Ie.call(Rr,n)||(Rr[n]=[]),Rr[n].push({name:t,func:r})}})),Rr[Mi(i,2).name]=[{name:"wrapper",func:i}],Ur.prototype.clone=function(){var e=new Ur(this.__wrapped__);return e.__actions__=Ei(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ei(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ei(this.__views__),e},Ur.prototype.reverse=function(){if(this.__filtered__){var e=new Ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ws(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=vr(t,e+s);break;case"takeRight":e=mr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=n?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=vr(c,this.__takeCount__);if(!r||!n&&i==c&&d==c)return hi(e,this.__actions__);var p=[];e:for(;c--&&f<d;){for(var m=-1,v=e[u+=t];++m<h;){var g=l[m],y=g.iteratee,_=g.type,b=y(v);if(2==_)v=b;else if(!b){if(1==_)continue e;break e}}p[f++]=v}return p},Mr.prototype.at=ds,Mr.prototype.chain=function(){return hs(this)},Mr.prototype.commit=function(){return new Nr(this.value(),this.__chain__)},Mr.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Mr.prototype.plant=function(e){for(var t,r=this;r instanceof Fr;){var n=Lo(r);n.__index__=0,n.__values__=i,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},Mr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ur){var t=e;return this.__actions__.length&&(t=new Ur(this)),(t=t.reverse()).__actions__.push({func:fs,args:[Xo],thisArg:i}),new Nr(t,this.__chain__)}return this.thru(Xo)},Mr.prototype.toJSON=Mr.prototype.valueOf=Mr.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Mr.prototype.first=Mr.prototype.head,Ke&&(Mr.prototype[Ke]=function(){return this}),Mr}();ht._=dr,(n=function(){return dr}.call(t,r,t,e))===i||(e.exports=n)}.call(this)},942:function(e,t,r){"use strict";const n=r(9727),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r)o.call(e,n)&&t.push(n)}return t};function l(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return u(e).forEach((r=>{s(t,r,l(e[r]))})),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return u(e).forEach((r=>{s(t,r,l(e[r]))})),t}(e):e}const h=(e,t,r,n)=>(r.forEach((r=>{void 0===t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?s(e,r,d(e[r],t[r],n)):s(e,r,l(t[r])))})),e),f=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach((t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),s(n,o++,t===e?t[r]:l(t[r])));n=h(n,t,u(t).filter((e=>!a.includes(e))),r)})),n};function d(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?f(e,t,r):n(t)&&n(e)?h(e,t,u(t),r):l(t)}e.exports=function(...e){const t=d(l(c),this!==a&&this||{},c);let r={_:{}};for(const i of e)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=d(r,{_:i},t)}return r._}},9727:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},6:(e,t,r)=>{var n=r(1220).MY,i=r(1220).cx,o={unpack:function(e){return new s(e).unpack()},pack:function(e){var t=new a;return t.pack(e),t.getBuffer()}};function s(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function a(){this.bufferBuilder=new n}function c(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}e.exports=o,s.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},s.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},s.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},s.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},s.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},s.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},s.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},s.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},s.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},s.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},s.prototype.unpack_string=function(e){for(var t,r,n=this.read(e),i=0,o="";i<e;)(t=n[i])<128?(o+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o},s.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t},s.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t},s.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)},s.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,r-20)+t*Math.pow(2,r-52))},s.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},a.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},a.prototype.pack=function(e){var t=typeof e;if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"===t)this.bufferBuilder.append(192);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(r==ArrayBuffer)i.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)i.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},a.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},a.prototype.pack_string=function(e){var t=function(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,c).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},a.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])},a.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},a.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|r+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},a.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))},a.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},a.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},a.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},a.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},a.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}},1220:e=>{var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),e.exports.cx=t;var r=e.exports.xE;function n(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=e.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),n.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},n.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);t.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},n.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var e=new r,n=0,i=this._parts.length;n<i;n++)e.append(this._parts[n]);return e.getBlob()}return new Blob(this._parts)},e.exports.MY=n},2539:(e,t,r)=>{"use strict";var n=r(7539);function i(e,t,r,i,o){var s=n.writeRtpDescription(e.kind,t);if(s+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),s=n(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!i(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var l=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=i?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},l.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var u=n.writeCandidate(a);s.candidate=Object.assign(s.candidate,n.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=n.getMediaSections(i._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=n.getDescription(i._localDescription.sdp)+l.join("");var h=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),h&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,r,i){var s=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(i._remoteDescription.sdp),r=t.shift();var a=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,h=s.localCapabilities,f=s.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length||s.rejected)){var d=n.getIceParameters(e,r),p=n.getDtlsParameters(e,r);a&&(p.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,d,a?"controlling":"controlled"),"new"===l.state&&l.start(p));var m=o(h,f);i._transceive(s,m.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var h={};l.remoteStreams.forEach((function(e){h[e.id]=e}));var f=[],d=n.splitSections(i.sdp),p=d.shift(),m=n.matchPrefix(p,"a=ice-lite").length>0,v=n.matchPrefix(p,"a=group:BUNDLE ").length>0;l.usingBundle=v;var g=n.matchPrefix(p,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,d.forEach((function(s,c){var u=n.splitLines(s),d=n.getKind(s),g=n.isRejected(s)&&0===n.matchPrefix(s,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],_=n.getDirection(s,p),b=n.parseMsid(s),w=n.getMid(s)||n.generateIdentifier();if(g||"application"===d&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:w,kind:d,protocol:y,rejected:!0};else{var k,C,S,x,E,T,R,P,O;!g&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(d,!0));var A,B,I=n.parseRtpParameters(s);g||(A=n.getIceParameters(s,p),(B=n.getDtlsParameters(s,p)).role="client"),R=n.parseRtpEncodingParameters(s);var j=n.parseRtcpParameters(s),D=n.matchPrefix(s,"a=end-of-candidates",p).length>0,z=n.matchPrefix(s,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!g&&v&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||g)"answer"!==i.type||g||(C=(k=l.transceivers[c]).iceGatherer,S=k.iceTransport,x=k.dtlsTransport,E=k.rtpReceiver,T=k.sendEncodingParameters,P=k.localCapabilities,l.transceivers[c].recvEncodingParameters=R,l.transceivers[c].remoteCapabilities=I,l.transceivers[c].rtcpParameters=j,z.length&&"new"===S.state&&(!m&&!D||v&&0!==c?z.forEach((function(e){a(k.iceTransport,e)})):S.setRemoteCandidates(z)),v&&0!==c||("new"===S.state&&S.start(C,A,"controlling"),"new"===x.state&&x.start(B)),!o(k.localCapabilities,k.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&k.sendEncodingParameters[0].rtx&&delete k.sendEncodingParameters[0].rtx,l._transceive(k,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!E||"sendrecv"!==_&&"sendonly"!==_?delete k.rtpReceiver:(O=E.track,b?(h[b.stream]||(h[b.stream]=new e.MediaStream),r(O,h[b.stream]),f.push([O,E,h[b.stream]])):(h.default||(h.default=new e.MediaStream),r(O,h.default),f.push([O,E,h.default]))));else{(k=l.transceivers[c]||l._createTransceiver(d)).mid=w,k.iceGatherer||(k.iceGatherer=l._createIceGatherer(c,v)),z.length&&"new"===k.iceTransport.state&&(!D||v&&0!==c?z.forEach((function(e){a(k.iceTransport,e)})):k.iceTransport.setRemoteCandidates(z)),P=e.RTCRtpReceiver.getCapabilities(d),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),T=k.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var M,L=!1;"sendrecv"===_||"sendonly"===_?(L=!k.rtpReceiver,E=k.rtpReceiver||new e.RTCRtpReceiver(k.dtlsTransport,d),L&&(O=E.track,b&&"-"===b.stream||(b?(h[b.stream]||(h[b.stream]=new e.MediaStream,Object.defineProperty(h[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(O,"id",{get:function(){return b.track}}),M=h[b.stream]):(h.default||(h.default=new e.MediaStream),M=h.default)),M&&(r(O,M),k.associatedRemoteMediaStreams.push(M)),f.push([O,E,M]))):k.rtpReceiver&&k.rtpReceiver.track&&(k.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===k.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),k.associatedRemoteMediaStreams=[]),k.localCapabilities=P,k.remoteCapabilities=I,k.rtpReceiver=E,k.rtcpParameters=j,k.sendEncodingParameters=T,k.recvEncodingParameters=R,l._transceive(l.transceivers[c],!1,L)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(h).forEach((function(t){var r=h[t];if(r.getTracks().length){if(-1===l.remoteStreams.indexOf(r)){l.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){l._dispatchEvent("addstream",n)}))}f.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(l,t,n,[r])}))}})),f.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},l.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(r._createTransceiver("audio"),o--),s>0&&(r._createTransceiver("video"),s--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||n.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!r._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){s=u;break}var l=r.transceivers[s];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var h=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===h.protocol&&(0===h.port||9===h.port))return i();if(h.component&&1!==h.component)return i();if((0===s||s>0&&l.iceTransport!==r.transceivers[0].iceTransport)&&!a(l.iceTransport,h))return o(c("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(h.type?f:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var d=0;d<r.transceivers.length&&(r.transceivers[d].rejected||(r.transceivers[d].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[d]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));d++);i()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var h=["createOffer","createAnswer"];return h.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},7539:e=>{"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var n=t.matchPrefix(e+r,"a=ice-ufrag:")[0],i=t.matchPrefix(e+r,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ",n+=r.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach((function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));var i=0;return r.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){var r,n=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(r=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),n.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&c&&n.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},t.parseRtcpParameters=function(e){var r={},n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(r.cname=n.value,r.ssrc=n.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return r.mux=o.length>0,r},t.parseMsid=function(e){var r,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(r=n[0].substr(7).split(" "))[0],track:r[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(r=i[0].value.split(" "))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(r=parseInt(i[0].substr(19),10)),isNaN(r)&&(r=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:r};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,n){var i=void 0!==r?r:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,r,n,i){var o=t.writeRtpDescription(e.kind,r);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,r){for(var n=t.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),n=0;n<r.length;n++)if(r[n].length<2||"="!==r[n].charAt(1))return!1;return!0},e.exports=t},3181:(e,t,r)=>{"use strict";var n=r(726),i=r(6270),o=r(3736);class s{constructor(){this.events=new Map,this.broadcast=new o.i(((e,t)=>{})),this.errorHandler=e=>{throw e},this.error=this.channel("error",((...e)=>{}),!0),this.warn=this.channel("warning",((...e)=>{}),!0),this.info=this.channel("info",((...e)=>{}),!0),this.log=this.channel("log",((...e)=>{}),!0),this.debug=this.channel("debug",((...e)=>{}),!0)}channel(e,t,r=!1){const n=new o.i(t);n.errorHandler=e=>{this.errorHandler(e)},this.events.set(e,n),r||n.on(((...t)=>this.broadcast.emit(e,t)));const i=(...e)=>n.emit(...e);return i.channel=n,i.on=e=>(n.on(e),i),i.off=e=>(n.off(e),i),i.once=e=>(n.once(e),i),i}logErrorsToBuiltinConsole(){this.error.channel.on(((...e)=>console.error(e.map((e=>(0,i._t)(e))).join(" "))))}logToBuiltinConsole(){this.warn.channel.on(((...e)=>console.warn(e.map((e=>(0,i._t)(e))).join(" ")))),this.info.channel.on(((...e)=>console.info(e.map((e=>(0,i._t)(e))).join(" ")))),this.log.channel.on(((...e)=>console.log(e.map((e=>(0,i._t)(e))).join(" ")))),this.debug.channel.on(((...e)=>console.debug(e.map((e=>(0,i._t)(e))).join(" "))))}}var a=r(5725);class c{constructor(e,t){this.indicies=e,this.table=t,this.indicies=e,this.table=t}export(){return{indicies:this.indicies,table:this.table}}toJSON(){return JSON.stringify(this.export())}forEach(e){for(const[t,r]of this.table)for(const[n,i]of r)e(i,t,n)}}class u{constructor(e){this.index=new Map,this.value=new Map,this.i=0}add(e){const t=this.i++;return this.set(e,t),t}has(e){return this.index.has(e)}of(e){return this.has(e)?this.index.get(e):this.add(e)}get(e){return this.value.get(e)}set(e,t){this.index.set(e,t),this.value.set(t,e)}serialize(){return Array.from(this.value.entries())}deserialize(e){for(const[t,r]of e)this.set(r,t)}object(){return Object.fromEntries(this.value)}*[Symbol.iterator](){for(const[e,t]of this.index)yield[e,t]}}class l{constructor(e){if(this.cols=new Set,this.rows=new Map,e)for(const[t,r]of e)for(const[e,n]of r)this.set(t,e,n)}row(e){return new h(this,e)}col(e){return new f(this,e)}cell(e,t){return new d(this,e,t)}get(e,t){return this._row(e).get(t)}set(e,t,r){return this.createColumn(t),this._row(e).set(t,r),this}has(e,t){return!!this.rows.has(e)&&this.rows.get(e).has(t)}delete(e,t){return this._row(e).delete(t)}deleteRow(e){this.rows.delete(e)}clear(){this.rows.clear(),this.cols.clear()}rowKeys(){return this.rows.keys()}colKeys(){return this.cols.keys()}hasRow(e){return this.rows.has(e)}entries(){return Array.from(this.rows.entries()).map((([e,t])=>[e,Array.from(t.entries())]))}toObject(){const e={};return this.forEach(((t,r,n)=>{var i;const o=String(r),s=String(n);(e[o]=null!==(i=e[o])&&void 0!==i?i:{})[s]=t})),e}forEach(e){for(const[t,r]of this.rows)for(const r of this.cols)this.has(t,r)&&e(this.get(t,r),t,r)}serialize(){return new p(this).serialize()}*[Symbol.iterator](){for(const[e,t]of this.rows)yield[e,t.entries()]}createColumn(e){this.cols.add(e)}createRow(e){this.rows.has(e)||this.rows.set(e,new Map)}_row(e){return this.createRow(e),this.rows.get(e)}}class h{constructor(e,t){this.table=e,this.r=t,this.table=e,this.r=t}col(e){return this.table.cell(this.r,e)}forEach(e){const t=this.r;for(const r of this.table.colKeys())e(this.table.get(t,r),t,r)}}class f{constructor(e,t){this.table=e,this.c=t,this.table=e,this.c=t}row(e){return this.table.cell(e,this.c)}forEach(e){const t=this.c;for(const r of this.table.rowKeys())e(this.table.get(r,t),r,t)}}class d{constructor(e,t,r){this.table=e,this.r=t,this.c=r,this.table=e,this.r=t,this.c=r}value(){return this.table.get(this.r,this.c)}set(e){return this.table.set(this.r,this.c,e),this}has(){return this.table.has(this.r,this.c)}}class p{constructor(e){this.indicies=[new u,new u],this.store=new l,e&&this.copy(e)}copy(e){e instanceof l?e.forEach(((e,t,r)=>this.set(t,r,e))):e instanceof c&&this.copySerialized(e)}copySerialized(e){this.indicies[0].deserialize(e.indicies[0]),this.indicies[1].deserialize(e.indicies[1]),e.forEach(((e,t,r)=>this.store.set(t,r,e)))}write(e){for(const[t,r]of this.indicies[0])for(const[n,i]of this.indicies[1])this.store.has(r,i)&&e.set(t,n,this.store.get(r,i))}set(e,t,r){const n=this.indicies[0].of(e),i=this.indicies[1].of(t);this.store.set(n,i,r)}get(e,t){const r=this.indicies[0].of(e),n=this.indicies[1].of(t);return this.store.get(r,n)}toObject(){return this.store.toObject()}rows(){return this.indicies[0].object()}cols(){return this.indicies[1].object()}serialize(){return new c([this.indicies[0].serialize(),this.indicies[1].serialize()],this.store.entries())}}function m(e){return a.t.array(a.t.tuple(a.t.number,e))}var v=r(2205),g=r(3622);class y{constructor(e,t){this.store=e,this.component=t,this.store=e,this.component=t}getSafe(e){return this.component.t.cast(this.get(e))}setSafe(e,t){return this.component.t.assert(t),this.set(e,t),this}get(e){if(!(0,g.lZ)(e))return this.store.get(e,this.component.hash)}set(e,t){return(0,g.lZ)(e)||this.store.set(e,this.component.hash,t),this}has(e){return!(0,g.lZ)(e)&&this.store.has(e,this.component.hash)}delete(e){return this.store.delete(e,this.component.hash)}test(e){return!(0,g.lZ)(e)&&this.has(e)}get name(){return this.component.name}}class _ extends y{enable(e){this.set(e,!0)}disable(e){this.delete(e)}is(e){return this.has(e)&&!0===this.get(e)}test(e){return this.is(e)}}var b=r(7948);class w{constructor(e,t,r){this.name=e,this.hash=(0,b.vp)(r||e),this.t=a.t.nullable(t)}}w.unknown=e=>new w(e,a.t.unknown),w.string=e=>new w(e,a.t.string),w.number=e=>new w(e,a.t.number),w.boolean=e=>new w(e,a.t.boolean),w.flag=e=>new w(e,a.t.literal(!0)),w.array=(e,t)=>new w(t,a.t.array(e)),w.record=(e,t,r)=>new w(r,a.t.record(e,t)),w.digest=(e,t)=>new w(e,a.t.literal(!0),t);var k=r(9917),C=r(6486);class S{constructor(e,t){this.defaults=new Map,this.inheritsFrom=[],this.gamestate=e,this.name=t}flag(e){return this.defaults.set(e,!0),this}prop(e,t){return this.defaults.set(e,t),this}add(e,t){return e instanceof _?this.flag(e):this.prop(e,t)}digest(e){return w.digest(this.name,e.map((e=>e.component.hash)).join())}extends(e){for(const[t,r]of e.defaults)this.defaults.set(t,r);return this.defaults.set(e.flag,!0),this.inheritsFrom.push(e,...e.inheritsFrom),this}compile(){const e=Array.from(this.defaults.keys()).filter((e=>e instanceof _)),t=Array.from(this.defaults.keys()).filter((e=>!(e instanceof _))),r=Object.fromEntries(t.map((e=>[e.component.name,e]))),n=new E(this.gamestate,this.name,this.gamestate.bindFlag(this.digest([...e,...t])),r,new Set(e),new Set(t),this.defaults,this.inheritsFrom);return this.gamestate.addArchetype(n),n}}class x extends Error{}class E{constructor(e,t,r,n,i,o,s,a){this.gamestate=e,this.name=t,this.flag=r,this.accessors=n,this.flags=i,this.props=o,this.defaults=s,this.defaults.set(r,!0),this.inheritsFrom=a}get(e){return this.accessors[e]}missing(e){return[this.flag,...Array.from(this.flags).filter((t=>!t.is(e))),...Array.from(this.props).filter((t=>!t.has(e)))].map((e=>e.component.name))}isDeep(e){for(const t of this.flags)if(!t.is(e))return!1;for(const t of this.props)if(!t.has(e))return!1;return!0}is(e){return!(0,g.lZ)(e)&&this.flag.is(e)}test(e){return this.is(e)}wrap(e){const t={};for(const[r,n]of Object.entries(this.accessors))Object.defineProperty(t,r,{get:()=>n.get(e),set(t){n.set(e,t)}});return Object.defineProperty(t,"_id",{get:()=>e}),t}validate(e){if(this.flag.is(e)){const t=this.missing(e);if(t.length)throw new Error(`${e} is not ${this.name} (missing components: ${t.join(", ")})`)}}cast(e,t){if(!this.flag.is(e))throw new x(`failed to cast ${t} to ${this.name||this.gamestate.about(e)} (missing components: ${this.missing(e).join(", ")})`);return this.wrap(e)}construct(e){for(const[t,r]of this.defaults.entries())t.set(e,(0,C.cloneDeep)(r));return this.cast(e,`[new ${this.name}]`)}create(){const e=this.gamestate.entity();return this.construct(e)}}class T extends Error{constructor(e,t,r){super(`invalid data for [${t},${r.name}]: ${e}`),this.entity=t,this.component=r}}class R{constructor(){this.components=new Set,this._accessors=new Map,this._archetypes=new Map,this.store=new l,this.name=this.bind(R.Component.string("name"))}get accessors(){return this._accessors.values()}get archetypes(){return this._archetypes.values()}entity(){const e=(0,v.V)(R.entityPrefix);return new Set(this.store.rowKeys()).has(e)?this.entity():e}has(e){return this.store.hasRow(e)}delete(e){this.store.deleteRow(e)}bindFlag(e){this.components.add(e);const t=new _(this.store,e);return this._accessors.set(e.hash,t),t}bind(e){this.components.add(e);const t=new y(this.store,e);return this._accessors.set(e.hash,t),t}archetype(e){return new S(this,e)}addArchetype(e){this._archetypes.set(e.flag.component.hash,e)}save(){return this.store.serialize().toJSON()}load(e){const t=R.loader.load(e),r=new l;t.write(r),R.validate(r,this.components),t.write(this.store)}validate(){return R.validate(this.store,this.components)}static validate(e,t){const r={entity:void 0,component:void 0},n=Array.from(t),i=new k.b;let o=!0;for(const t of n)for(const n of e.rowKeys())if(r.entity=n,r.component=t,e.has(n,t.hash)){const r=e.get(n,t.hash),s=i.writer(`${n}/${t.name}`,r);o=o&&t.t.validate(r,s)}if(!o)throw new Error(i.error())}entities(){return this.store.rowKeys()}flagComponents(){return Array.from(this.accessors).map((e=>e instanceof _?e:void 0)).filter((e=>e))}propertyComponents(){return Array.from(this.accessors).map((e=>e instanceof _?void 0:e)).filter((e=>e))}filter(e){return Array.from(this.entities()).filter(e)}inspect(e){const t={};for(const r of this.components)this.store.has(e,r.hash)&&(t[r.name]=this.store.get(e,r.hash));return t}reset(){this.store.clear()}about(e){return this.name.get(e)||e}}R.loader=new class{constructor(e,t,r){this.t=a.t.object({indicies:a.t.tuple(m(e),m(t)),table:m(m(r))})}parse(e){const t=this.t.cast(e);return new c(t.indicies,t.table)}load(e){if("string"==typeof e)return this.load(JSON.parse(e));const t=this.parse(e);return new p(t)}}(a.t.string,a.t.string,a.t.unknown),R.Component=w,R.Archetype=E,R.entityPrefix="@";const P=Symbol("NAME");class O{constructor(e){this[P]=e}toString(){return String(this[P])}}O.NAME=P;var A=r(9788);class B{constructor(e,t){this.cache=new Map,this._get=e,this._validate=t}get(e){if(this.cache.has(e)){const t=this.cache.get(e);if(this._validate(e,t))return t}const t=this._get(e);if(this._validate(e,t)&&!(0,g.lZ)(t))return this.cache.set(e,t),t}clear(){this.cache.clear()}}const I=(e,t,r=2,n=!1)=>{if(void 0===e||void 0===t)return 0;if(e===t)return 1;if(n||(e=e.toLowerCase(),t=t.toLowerCase()),e.length<r||t.length<r)return 0;const i=new Map;for(let t=0;t<e.length-(r-1);t++){const n=e.substr(t,r);i.set(n,i.has(n)?i.get(n)+1:1)}let o=0;for(let e=0;e<t.length-(r-1);e++){const n=t.substr(e,r),s=i.has(n)?i.get(n):0;s>0&&(i.set(n,s-1),o++)}return 2*o/(e.length+t.length-2*(r-1))};class j{constructor(e){this.options=j.defaultOptions(),this.events=new s,this.state=new R,this.name=this.state.bind(R.Component.string("name")),this.description=this.state.bind(R.Component.string("description")),this.children=this.state.bind(R.Component.array(a.t.string,"children")),this.parent=this.state.bind(R.Component.string("parent")),this.reference=this.state.bind(R.Component.string("reference")),this.token=this.state.bind(R.Component.string("token")),this.direction=this.state.bind(R.Component.string("direction")),this.locked=this.state.bind(R.Component.boolean("locked")),this.void=this.state.bindFlag(R.Component.flag("void")),this.container=this.state.archetype("container").add(this.children,[]).compile(),this.child=this.state.archetype("child").add(this.parent,null).compile(),this.node=this.state.archetype("node").extends(this.container).extends(this.child).compile(),this.carryable=this.state.archetype("carryable").compile(),this.placeable=this.state.archetype("placeable").extends(this.container).compile(),this.player=this.state.archetype("player").extends(this.node).add(this.name).add(this.token).compile(),this.npc=this.state.archetype("npc").extends(this.node).add(this.name).compile(),this.room=this.state.archetype("room").extends(this.container).extends(this.placeable).add(this.name).add(this.description).compile(),this.door=this.state.archetype("door").extends(this.node).add(this.direction).add(this.locked).add(this.reference).compile(),this.object=this.state.archetype("object").extends(this.child).add(this.name).add(this.description).compile(),this.prop=this.state.archetype("prop").extends(this.object).compile(),this.item=this.state.archetype("item").extends(this.object).extends(this.carryable).compile(),this.chest=this.state.archetype("chest").extends(this.object).extends(this.placeable).compile(),this.backpack=this.state.archetype("backpack").extends(this.object).extends(this.placeable).extends(this.carryable).compile(),this.playerMove=this.events.channel("player-move",((e,t,r)=>{}),!0),this.playerTeleport=this.events.channel("player-teleport",((e,t,r)=>{}),!0),this.objectTeleported=this.events.channel("object-teleported",((e,t,r)=>{}),!0),this.objectDropped=this.events.channel("object-dropped",((e,t,r)=>{}),!0),this.objectTaken=this.events.channel("object-taken",((e,t,r)=>{}),!0),this.objectGiven=this.events.channel("object-given",((e,t,r)=>{}),!0),this.objectPut=this.events.channel("object-put",((e,t,r)=>{}),!0),this.objectTakenFrom=this.events.channel("object-taken-from",((e,t,r)=>{}),!0),this.eventEntityMove=this.events.channel("entity-move",((e,t,r)=>{})).on(((e,t,r)=>{if(this.player.is(e))if((0,g.lZ)(t)||(0,g.lZ)(r))this.playerTeleport(e,t,r);else{const n=this.room.is(t),i=this.room.is(r);n&&i&&this.areRoomsConnectedAndUnlocked(t,r)?this.playerMove(e,t,r):this.playerTeleport(e,t,r)}else if(this.object.is(e)){const n=this.player.is(t),i=this.room.is(t),o=this.object.is(t),s=this.player.is(r),a=this.room.is(r),c=this.object.is(t);n?a?this.objectDropped(e,t,r):s?this.objectGiven(e,t,r):c&&this.objectPut(e,t,r):i?s?this.objectTaken(e,t,r):a&&this.objectTeleported(e,t,r):o?s&&this.objectTakenFrom(e,t,r):a&&this.objectTeleported(e,t,r)}})),this.eventRoomsLinked=this.events.channel("rooms-linked",((e,t,r,n)=>{})),this.eventDoorUnlock=this.events.channel("door-unlocked",((e,t,r)=>{})),this.eventDoorLock=this.events.channel("door-locked",((e,t,r)=>{})),this.send=this.events.channel("send",((e,t)=>{}),!0),this.sessionStart=this.events.channel("session-start",(e=>{})),this.sessionEnd=this.events.channel("session-end",(e=>{})),this.whisper=this.events.channel("whisper",((e,t,r)=>{})),this.say=this.events.channel("say",((e,t,r)=>{})),this.entityNameCache=new B((e=>{for(const t of this.state.entities())if(this.name.get(t)===e)return t}),((e,t)=>this.name.get(t)===e)),this.sessions=new B((e=>{for(const t of this.state.entities())if(this.token.get(t)===e)return t}),((e,t)=>this.token.get(t)===e)),this.error=this.events.error,this.warn=this.events.warn,this.info=this.events.info,this.log=this.events.log,this.debug=this.events.debug,e&&(this.options=(0,n.Z)(this.options,e)),this.options.logEvents&&this.logEvents(),this.events.errorHandler=e=>{if(e instanceof L)return this.error(e);throw e}}reset(){this.state.reset()}destroyEntity(e){void 0!==e&&(this.parent.has(e)&&this.unlinkFromParent(e),this.children.has(e)&&this.unlinkFromChildren(e),this.state.delete(e),this.logCommand("destroy",[e],void 0))}createPlayer(e){const t=this.state.entity();return this.player.construct(t).name=e,this.logCommand("create-player",[e],t),this.moveToVoid(t),t}createNPC(e){const t=this.state.entity();return this.npc.construct(t).name=e,this.logCommand("create-npc",[e],t),this.moveToVoid(t),t}createProp(e,t){const r=this.state.entity(),n=this.prop.construct(r);return n.name=e,n.description=t,this.logCommand("create-prop",[e,t],r),this.moveToVoid(r),r}createItem(e,t){const r=this.state.entity(),n=this.item.construct(r);return n.name=e,n.description=t,this.logCommand("create-item",[e,t],r),this.moveToVoid(r),r}createChest(e,t){const r=this.state.entity(),n=this.chest.construct(r);return n.name=e,n.description=t,this.logCommand("create-chest",[e,t],r),this.moveToVoid(r),r}createBackpack(e,t){const r=this.state.entity(),n=this.backpack.construct(r);return n.name=e,n.description=t,this.logCommand("create-backpack",[e,t],r),this.moveToVoid(r),r}createRoom(e,t){const r=this.state.entity(),n=this.room.construct(r);return n.name=e,n.description=t,this.logCommand("create-room",[e,t],r),r}_constructDoor(e,t,r,n=!1){const i=this.state.entity(),o=this.door.construct(i);return this.move(i,e),o.direction=t,o.locked=n,o.reference=r,i}unlinkFromParent(e){this.assert("target",e,[this.parent]);const t=this.parent.get(e);if(void 0!==t){const r=new Set(this.children.get(t));r.delete(e),this.children.set(t,Array.from(r))}this.parent.set(e,void 0)}unlinkFromChildren(e){this.assert("target",e,[this.children]);for(const t of this.children.get(e))this.parent.has(t)&&this.parent.set(t,void 0);this.children.set(e,[])}move(e,t){if(e===t)throw new L(`Entity ${this.about(e)} cannot contain itself.`);this.assert("child",e,[this.parent]),this.assert("container",t,[this.children]);const r=this.parent.get(e);this.unlinkFromParent(e),this.parent.set(e,t),this.children.get(t).push(e),r!==t&&this.eventEntityMove(e,r,t)}mergeContainers(e,t){this.assert("target",e,[this.children]),this.assert("node",t,[this.children]);for(const r of this.children.get(t))this.move(r,e)}areNeighbors(e,t){return this.parent.get(e)===this.parent.get(t)}roomOf(e){return this.room.is(e)?e:this.parent.has(e)?this.roomOf(this.parent.get(e)):void 0}sameRoom(e,t){return this.roomOf(e)===this.roomOf(t)}neighbors(e){this.assert("target",e,[this.parent]);const t=this.parent.get(e);return this.assert("target:parent",e,[this.children]),this.children.get(t).filter((t=>t!==e))}setDoor(e,t,r,n=!1){const i=this.getDoor(e,t)||this._constructDoor(e,t,r,n);return this.reference.set(i,r),this.locked.set(i,n),i}editDoor(e,t,r,n=!1){const i=this.setDoor(e,t,r,n);return this.logCommand("edit-door",[e,t,r,n],i),i}connectRooms(e,t,r,n=!1){const i=[void 0,void 0];return t.forward&&(i[0]=this.setDoor(e,t.forward,r,n)),t.backward&&(i[1]=this.setDoor(r,t.backward,e,n)),this.logCommand("connect-rooms",[e,t,r,n],i),i}disconnectRooms(e,t){this.doors(e).filter((e=>this.reference.get(e)===t)).forEach((e=>this.destroyEntity(e))),this.doors(t).filter((t=>this.reference.get(t)===e)).forEach((e=>this.destroyEntity(e))),this.logCommand("disconnect-rooms",[e,t],void 0)}doors(e){return this.room.cast(e).children.filter((e=>this.door.is(e)))}areRoomsConnectedAndUnlocked(e,t){const r=this.doors(e).find((e=>this.reference.get(e)===t)),n=this.doors(t).find((t=>this.reference.get(t)===e));return r&&n&&!this.locked.get(r)&&!this.locked.get(n)}getDoor(e,t){return t=t.toLowerCase(),this.doors(e).find((e=>this.direction.get(e).toLowerCase()===t))}getAdjacentRoom(e,t){return this.reference.get(this.getDoor(e,t))}isAdjacentRoomLocked(e,t){return this.locked.get(this.getDoor(e,t))}take(e,t){this.assert("obj",e,[this.carryable]),this.assert("player",t,[this.player]),this.move(e,t)}isHolding(e,t){return this.children.get(t).includes(e)}drop(e,t){if(this.assert("obj",e,[this.carryable]),this.assert("player",t,[this.player]),!this.isHolding(e,t))throw new L(`${this.about(t)} must be holding ${this.about(e)} to drop it.`);this.move(e,this.roomOf(t))}movePlayerDirection(e,t){this.assert("player",e,[this.player,this.parent]);const r=this.getDoor(this.parent.get(e),t),n=this.reference.get(r),i=this.locked.get(r);if(void 0===n)throw new L(`${this.about(e)}: no target for ${t}`);if(!1!==i)throw new L;this.move(e,n)}authenticate(e,t){const r=this.find(e);if(!r)return!1;const n=this.token.get(r);return n?n===t:(this.token.set(r,t),!0)}session(e){if(!(0,g.lZ)(e))return this.sessions.get(e)}find(e){return this.entityNameCache.get(e)}filter(...e){return this.state.filter((t=>e.every((e=>e.test(t)))))}search(e,t=[]){return this.filter(this.name,...t).map((t=>({value:t,score:I(this.name.get(t),e)}))).filter((e=>e.score>.25)).sort(((e,t)=>e.score-t.score)).map((e=>e.value))}flags(e){return this.state.flagComponents().filter((t=>t.is(e)))}properties(e){return this.state.propertyComponents().filter((t=>t.has(e)))}getArchetype(e){const t=[];for(const r of this.state.archetypes)r.is(e)&&t.push(r);return t.sort(((e,t)=>e.inheritsFrom.includes(t)?1:t.inheritsFrom.includes(e)?-1:0)),t[t.length-1]}getOwnProperties(e){const t=this.getArchetype(e);return this.properties(e).filter((e=>!t.props.has(e)))}getTypeString(e){const t=this.getArchetype(e),r=this.getOwnProperties(e);return r.length?`${t.name}{${r.map((e=>e.name)).join(", ")}}`:t.name}binEntities(e,t){const r=new Map(t.map((e=>[e,[]])));for(const n of e)for(const e of t)if(e.test(n)){r.get(e).push(n);break}return Array.from(r.values()).flat()}theVoid(){const e=this.filter(this.void,this.room),t=e.shift()||(()=>{const e=this.createRoom("The Void","");return this.void.enable(e),e})();for(;e.length;){const r=e.shift();this.mergeContainers(t,r),this.destroyEntity(r)}return t}moveToVoid(e){this.move(e,this.theVoid())}foreachPlayer(e){this.filter(this.player).forEach(e)}foreachPlayerIn(e,t){(0,g.lZ)(e)||(this.assert("container",e,[this.container]),this.children.get(e).filter((e=>this.player.is(e))).forEach(t))}command(e,...t){try{return e.call(this,...t)}catch(e){if(e instanceof L||e instanceof x)return void this.error(e);throw e}}about(e){var t;return null!==(t=this.name.get(e))&&void 0!==t?t:e}print(e){var t;return(0,i.oB)(null!==(t=this.name.get(e))&&void 0!==t?t:e,["fw-bold"])}has(e,t){return t.filter((t=>!t.test(e))).map((e=>e.name))}assert(e,t,r){if(null==t)throw new F(e);const n=this.has(t,r);if(n.length)throw new N(e,this.about(t),n)}logCommand(e,t,r){const n=e=>this.resolveArg(e),o=(0,A.fL)(", "),s=t.map(n).map((e=>[e,o])).flat().slice(0,-1);this.log((0,i.oB)((0,i.Qo)(e,"(",...s,")",(0,i.oB)("  ",["text-subtle"]),(0,i.oB)(n(r),["text-subtle"])),["fst-italic"]))}logEvent(e,t){const r=(0,A.fL)(", "),n=t.map((e=>this.resolveArg(e))).map((e=>[e,r])).flat().slice(0,-1);this.log((0,i.oB)((0,i.Qo)(e,"<",...n,">"),["fst-italic"]))}logEvents(){this.events.broadcast.on(((e,t)=>{this.logEvent(e,t)}))}resolveArg(e){if(Array.isArray(e)){const t=(0,A.fL)(", "),r=e.map((e=>this.resolveArg(e))).map((e=>[e,t])).flat().slice(0,-1);return(0,i.Qo)("[",...r,"]")}if("function"==typeof e||e instanceof Function)return(0,A.fL)("[native]");if(void 0===e||void 0===e)return(0,A.fL)("[undefined]");if(null===e)return(0,A.fL)("[null]");if(e instanceof O)return(0,i.Qo)((0,A.fL)("["),(0,i.oB)((0,A.fL)(e.toString()),["debug-object"]),(0,A.fL)("]"));if("string"==typeof e){if(e.length>this.options.eventArgumentLength)return(0,A.fL)("[...]");if(this.state.has(e)){if(this.name.has(e))return(0,i.Qo)("<",(0,i.oB)(this.about(e),["debug-entity"]),">");const t=this.getArchetype(e);return(0,i.Qo)("<[",(0,i.oB)(t.name,["debug-entity"]),(0,A.fL)("]>"))}return(0,A.fL)(`"${e}"`)}return this.resolveArg(String(e))}}var D;j.defaultOptions=()=>({eventArgumentLength:100,logEvents:!0}),function(e){e.North="North",e.South="South",e.East="East",e.West="West",e.Up="Up",e.Down="Down"}(D||(D={}));class z extends O{constructor(e,t,r){super(r=r||z.getName(t,e)),this.backward=e,this.forward=t,this.name=r,this.name=r,this.forward=t.toLowerCase(),this.backward=e.toLowerCase()}static getName(e,t){return e&&t?`${t}_of`:`[${t}, ${e}]`}}const M={northof:new z(D.North,D.South),southof:new z(D.South,D.North),eastof:new z(D.East,D.West),westof:new z(D.West,D.East),above:new z(D.Up,D.Down,"above"),below:new z(D.Down,D.Up,"below")};class L extends Error{}class F extends L{constructor(e){super(`target for "${e}" is undefined`),this.argName=e,this.argName=e}}class N extends L{constructor(e,t,r){super(`target for "${e}" (${t}) is missing the fallowing components: [${r.join(", ")}]`),this.argName=e,this.targetName=t,this.missing=r,this.argName=e,this.targetName=t,this.missing=r}}var U=r(7063);class H{constructor(){this.name=Object.getPrototypeOf(this).constructor.name}}var W=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class G extends H{constructor(){super(...arguments),this.name="Console",this.file=()=>W(this,void 0,void 0,(function*(){return yield this.submenu("File",{text:"Export",value:()=>W(this,void 0,void 0,(function*(){return yield this.server.exportLevel()}))},{text:"New",value:()=>W(this,void 0,void 0,(function*(){return yield this.confirm("Delete Everything?",(()=>this.server.load()))}))})})),this.rooms=()=>W(this,void 0,void 0,(function*(){return this.submenu("Edit Rooms",{text:"Create",value:()=>W(this,void 0,void 0,(function*(){return(0,g.SE)(yield(0,U.c)({name:()=>this.getEntityName("Create Room","Name","name"),description:()=>this.ask("Create Room","Description","description")}),(e=>this.game.createRoom(e.name,e.description)))}))},{text:"Link",value:()=>W(this,void 0,void 0,(function*(){return yield this.link()}))},{text:"Unlink",value:()=>W(this,void 0,void 0,(function*(){return yield this.unlink()}))},{text:"Show List",value:()=>W(this,void 0,void 0,(function*(){this.server.divider(),this.listArchetype("Rooms:",this.game.room),this.server.divider()}))})})),this.objects=()=>W(this,void 0,void 0,(function*(){return yield this.menu("Objects",{text:"Create",value:()=>W(this,void 0,void 0,(function*(){return(0,g.SE)(yield(0,U.c)({type:()=>this.pick("Object Type",{text:"Prop",value:"prop"},{text:"Item",value:"item"},{text:"Chest",value:"chest"},{text:"Backpack",value:"backpack"},i.Fo),name:()=>this.getEntityName("Create Object","Name","name"),description:()=>this.ask("Create Object","Description","description")}),(e=>{switch(e.type){case"prop":this.game.command(this.game.createProp,e.name,e.description);break;case"item":this.game.command(this.game.createItem,e.name,e.description);break;case"chest":this.game.command(this.game.createChest,e.name,e.description);break;case"backpack":this.game.command(this.game.createBackpack,e.name,e.description)}}))}))},{text:"Move",value:this.move},{text:"Show List",value:()=>W(this,void 0,void 0,(function*(){this.server.divider(),this.listArchetype("Props:",this.game.prop),this.listArchetype("Items:",this.game.item),this.listArchetype("Chest:",this.game.chest),this.listArchetype("Backpack:",this.game.backpack),this.server.divider()}))})})),this.npc=()=>W(this,void 0,void 0,(function*(){return this.submenu("NPC",{text:"Create",value:()=>W(this,void 0,void 0,(function*(){return(0,g.SE)(yield(0,U.c)({name:()=>this.getEntityName("Create NPC","Name","name")}),(e=>this.game.createNPC(e.name)))}))})})),this.edit=()=>W(this,void 0,void 0,(function*(){return this.submenu("Edit",{text:"Rooms",value:this.rooms},{text:"Objects",value:this.objects},{text:"NPCs",value:this.npc},{text:"Move",value:this.move},{text:"Rename",value:()=>W(this,void 0,void 0,(function*(){return yield(0,g.SE)(yield(0,U.c)({target:()=>this.search("Rename","Target","target",[this.game.name]),name:()=>this.getEntityName("Rename","New Name","...")}),(e=>this.game.name.set(e.target,e.name)))}))},{text:"Delete",value:()=>W(this,void 0,void 0,(function*(){return yield(0,g.SE)(yield(0,U.c)({target:()=>this.search("Delete","Target","target")}),(e=>this.game.destroyEntity(e.target)))}))})})),this.view=()=>W(this,void 0,void 0,(function*(){return this.submenu("View",{text:"Inspect",value:()=>W(this,void 0,void 0,(function*(){return yield this.inspect(yield this.search())}))},{text:"List",value:()=>W(this,void 0,void 0,(function*(){return yield this.listArchetype("Entities:")}))})}))}get game(){return this.server.game}load(e){this.console=e.console,this.server=e,e.loaded.once((()=>W(this,void 0,void 0,(function*(){for(this.server.divider(),this.server.log((0,i.oB)("MiniMUD server",i.s.title)),this.server.log((0,i.oB)('Press "C" to copy the link to this lobby. Share this link to invite your friends.')),this.server.log((0,i.oB)('Press "J" to join in a new tab.')),this.server.log((0,i.oB)('Press "S" to download a save.')),this.server.log((0,i.oB)('Press "L" to load a save.')),this.server.divider();;)yield this.mainMenu()}))))}mainMenu(){return W(this,void 0,void 0,(function*(){yield this.menu("Commands",{text:"Join",value:()=>W(this,void 0,void 0,(function*(){return window.open(this.server.url(),"_blank","noopener=true")}))},{text:"Copy Link",value:()=>W(this,void 0,void 0,(function*(){const e=this.server.url();this.server.log("Copied:",(0,i.oB)(this.server.url(),["fst-italic"]),"to clipboard"),navigator.clipboard.writeText(e)})),keybind:"c"},{text:"Save",value:()=>W(this,void 0,void 0,(function*(){return yield this.server.saveState()}))},{text:"Editor",value:()=>W(this,void 0,void 0,(function*(){return yield this.submenu("Editor",{text:"File",value:this.file},{text:"Edit",value:this.edit},{text:"View",value:this.view})}))})}))}search(e="Search",t="Entity Name:",r="name",n=[]){return W(this,void 0,void 0,(function*(){const o=t=>this.pick(e,...t.map((e=>({text:this.game.name.get(e),value:e}))),i.Fo);let s=this.game.filter(this.game.name,...n);if(s.length<10)return o(s);const a=yield this.ask(e,t,r);if((0,g.lZ)(a))return null;const c=this.game.find(a);if(c)return c;const u=o(this.game.search(a,n));return null===u?yield this.search():u}))}move(){return W(this,void 0,void 0,(function*(){return yield(0,g.SE)(yield(0,U.c)({target:()=>this.search("Move","Target","target",[this.game.parent]),container:()=>this.search("Move","Container","container",[this.game.children])}),(e=>this.game.command(this.game.move,e.target,e.container)))}))}getEntityName(e,t,r){return W(this,void 0,void 0,(function*(){let n=yield this.ask(e,t,r);if((0,g.lZ)(n))return null;for(;void 0!==this.game.find(n);)if(this.server.warn(`name ${n} is already in use`),n=yield this.ask(e,t,r),null===n)return null;return n}))}inspect(e){return W(this,void 0,void 0,(function*(){if((0,g.lZ)(e))return;let t=this.game.getTypeString(e);this.server.divider(),this.server.log((0,i.oB)((0,i.Qo)(`${t}: `,(0,i.oB)(this.game.name.get(e),["fw-bold","fst-italic"])),["fs-5"]));for(const[t,r]of Object.entries(this.game.state.inspect(e)))void 0!==r&&this.server.log(` - ${t}:`,this.game.resolveArg(r));if(this.game.room.is(e)){this.server.log(" - neighbors:");for(const t of this.game.doors(e))this.server.log(`   - ${this.game.direction.get(t)}:`,this.game.resolveArg(this.game.reference.get(t))," ",this.game.locked.get(t)?"(locked)":"(unlocked)")}this.server.divider()}))}directions(e,t){return[{text:`${e} north of ${t}`,value:M.northof,keybind:"n"},{text:`${e} south of ${t}`,value:M.southof,keybind:"s"},{text:`${e} east of ${t}`,value:M.eastof,keybind:"e"},{text:`${e} west of ${t}`,value:M.westof,keybind:"w"},{text:`${e} above ${t}`,value:M.above,keybind:"a"},{text:`${e} below ${t}`,value:M.below,keybind:"b"}]}link(){return W(this,void 0,void 0,(function*(){yield(0,g.SE)(yield(0,U.c)({left:()=>this.search("Link - First","First","target",[this.server.game.room]),right:()=>this.search("Link - Second","Second","target",[this.server.game.room]),relation:e=>this.pick("Relation",...this.directions(this.game.name.get(e.left),this.game.name.get(e.right)),i.Fo),locked:()=>this.pick("Locked",{text:"Yes",value:!0},{text:"No",value:!1},i.Fo)}),(e=>this.game.command(this.game.connectRooms,e.left,e.relation,e.right,e.locked)))}))}unlink(){return W(this,void 0,void 0,(function*(){yield(0,g.SE)(yield(0,U.c)({left:()=>this.search("Unlink - First","First","target",[this.server.game.room]),right:()=>this.search("Unink - Second","Second","target",[this.server.game.room])}),(e=>this.game.command(this.game.disconnectRooms,e.left,e.right)))}))}ask(e,t,r){return W(this,void 0,void 0,(function*(){const n=yield this.console.ask(e,t,r);return(0,g.lZ)(n)?null:n}))}pick(e,...t){return this.console.menu(e,...t)}menu(e,...t){return W(this,void 0,void 0,(function*(){const r=yield this.console.menu(e,...t);(0,g.lZ)(r)||(yield r())}))}submenu(e,...t){return W(this,void 0,void 0,(function*(){let r=!1;for(;!r;)yield this.menu(e,...t,{text:"Back",value:()=>W(this,void 0,void 0,(function*(){r=!0})),keybind:"Escape",keyicon:"ESC"})}))}confirm(e,t){return W(this,void 0,void 0,(function*(){return yield(0,g.SE)(yield(0,U.c)({confirm:()=>this.pick(e,{text:"Yes",value:!0},{text:"No",value:!1})}),(e=>{e.confirm&&t()}))}))}listArchetype(e,...t){this.server.log(e),this.game.filter(...t).forEach((e=>this.server.log(` - ${this.game.about(e)}`,(0,i.oB)(this.game.getTypeString(e),["fst-italic","text-subtle"]))))}}var Z=r(9282),$=r(311);class q extends H{constructor(){super(...arguments),this.name="API v1",this.connections=new Z.V,this.sessions=new Map,this.public=this.connections.api}load(e){this.server=e,this.public.reset(),e.options.logConnections&&this.connections.connection.on((t=>{e.debug("incoming connection"),t.data.on((t=>e.debug(JSON.stringify(t))))}));const t=this.public;t.sequence("/","/clear","/motd","/login"),t.get("/clear",(({res:e})=>{e.header["clear-console"]="true"})),t.static("/motd",i.s.chapter(e.options.motd)),t.redirect("/login","/login/username"),t.form("/login/username","/login/password",{username:{title:"By what name do you wish to be known?",label:"username",placeholder:"username"}}),t.static("/login/invalid_username","Invalid Username"),t.submit("/login/password",(({req:t,res:r},n)=>{const i=n.username;if(i.length<3)return void r.sequence("/login/invalid_username","/login");if(i.length>20)return void r.sequence("/login/invalid_username","/login");if(!(0,g.cp)(i,g.Sk))return void r.sequence("/login/invalid_username","/login");const o=e.game.find(i);!o||e.game.player.is(o)?(r.header["server-id"]=this.server.id,r.header.username=i,o?r.formContent("/login/submit",{username:i,token:{title:"What is your password?",label:"password",placeholder:"password",token:!0}}):r.formContent("/login/submit",{username:i,token:{title:"Choose a password",label:"password",placeholder:"password",token:!0}})):r.sequence("/login/invalid_username","/login")})),t.submit("/login/submit",(({req:t,res:r,connection:n},i)=>{const o=i.username,s=i.token;if(e.game.find(o)){if(!e.game.player.is(e.game.find(o)))return void r.sequence(`/login/incorrect_password/${o}`,"/login")}else e.game.command(e.game.createPlayer,o);e.game.command(e.game.authenticate,o,s)?(r.header["clear-console"]="true",r.header.token=s,r.sequence("/describe/room"),this.startSession(s,n),setTimeout((()=>{const e=new $.yp("POST",{path:"/session_start"});e.header.token=s,e.header.home="/commands",n.request(e)}))):r.sequence(`/login/incorrect_password/${o}`,"/login")})),t.get("/login/incorrect_password/:username",(({req:e,res:t,options:r})=>{t.textContent(`Incorrect password for ${r.username}`)}))}gaurdSession(e,t){const r=e.req.header.token,n=this.server.game.session(r);n?t(Object.assign(Object.assign({},e),{player:n})):(e.res.status="FORBIDDEN",e.res.textContent("Invalid token"))}command(e,t){this.public.get(e,(e=>{this.gaurdSession(e,t)}))}submit(e,t){this.public.submit(e,((e,r)=>{this.gaurdSession(e,(e=>t(Object.assign(Object.assign({},e),{data:r}))))}))}isConnected(e){return this.sessions.has(e)}endSession(e){const t=this.server.game.session(e);this.sessions.get(e).end(),this.server.game.sessionEnd(t)}startSession(e,t){const r=this.server.game.session(e);this.isConnected(e)&&this.endSession(e),this.sessions.set(e,t),t.close.on((()=>{this.sessions.get(e)===t&&(this.sessions.delete(e),this.server.game.sessionEnd(r))})),this.server.game.sessionStart(r)}request(e,t){const r=this.sessions.get(e);if(void 0===r)throw new Error("Unable to find session");return r.request(t)}get(e,t){const r=this.sessions.get(e);if(void 0===r)throw new Error("Unable to find session");return r.get(t)}start(){this.connections.start()}stop(){this.connections.stop()}get id(){return this.connections.id}}var V=r(5733),K=r.n(V),J=r(3162);class Y extends H{constructor(){super(...arguments),this.name="Commands"}load(e){const t=e.api;function r(t,r,n="You"){return r&&t===r?(0,i.oB)(n,i.s.first_person):e.game.room.is(t)?(0,i.oB)(e.game.name.get(t),i.s.room):e.game.npc.is(t)?(0,i.oB)(e.game.name.get(t),i.s.npc):e.game.player.is(t)?(0,i.oB)(e.game.name.get(t),i.s.player):e.game.backpack.is(t)?(0,i.oB)(e.game.name.get(t),i.s.backpack):e.game.chest.is(t)?(0,i.oB)(e.game.name.get(t),i.s.chest):e.game.item.is(t)?(0,i.oB)(e.game.name.get(t),i.s.item):e.game.prop.is(t)?(0,i.oB)(e.game.name.get(t),i.s.prop):e.game.name.has(t)?(0,i.oB)(e.game.name.get(t),i.s.proper_noun):(0,i.oB)("unknown",i.s.subtle)}function n(e){e.push((0,i.oB)((0,A.qE)(),i.s.spacer))}function o(t,o,s,a){!function(e,t,r){const o=[];n(o),o.push(function(...e){return(0,i.oB)((0,i.Qo)(...e),i.s.subtle)}(t)),function(e,t){const r=[];t(r),e.push((0,i.oB)((0,A.jb)(...r),i.s.embed))}(o,(e=>{r(e)})),n(o),e.textContent(...o)}(t,o,(t=>function(t,n,o){const s=e.game,a=n===o?"Inventory":s.name.get(n),c=s.description.get(n);if(t.push((0,i.oB)(a,i.s.lead)),c&&c.length&&t.push((0,i.oB)(c,i.s.italic)),s.children.has(n)){if(s.room.is(n)){const e=[];for(const t of s.doors(n))e.push((0,i.Qo)(r(s.reference.get(t)),(0,i.oB)((0,i.Qo)(" (",s.direction.get(t),") "),i.s.subtle)));t.push((0,i.Qo)((0,i.oB)("Exits: ",i.s.subtle),...e))}const a=e.game.binEntities((s.children.get(n)||[]).filter((e=>e!==o)),[s.player,s.npc,s.prop,s.item,s.chest,s.backpack,s.object]);if(a.length){t.push((0,i.oB)("You see:",i.s.subtle));for(const e of a)t.push((0,i.Qo)("  ",r(e,o)))}}}(t,s,a)))}t.command("/describe/room",(({req:t,res:r,options:n,player:i})=>{o(r,"look",e.game.roomOf(i),i)})),t.command("/describe/:target",(({req:t,res:r,options:n,player:i})=>{e.game.sameRoom(n.target,i)&&(e.game.room.is(n.target)||e.game.object.is(n.target)||n.target===i)?o(r,`look ${e.game.name.get(n.target)}`,n.target,i):r.textContent("You cannot see that.")})),t.command("/commands",(({req:t,res:r,options:n,player:i})=>{r.redirect(`/list_commands/${e.game.roomOf(i)}`)})),t.command("/list_commands/:context",(({req:t,res:r,options:n,player:o})=>{const s=[];e.game.room.is(n.context)&&(s.push({text:"Move",value:"/commands/list_move"}),e.game.children.get(o).length&&s.push({text:"Inventory",value:`/commands/look/${o}`})),e.game.children.has(n.context)&&e.game.children.get(n.context).some((t=>e.game.object.is(t)))&&s.push({text:"Look",value:`/commands/list_look/${n.context}`}),e.game.children.has(n.context)&&!e.game.player.is(n.context)&&e.game.children.get(n.context).some((t=>e.game.carryable.is(t)))&&s.push({text:"Take",value:`/commands/list_take/${n.context}`}),e.game.player.is(n.context)&&e.game.children.get(o).length&&s.push({text:"Drop",value:"/commands/list_drop/"}),e.game.room.is(n.context)&&(s.push({text:"Say",value:"/commands/say"}),s.push({text:"Whisper",value:"/commands/whisper"})),s.length&&(e.game.room.is(n.context)||s.push(i.Fo),r.redirectMenu("Commands",s))})),t.command("/commands/list_look/:target",(({req:t,res:r,options:n,player:o})=>{const s=e.game.children.get(n.target);r.redirectMenu("Look",[...e.game.binEntities(s,[e.game.prop,e.game.item,e.game.chest,e.game.backpack]).map((t=>({text:e.game.name.get(t),value:`/commands/look/${t}`}))),i.Fo])})),t.command("/commands/look/room",(({req:e,res:t,options:r,player:n})=>{t.sequence("/describe/room","/commands")})),t.command("/commands/look/:target",(({req:e,res:t,options:r,player:n})=>{t.sequence(`/describe/${r.target}`,`/list_commands/${r.target}`)})),t.command("/commands/list_move",(({req:t,res:r,options:n,player:o})=>{const s=e.game.doors(e.game.parent.get(o));console.log(s),r.redirectMenu("Move",[...s.map((t=>({text:e.game.name.get(e.game.reference.get(t)),value:`/commands/move/${e.game.direction.get(t)}`}))),i.Fo])})),t.command("/commands/move/:direction",(({res:t,req:r,options:n,player:i})=>{e.game.movePlayerDirection(i,n.direction),o(t,`move ${n.direction}`,e.game.roomOf(i),i)})),t.command("/commands/list_take/:context",(({req:t,res:r,options:n,player:o})=>{const s=e.game.children.get(n.context);r.redirectMenu("Take",[...e.game.binEntities(s,[e.game.carryable,e.game.item,e.game.backpack]).map((t=>({text:e.game.name.get(t),value:`/commands/take/${t}`}))),i.Fo])})),t.command("/commands/take/:target",(({req:t,res:r,options:n,player:i})=>{e.game.sameRoom(n.target,i)&&e.game.placeable.is(e.game.parent.get(n.target))?e.game.command(e.game.take,n.target,i):r.textContent("You cannot take that.")})),t.command("/commands/list_drop/",(({req:t,res:r,options:n,player:o})=>{const s=e.game.children.get(o);r.redirectMenu("Drop",[...e.game.binEntities(s,[e.game.carryable,e.game.item,e.game.backpack]).map((t=>({text:e.game.name.get(t),value:`/commands/drop/${t}`}))),i.Fo])})),t.command("/commands/drop/:target",(({req:t,res:r,options:n,player:i})=>{e.game.isHolding(n.target,i)?e.game.command(e.game.drop,n.target,i):r.textContent("You cannot drop that which you do not have.")})),t.public.form("/commands/say/","/commands/say",{message:{title:"Message:",label:" > ",placeholder:"..."}}),t.submit("/commands/say",(({req:t,res:r,options:n,player:i,data:o})=>{e.game.say(e.game.parent.get(i),i,o.message)})),t.command("/commands/whisper",(({req:t,res:r,options:n,player:o,data:s})=>{r.formContent("/commands/whisper",{target:{title:"Whisper",items:[...e.game.filter(e.game.player).filter((e=>e!==o)).map((t=>({text:e.game.name.get(t),value:t}))),i.Fo]},message:{title:"Message:",label:" > ",placeholder:"..."}})})),t.submit("/commands/whisper",(({req:t,res:r,options:n,player:i,data:o})=>{e.game.whisper(o.target,i,o.message)})),e.attach((n=>{n.send.on(((r,n)=>{try{const i=e.game.token.get(r);if(t.isConnected(i)){const e=new $.yp("POST",{path:"/write"});e.textContent(n),t.request(i,e)}}catch(e){console.error(e)}})),n.sessionStart.on((e=>{n.foreachPlayer((t=>{e!==t&&n.send(t,(0,i.Qo)(r(e,t)," joined the game"))}))})),n.sessionEnd.on((e=>{n.foreachPlayer((t=>{e!==t&&n.send(t,(0,i.Qo)(r(e)," left the game"))}))})),n.playerMove.on(((e,t,o)=>{n.foreachPlayerIn(t,(t=>{e!==t&&n.send(t,(0,i.Qo)(r(e,t)," left the room"))})),n.foreachPlayerIn(o,(t=>{e!==t&&n.send(t,(0,i.Qo)(r(e,t)," entered the room"))}))})),n.playerTeleport.on(((e,t,o)=>{n.send(e,(0,i.Qo)(r(e,e),` teleported to ${n.about(o)}`)),n.foreachPlayerIn(t,(t=>{e!==t&&n.send(t,(0,i.Qo)(r(e,t)," vanished"))})),n.foreachPlayerIn(o,(t=>{e!==t&&n.send(t,(0,i.Qo)(r(e,t)," appeared"))}))})),n.objectDropped.on(((e,t,o)=>{n.foreachPlayerIn(o,(o=>{n.send(o,(0,i.Qo)(r(t,o)," dropped ",r(e,o)))}))})),n.objectTaken.on(((e,t,o)=>{n.foreachPlayerIn(t,(t=>{n.send(t,(0,i.Qo)(r(o,t)," took ",r(e,t)))}))})),n.objectTakenFrom.on(((e,t,o)=>{n.foreachPlayerIn(n.parent.get(t),(s=>{n.send(s,(0,i.Qo)(r(o,s)," took ",r(e,s)," from ",r(t,s)))}))})),n.objectPut.on(((e,t,o)=>{n.foreachPlayerIn(n.parent.get(t),(s=>{n.send(s,(0,i.Qo)(r(t,s)," put ",r(e,s)," into ",r(o,s)))}))})),n.objectGiven.on(((e,t,o)=>{for(const s in[t,o])n.send(s,(0,i.Qo)(r(t,s)," gave ",r(e,s)," to ",r(o,s)))})),n.objectTeleported.on(((e,t,o)=>{n.foreachPlayerIn(t,(t=>{n.send(t,(0,i.Qo)(r(e,t)," vanished"))})),n.foreachPlayerIn(o,(t=>{n.send(t,(0,i.Qo)(r(e,t)," appeared"))}))})),n.whisper.on(((e,t,o)=>{n.send(e,(0,i.Qo)((0,i.oB)("[",i.s.subtle),r(t,e)," tells ",r(e,e),(0,i.oB)("]: ",i.s.subtle),o)),n.send(t,(0,i.Qo)((0,i.oB)("[",i.s.subtle),r(t,t)," tell ",r(e,t),(0,i.oB)("]: ",i.s.subtle),o))})),n.say.on(((e,t,o)=>{n.foreachPlayerIn(e,(e=>{n.send(e,(0,i.Qo)((0,i.oB)("[",i.s.subtle),r(t,e),(0,i.oB)("]: ",i.s.subtle),o))}))}))}))}}class Q extends Error{}class X{constructor(){this.triggers=new Map}touch(e){this.triggers.has(e)||this.triggers.set(e,new o.i(((...e)=>{})))}on(e,t){this.touch(e),this.triggers.get(e).on(t)}emit(e,t){this.triggers.has(e)&&setTimeout((()=>{this.triggers.get(e).emit(...t)}))}}class ee{get game(){return this.server.game}constructor(e){this.events={player:{enter:new X,exit:new X},npc:{greet:new X}},this.player={enter:(e,t)=>this.events.player.enter.on(e._id,t),exit:(e,t)=>this.events.player.exit.on(e._id,t)},this.npc={greet:(e,t)=>this.events.npc.greet.on(e._id,t)},this.server=e;const t=this.game.state.bind(R.Component.array(a.t.string,"npc-greeter-playerlist"));e.attach((e=>{e.eventEntityMove.on(((e,r,n)=>{var i;if(this.game.player.is(e)){const o=this.game.player.cast(e);r&&this.events.player.exit.emit(r,[o]),n&&this.events.player.enter.emit(n,[o]);for(const r of this.game.neighbors(e))if(this.game.npc.is(r)){const n=null!==(i=t.get(r))&&void 0!==i?i:[];if(n.includes(e))return;n.push(e),t.set(r,n),this.events.npc.greet.emit(r,[o])}}}))}))}}class te{constructor(e){this.util={wait:e=>new Promise((t=>setTimeout(t,1e3*e))),playerMovesInTheNextNSeconds:(e,t)=>new Promise((r=>{let n=!1;const i=t=>{t===e._id&&(n=!0)};this.game.playerMove.on(i),setTimeout((()=>{this.game.playerMove.off(i),r(n)}),1e3*t)})),sequence:(e,t)=>{return r=this,n=void 0,o=function*(){for(const[r,n,i]of t){if(i){if(yield this.util.playerMovesInTheNextNSeconds(e,r))return}else yield this.util.wait(r);yield n()}},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,n||[])).next())}));var r,n,i,o}},this.server=e,this.on=new ee(e)}get game(){return this.server.game}cast(e,t){try{return e.cast(t._id)}catch(e){throw e instanceof x?new Q(e.message):e}}find(e){const t=this.game.find(e);if(!t)throw new Q(`Could not find an entity by the name of ${e}`);return{_id:t}}get(e,t){const r=this.game.find(t);if(!r)throw new Q(`Could not find an entity by the name of ${t}`);return this.cast(e,{_id:r})}npc(e){const t=this.cast(this.game.npc,this.find(e));return t.say=e=>{this.game.say(this.game.roomOf(t._id),t._id,e)},t.whisper=(e,r)=>{this.game.whisper(e._id,t._id,r)},t}room(e){return this.get(this.game.room,e)}object(e){return this.get(this.game.object,e)}prop(e){return this.get(this.game.prop,e)}item(e){return this.get(this.game.item,e)}chest(e){return this.get(this.game.chest,e)}backpack(e){return this.get(this.game.backpack,e)}move(e,t){this.game.move(e._id,t._id)}tell(e,t){if(this.game.player.is(e._id))this.game.send(e._id,(0,i.oB)(t,i.s.italic));else if(this.game.room.is(e._id))for(const r of e.children)this.game.send(r,(0,i.oB)(t,i.s.italic))}roomOf(e){return this.cast(this.game.room,{_id:this.game.roomOf(e._id)})}equal(e,t){return e._id===t._id}sameRoom(e,t){return this.game.sameRoom(e._id,t._id)}}var re=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class ne{constructor(e){this.options=ne.defaultOptions(),this.events=new s,this.api=new q,this.id=(0,v.V)(),this.error=this.events.error,this.warn=this.events.warn,this.info=this.events.info,this.log=this.events.log,this.debug=this.events.debug,this.divider=()=>this.log((0,i.oB)("%==",[])),this.loaded=this.events.channel("loaded",(()=>{})),e&&(this.options=(0,n.Z)(this.options,e)),this.setupConsole(),this.module(this.api),this.module(new Y),this.api.start(),this.load(this.options.load)}setupConsole(){this.options.consoleElement&&(this.console=new i.Bu(this.options.consoleElement),this.error.on(((...e)=>this.console.error(...e))),this.warn.on(((...e)=>this.console.warn(...e))),this.info.on(((...e)=>this.console.info(...e))),this.log.on(((...e)=>this.console.log(...e))),this.debug.on(((...e)=>this.console.debug(...e))),this.module(new G)),this.options.logErrorsToBuiltinConsole&&this.events.logErrorsToBuiltinConsole(),this.options.logToBuiltinConsole&&this.events.logToBuiltinConsole()}url(){return this.api.connections.url("client","server_id")}writeState(e){e.file("gamestate.json",this.game.state.save())}readState(e){return re(this,void 0,void 0,(function*(){const t=e.file("gamestate.json");null!==t&&this.game.state.load(yield t.async("string"))}))}writeSession(e){e.file("session.json",JSON.stringify(this.id))}readSession(e){return re(this,void 0,void 0,(function*(){const t=e.file("session.json");if(null===t)return;const r=JSON.parse(yield t.async("string"));a.t.string.is(r)&&(this.id=r)}))}download(e,t){e.generateAsync({type:"blob"}).then((function(e){(0,J.saveAs)(e,t)}))}saveState(){const e=new(K());this.writeSession(e),this.writeState(e),this.download(e,"game-save.minimud")}exportLevel(){const e=new(K());this.writeState(e),this.download(e,"level.minimud")}ajax(e){return new Promise(((t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){var r=new Blob([n.response]);t(r)},n.send()}))}load(e){return re(this,void 0,void 0,(function*(){if(this.resetGamestate(),e){this.console.debug(`loading from ${e}`);try{const t=yield this.ajax(e),r=yield K().loadAsync(t);yield this.readSession(r),yield this.readState(r)}catch(t){console.error(t),this.console.warn(`failed to load ${e}: ${t.message}`)}}this.scriptingContext=new te(this),this.game.command(this.game.theVoid),this.loaded()}))}module(e){e.load(this)}attach(e){this.loaded.on((()=>{e(this.game,this)}))}script(e){this.loaded.on((()=>{try{e(this.scriptingContext)}catch(e){throw e instanceof Q&&this.error(e),e}}))}resetGamestate(){this.divider(),this.game=new j(this.options),this.game.error.on(((...e)=>this.error(...e))),this.game.warn.on(((...e)=>this.warn(...e))),this.game.info.on(((...e)=>this.info(...e))),this.game.log.on(((...e)=>this.log(...e))),this.game.debug.on(((...e)=>this.debug(...e)))}}ne.defaultOptions=()=>Object.assign(j.defaultOptions(),{logErrorsToBuiltinConsole:!0,logToBuiltinConsole:!1,consoleElement:void 0,motd:"Welcome!",logConnections:!1});const ie=new ne({consoleElement:document.getElementById("console"),load:r(3536).Z,motd:"Welcome!"});ie.script((e=>{const t=e.npc("Butler"),r=e.room("Hallway");e.on.npc.greet(t,(r=>{e.util.sequence(r,[[1,()=>t.say(`Welcome ${r.name}!`),!0],[2,()=>t.whisper(r,'Move upstairs to "Hallway" when you\'re ready to start exploring.'),!0],[2,()=>t.whisper(r,'Press "M" to open the move menu, and "H" to select hallway.'),!0]])}));let n=0;e.on.player.enter(r,(t=>{return i=void 0,o=void 0,a=function*(){(yield e.util.playerMovesInTheNextNSeconds(t,8*Math.random()))||Date.now()-n<1e4||(n=Date.now(),e.tell(r,`The floorboards creak as ${t.name} steps on them.`))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function n(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}c((a=a.apply(i,o||[])).next())}));var i,o,s,a}))})),Object.assign(window,{server:ie})},9788:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>u,Qo:()=>h,_t:()=>p,et:()=>o,fL:()=>a,jb:()=>l,oB:()=>d,qE:()=>c});var n=r(5725);const i=new(r(6230).S6)("ElementDescriptor");var o;function s(e){return n.t.string.is(e)?{text:e}:o.elementDescriptor.is(e)?e:s(String(e))}function a(e){return{text:e}}!function(e){e.style=n.t.object({styles:n.t.array(n.t.string)}),e.textElement=n.t.object({text:n.t.string,styles:n.t.optional(n.t.array(n.t.string))}),e.textElementDivider=n.t.object({text:n.t.literal("%=="),styles:n.t.optional(n.t.array(n.t.string))}),e.inline=n.t.object({display:n.t.literal("inline"),children:n.t.array(i),styles:n.t.optional(n.t.array(n.t.string))}),e.block=n.t.object({display:n.t.literal("block"),children:n.t.array(i),styles:n.t.optional(n.t.array(n.t.string))}),e.elementDescriptor=n.t.or(e.textElement,e.inline,e.block),i.morph(e.elementDescriptor)}(o||(o={}));const c=()=>a("%==");function u(...e){return{display:"block",children:e.map(s)}}function l(...e){return u(...e.map((e=>u(e))))}function h(...e){return{display:"inline",children:e.map(s)}}function f(e){if(o.textElement.is(e))return e.text;if(o.inline.is(e))return e.children.map(f).join("");if(o.block.is(e))return e.children.map(f).join("")+"\n";throw new Error("never")}function d(e,t=[]){return function(e,t){return o.style.is(e)?Object.assign(Object.assign({},e),{styles:[...e.styles,...t]}):Object.assign(Object.assign({},e),{styles:[...t]})}(s(e),t)}function p(e){return f(s(e))}},6270:(e,t,r)=>{"use strict";r.d(t,{Fo:()=>p,Bu:()=>f,Zq:()=>l,r0:()=>d,Qo:()=>s.Qo,s:()=>h,_t:()=>s._t,oB:()=>s.oB,fL:()=>s.fL});var n=r(8218);class i{constructor(){this.queue=[],this.current=void 0}push(e){const t=new n.B;return this.queue.push((()=>(e().then((e=>t.resolve(e))).catch((e=>t.reject(e))),t.promise))),this.current||(this.current=this.start()),t.promise}start(){return e=this,t=void 0,n=function*(){for(;this.queue.length;){const e=this.queue.shift();yield e().catch((()=>{}))}this.current=void 0},new((r=void 0)||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}wait(){return this.current||Promise.resolve()}}function o(e,t){const r=document.createElement(e);if(t.text&&r.appendChild(document.createTextNode(t.text)),t.classList&&r.classList.add(...t.classList),t.id&&(r.id=t.id),t.children)for(const e of t.children)r.appendChild(e);if(t.attributes)for(const[e,n]of Object.entries(t.attributes))r.setAttribute(e,n);return r}var s=r(9788);function a(e){var t,r,n,i;if(s.et.textElementDivider.is(e))return o("hr",{classList:null!==(t=e.styles)&&void 0!==t?t:[]});if(s.et.textElement.is(e))return o("span",{text:e.text,classList:null!==(r=e.styles)&&void 0!==r?r:[]});if(s.et.inline.is(e))return o("span",{children:e.children.map(a),classList:null!==(n=e.styles)&&void 0!==n?n:[]});if(s.et.block.is(e))return o("div",{children:e.children.map(a),classList:null!==(i=e.styles)&&void 0!==i?i:[]});throw new Error(`unexpected ${JSON.stringify(e)}`)}function c(e,t){void 0===t?(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height")):(e.style.setProperty("height",t),e.style.setProperty("min-height",t),e.style.setProperty("max-height",t))}class u{constructor(e){this.keybinds=new Map,this.keys=Array.from("1234567890qwertyuiopasdfghjklzxcvbnm"),this.items=[],this.buttons={},this.title=e.title;for(const t of e.items)this.push(t)}push(e){const t=Object.assign({},e);this.assignMenuKey(t),this.items.push(t)}searchForKeybind(e){const t=["the","a","an"],r=e.toLowerCase().split(" ").map((e=>e.trim())).filter((e=>e&&e.length&&!t.includes(e))).join("");for(const e of r)if(!this.keybinds.has(e))return e;for(;;){const e=this.keys.shift();if(!e)break;if(!this.keybinds.has(e))return e}}assignMenuKey(e){let t=e.keybind,r=e.keyicon||t;t&&!this.keybinds.has(t)||(t=this.searchForKeybind(e.text),r=t),e.keybind=t,e.keyicon=r,this.keybinds.set(t,e.value)}renderMenuElement(e,t){const r=o("button",{text:e.keyicon.toUpperCase(),classList:["btn","btn-secondary","btn-sm","keyicon","me-2"]});this.buttons[e.keybind]=r;const n=o("div",{classList:["text-nowrap","m-2","menu-item"],children:[r,o("span",{text:e.text})]});return n.onclick=()=>t(e.value),n}display(e){const t=new n.B,r=new n.B;function i(e){r.resolve(e),t.resolve(void 0)}const s=o("div",{children:[o("h5",{text:this.title}),o("div",{classList:["d-flex","flex-row","justify-content-start","align-items-start","flex-wrap"],children:this.items.map((e=>this.renderMenuElement(e,i)))})]}),a=e=>{if(this.keybinds.has(e.key)){try{this.buttons[e.key].classList.add("btn-click")}catch(e){console.error(e)}setTimeout((()=>i(this.keybinds.get(e.key))),100)}};return e.presentInput(s,t.promise,(()=>{window.addEventListener("keydown",a)}),(()=>{window.removeEventListener("keydown",a)})),r.promise}}class l{constructor(e){this.placeholder="",this.cancelable=!0,this.cancelButtonText="Back",this.cancelButtonKeybind="Escape",this.autofocus=!0,this.password=!1,Object.assign(this,e)}createInputElement(e){const t=o("input",{classList:["form-control"],attributes:{placeholder:this.placeholder,type:this.password?"password":"text",autofocus:this.autofocus?"true":void 0}});return t.onkeydown=r=>{"Enter"===r.key&&e(t.value)},t}createLabelElement(){return o("span",{text:this.label,classList:["input-group-text"]})}createButtonElement(){return o("button",{text:this.cancelButtonText,classList:["btn","btn-secondary"]})}createTitleElement(){return o("h5",{text:this.title})}display(e){const t=new n.B,r=new n.B;function i(e){r.resolve(e),t.resolve(void 0)}const s=this.createTitleElement(),a=this.createInputElement(i),c=this.createLabelElement(),u=this.cancelable?this.createButtonElement():void 0,l=o("div",{children:[s,o("div",{classList:["input-group"],children:[c,a,u].filter((e=>!!e))})]}),h=e=>{this.cancelable&&e.key===this.cancelButtonKeybind&&i(null)};return e.presentInput(l,t.promise,(()=>{this.autofocus&&setTimeout((()=>a.focus()),100),this.cancelable&&window.addEventListener("keydown",h)}),(()=>{this.cancelable&&window.removeEventListener("keydown",h)})),r.promise}}var h;class f{constructor(e){this.inputLock=new i;const t=o("div",{classList:["container-xl"]}),r=o("pre",{classList:["console-output","m-0","p-0"],children:[t]}),n=o("div",{classList:["container-xl"]}),s=o("div",{classList:["console-input","p-4"],children:[n]});e.appendChild(r),e.appendChild(s),this.container=e,this.outputContainer=r,this.inputContainer=s,this.output=t,this.input=n,this.hideInput()}menu(e,...t){const r=new u({title:e,items:[]});for(const e of t)"string"==typeof e?r.push({text:e,value:e}):r.push(e);return r.display(this)}simpleMenu(e,t){return this.menu(e,...Object.entries(t).map((([e,t])=>({text:e,value:t}))))}ask(e,t,r){return new l({title:e,label:t,placeholder:r}).display(this)}setInputSize(e){this.inputContainer.style.removeProperty("display"),void 0===e?(c(this.inputContainer,void 0),c(this.outputContainer,"100%")):(c(this.inputContainer,`${e}px`),c(this.outputContainer,`calc(100% - ${e}px)`))}resizeInput(){const e=this.isScrolledToBottom();this.setInputSize(),this.setInputSize(Math.max(this.inputContainer.getBoundingClientRect().height,128)),e&&this.scrollToBottom()}hideInput(){this.input.replaceChildren(),this.inputContainer.style.setProperty("display","none"),c(this.inputContainer,"0"),c(this.outputContainer,"100%")}disableInput(){this.input.style.setProperty("opacity","50%"),this.input.setAttribute("disabled","true")}enableInput(){this.input.style.removeProperty("opacity"),this.input.removeAttribute("disabled")}presentInput(e,t,r,n){this.inputLock.push((()=>{return i=this,o=void 0,a=function*(){this.input.replaceChildren(e),this.enableInput(),this.resizeInput(),r(),yield t,n(),this.disableInput()},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function n(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}c((a=a.apply(i,o||[])).next())}));var i,o,s,a}))}injectSpaces(e){return e.map((e=>[e,document.createTextNode(" ")])).flat().slice(0,-1)}write(...e){const t=this.isScrolledToBottom(),r=this.injectSpaces(e.map((e=>a((0,s.oB)(e)))));(this.lastOutput instanceof HTMLHRElement||void 0===this.lastOutput)&&r[0]instanceof HTMLHRElement&&r.shift(),0!==r.length&&(this.lastOutput=r[r.length-1],this.output.appendChild(o("div",{children:r,classList:["w-100"]})),t&&this.scrollToBottom(),setTimeout((()=>{t&&this.scrollToBottom()})))}clear(){this.output.replaceChildren()}isScrolledToBottom(){const e=this.outputContainer;return e.scrollHeight-e.clientHeight<=e.scrollTop+1}scrollToBottom(){const e=this.outputContainer;e.scrollTop=e.scrollHeight}header(e,t){return(0,s.Qo)((0,s.oB)("["),(0,s.oB)(e,t),(0,s.oB)("]:"))}error(...e){this.write(this.header("error",["text-danger"]),...e)}warn(...e){this.write(this.header("warning",["text-warning"]),...e)}info(...e){this.write(this.header("info",["text-info"]),...e)}log(...e){this.write(...e)}debug(...e){this.write(this.header("debug",["text-subtle"]),...e)}}!function(e){e.bold=["bold"],e.italic=["italic"],e.text=["text"],e.embed=["embed"],e.invisable=["invisable"],e.spacer=[...e.invisable,"my-2"],e.lead=["lead","bold"],e.title=["fs-2",...e.lead],e.subtle=["text-subtle"],e.proper_noun=["proper-noun"],e.first_person=[...e.proper_noun,"first-person"],e.player=[...e.proper_noun,"player"],e.room=[...e.proper_noun,"room"],e.backpack=[...e.proper_noun,"backpack"],e.chest=[...e.proper_noun,"chest"],e.item=[...e.proper_noun,"item"],e.prop=[...e.proper_noun,"prop"],e.npc=[...e.proper_noun,"npc"],e.chapter=t=>(0,s.oB)((0,s.Ge)((0,s.oB)((0,s.Qo)((0,s.qE)()),["w-100","px-4"]),(0,s.oB)(t,e.title),(0,s.oB)((0,s.Qo)((0,s.qE)()),["w-100","px-4"])),["d-flex","flex-row","w-100","justify-content-center","align-items-center"])}(h||(h={}));const d=s.et.elementDescriptor,p={text:"Back",value:null,keybind:"Escape",keyicon:"ESC"}},2787:(e,t,r)=>{"use strict";r.d(t,{G1:()=>p,Om:()=>l,SF:()=>v,Su:()=>a,YY:()=>f,bS:()=>g,dZ:()=>u,e7:()=>d,ep:()=>m,td:()=>h,zF:()=>y,zv:()=>_,zw:()=>o});var n=r(6270),i=r(5725);const o=i.t.object({title:i.t.string,label:i.t.string,placeholder:i.t.nullable(i.t.string),token:i.t.nullable(i.t.boolean)}),s=i.t.object({text:i.t.string,value:i.t.nullable(i.t.string),keybind:i.t.nullable(i.t.string),keyicon:i.t.nullable(i.t.string)}),a=i.t.object({title:i.t.string,items:i.t.array(s)}),c=i.t.or(a,o,i.t.string),u=i.t.array(n.r0),l="text",h=a,f="redirect-menu",d=i.t.record(i.t.string,c),p="form",m=i.t.record(i.t.string,i.t.nullable(i.t.string)),v="form-data",g=i.t.array(i.t.string),y="sequence-data",_="content-type"},311:(e,t,r)=>{"use strict";r.d(t,{Up:()=>_,yp:()=>p,wN:()=>c,F0:()=>b});var n=r(5725),i=r(2787),o=r(3622),s=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class a{constructor(e){this.handled=!1,this.errors=[],this.header=e.header,this.content=e.content}get content_type(){return this.header[i.zv]}readContent(e,t,r){return s(this,void 0,void 0,(function*(){if(this.header[i.zv]!==e)return!1;try{return yield r(t.cast(this.content)),this.handled=!0,!0}catch(e){if(e instanceof n.i)return console.warn(e),this.errors.push(e),!1;throw e}}))}textContent(e){return this.readContent(i.Om,i.dZ,e)}redirectMenu(e){return this.readContent(i.YY,i.td,e)}formContent(e){return this.readContent(i.G1,i.e7,e)}formDataContent(e){return this.readContent(i.SF,i.ep,e)}sequence(e){return this.readContent(i.zF,i.bS,(t=>s(this,void 0,void 0,(function*(){for(const r of t)yield e(r)}))))}catch(e){return s(this,void 0,void 0,(function*(){if(!(0,o.lZ)(this.header[i.zv]))return this.handled?void(this.handled=!0):yield e(this.errors)}))}}class c extends a{redirect(){return"REDIRECT"===this.header.status&&this.header.path}get status(){return this.header.status}}class u extends a{get path(){return this.header.path}}var l=r(2205),h=r(6270);class f{constructor(e,t={}){this.content=null,this.header=Object.assign(Object.assign({},t),{method:e})}textContent(...e){this.header[i.zv]=i.Om,this.content=e.map((e=>"string"==typeof e?(0,h.fL)(e):e))}redirectMenu(e,t){this.header[i.zv]=i.YY,this.content={title:e,items:t}}formContent(e,t){this.header["form-submit"]=e,this.header[i.zv]=i.G1,this.content=t}formDataContent(e){this.header[i.zv]=i.SF,this.content=e}build(){return{header:this.header,content:this.content}}}class d extends f{constructor(e){super("RESPONSE"),this.header.for=e.header.id}get status(){return this.header.status}set status(e){this.header.status=e}redirect(e){this.status="REDIRECT",this.header.path=e}sequence(...e){this.header[i.zv]=i.zF,this.content=e}badRequest(e){this.status="BAD_REQUEST",e&&this.textContent(e)}}class p extends f{constructor(e,t){super(e,t),this.header.id=(0,l.V)()}get path(){return this.header.path}set path(e){this.header.path=e}}p.mimic=e=>{var t;const r=new p(e.header.method,e.header);return r.content=null!==(t=e.content)&&void 0!==t?t:r.content,r};var m=r(8218);const v=e=>n.t.object({header:n.t.and(n.t.object({method:e}),n.t.record(n.t.string,n.t.string)),content:n.t.unknown}),g=(v(n.t.literal("GET")),v(n.t.literal("POST")),v(n.t.oneof("GET","POST"))),y=v(n.t.literal("RESPONSE"));v(n.t.oneof("GET","POST","RESPONSE"));class _{constructor(){this.timeout_ms=5e3,this.awaiting=new Map}request(e){const t=new m.B,r=e.header.id||(0,l.V)();return e.header.id=r,this.awaiting.set(r,t),t.timeout(this.timeout_ms),t.promise}write(e){if(y.is(e)){const t=e.header.for;if((0,o.lZ)(t))return;this.awaiting.has(t)&&(this.awaiting.get(t).resolve(e),this.awaiting.delete(t))}}}class b{constructor(){this.root=new k,this.notFound=b.notFound,this.badRequest=b.badRequest,this.serverError=b.serverError}define(e){return this.root.define(b.parse(e))}get(e,t){this.define(e).gets=t}post(e,t){this.define(e).posts=t}route(e,t){const r=e.header.path,n=e.header.method,i={req:new u(e),res:new d(e),connection:t,options:{}},s=this.root.route(b.parse(r),i.options);try{(0,o.lZ)(r)?this.badRequest(i):s&&"GET"===n&&s.gets?(i.res.status="OK",s.gets(i)):s&&"POST"===n&&s.posts?(i.res.status="OK",s.posts(i)):this.notFound(i)}catch(t){console.warn(`Error in response handler for ${e.header.path}`),console.error(t),this.serverError(i)}return i.res.build()}incoming(e,t){if(g.is(e))return this.route(e,t)}debug(){return this.root.debug().join("\n")}static parse(e){return e.split("/").map((e=>e.trim())).filter((e=>""!==e&&void 0!==e))}static format(e){return b.parse(e).join("/")}}b.notFound=e=>{e.res.status="NOT_FOUND",e.res.textContent("Not Found: "+e.req.path)},b.badRequest=e=>{e.res.status="BAD_REQUEST",e.res.textContent("Bad Request")},b.serverError=e=>{e.res.status="SERVER_ERROR",e.res.textContent("Server Error")};class w{constructor(e){this.firstClass=!1,this.first=[],this.second=[],this.part=e}push(e){e instanceof C?this.first.push(e):this.second.push(e)}*routes(){for(const e of this.first)yield e;for(const e of this.second)yield e}route(e,t){const r=e.shift();if(!r||""===r)return this;for(const n of this.routes()){const i={};if(n.apply(r,i))return Object.assign(t,i),n.route(e,t)}}define(e){const t=e.shift();if(!t||""===t)return this;for(const r of this.routes())if(r.part===t)return r.define(e);const r=w.from(t);return this.push(r),r.define(e)}debug(e){e=void 0===e?this.part:e+"/"+this.part;const t=[];this.gets&&t.push(`GET:  ${e}`),this.posts&&t.push(`POST: ${e}`);for(const r of this.routes())t.push(...r.debug(e));return t}static from(e){return":"===e[0]?new S(e):new C(e)}}class k extends w{constructor(){super("<root>")}}class C extends w{constructor(e){super(e),this.apply=t=>t===e,this.firstClass=!0}}class S extends w{constructor(e){super(e);const t=e.slice(1);this.apply=(e,r)=>(r[t]=e,!0),this.firstClass=!1}}},9917:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e?void 0===e?"undefined":null===e?"null":Array.isArray(e)?"["+e.map(n).join(", ")+"]":["{",Object.entries(e).map((([e,t])=>`"${e}": ${n(t)}`)).join(", "),"}"].join(""):typeof e}r.d(t,{b:()=>i,iN:()=>s});class i{constructor(){this.expected=new Map,this.got=new Map}writer(e,t){return this.got.set(e,t),new o(this,e)}write(e,t){var r;const n=null!==(r=this.expected.get(e))&&void 0!==r?r:[];n.push(...t),this.expected.set(e,n)}error(){return Array.from(this.expected).map((([e,t])=>{const r=n(this.got.get(e));return`${e}: expected: [${t.join(", ")}] got ${r}`})).join("\n")}}class o{constructor(e,t){this.tracker=e,this.localization=t}expected(...e){this.tracker.write(this.localization,e)}enter(e,t){return this.tracker.writer(this.localization+"."+e,t)}}class s extends Error{}},5725:(e,t,r)=>{"use strict";r.d(t,{i:()=>h.iN,t:()=>l});var n,i=r(6486),o=r(6230),s=r(3104);function a(e){return new o.KH(e,(t=>typeof t===e))}!function(e){function t(e){return new o.KH(JSON.stringify(e),(t=>t===e))}function r(...e){return new o.KH(e.map((e=>e.name)).join("|"),(t=>e.some((e=>e.is(t)))))}function n(...e){return new o.KH(e.map((e=>e.name)).join("&"),(t=>e.every((e=>e.is(t)))))}function c(e,t){return new o.KH(`Tuple<${e.name}, ${t}>`,(r=>Array.isArray(r)&&r.length===t&&r.every((t=>e.is(t)))))}e.unknown=new o.KH("unknown",(e=>!0)),e.string=a("string"),e.number=a("number"),e.boolean=a("boolean"),e.literal=t,e.union=r,e.or=r,e.oneof=function(...e){return this.or(...e.map((e=>t(e))))},e.merge=n,e.and=n,e.array=function(e){return new o.KH(`Array<${e.name}>`,(t=>Array.isArray(t)&&t.every((t=>e.is(t)))))},e.tuple=function(...e){return new o.KH(`[${e.map((e=>e.name)).join(", ")}]`,(t=>!!Array.isArray(t)&&t.length===e.length&&i.zip(e,t).every((([e,t])=>e.is(t)))))},e.record=function(e,t){return new o.KH(`Record<${e.name}, ${t.name}>`,(r=>"object"==typeof r&&null!==r&&Object.entries(r).every((([r,n])=>e.is(r)&&t.is(n)))))},e.object=function(e){const t=(0,s.RK)(e).map((([e,t])=>function(e,t){return new o.KH(`"${String(e)}": ${t.name}`,(r=>t.is(r[e])))}(e,t)));return new o.P8("{"+t.map((e=>e.name)).join(", ")+"}",((t,r)=>{if("object"!=typeof t)return r.expected("object"),!1;if(null===t)return r.expected("object"),!1;for(const[n,i]of Object.entries(e)){const e=t[n];if(!i.validate(e,r.enter(n,e)))return!1}return!0}))},e.vector=c,e.matrix=function(e,...t){return t.reduce(((e,t)=>c(e,t)),e)},e.pairings=function(e,t){return l.array(l.tuple(e,t))}}(n||(n={}));const c=a("undefined"),u=n.literal(null),l=Object.assign(Object.assign({},n),{undefined:c,null:u,nullish:n.or(c,u),nullable:e=>l.or(e,u,c),optional:e=>l.or(e,c)});var h=r(9917)},6230:(e,t,r)=>{"use strict";r.d(t,{KH:()=>o,P8:()=>s,S6:()=>a});var n=r(9917);class i{constructor(e,t,r){this.name=e,this.is=t,this.validate=r}cast(e){const t=new n.b;if(this.validate(e,t.writer("",e)))return e;throw new n.iN(t.error())}assert(e){const t=new n.b;if(!this.validate(e,t.writer("",e)))throw new n.iN(t.error())}}class o extends i{constructor(e,t){super(e,t,((e,t)=>!!this.is(e)||(this.complain(t),!1)))}complain(e){e.expected(this.name)}}class s extends i{constructor(e,t){super(e,(e=>{const t=new n.b;return this.validate(e,t.writer("",e))}),t)}}class a extends i{constructor(e){super(e,void 0,void 0)}morph(e){this.is=e.is,this.validate=e.validate}}},9282:(e,t,r)=>{"use strict";r.d(t,{V:()=>Et});var n={};r.r(n),r.d(n,{fixNegotiationNeeded:()=>B,shimAddTrackRemoveTrack:()=>O,shimAddTrackRemoveTrackWithNative:()=>P,shimGetDisplayMedia:()=>C,shimGetSendersWithDtmf:()=>E,shimGetStats:()=>T,shimGetUserMedia:()=>k,shimMediaStream:()=>S,shimOnTrack:()=>x,shimPeerConnection:()=>A,shimSenderReceiverGetStats:()=>R});var i={};r.r(i),r.d(i,{shimGetDisplayMedia:()=>z,shimGetUserMedia:()=>D,shimPeerConnection:()=>M,shimReplaceTrack:()=>L});var o={};r.r(o),r.d(o,{shimAddTransceiver:()=>q,shimCreateAnswer:()=>J,shimCreateOffer:()=>K,shimGetDisplayMedia:()=>N,shimGetParameters:()=>V,shimGetUserMedia:()=>F,shimOnTrack:()=>U,shimPeerConnection:()=>H,shimRTCDataChannel:()=>$,shimReceiverGetStats:()=>G,shimRemoveStream:()=>Z,shimSenderGetStats:()=>W});var s={};r.r(s),r.d(s,{shimAudioContext:()=>oe,shimCallbacksAPI:()=>X,shimConstraints:()=>te,shimCreateOfferLegacy:()=>ie,shimGetUserMedia:()=>ee,shimLocalStreamsAPI:()=>Y,shimRTCIceServerUrls:()=>re,shimRemoteStreamsAPI:()=>Q,shimTrackEventTransceiver:()=>ne});var a={};r.r(a),r.d(a,{removeExtmapAllowMixed:()=>fe,shimAddIceCandidateNullOrEmpty:()=>de,shimConnectionState:()=>he,shimMaxMessageSize:()=>ue,shimRTCIceCandidate:()=>ce,shimSendThrowTypeError:()=>le});var c=r(6);let u=!0,l=!0;function h(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function f(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,o),i.apply(this,[e,o])};const o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(r))return o.apply(this,arguments);const n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(l=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function m(){if("object"==typeof window){if(u)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function v(e,t){l&&console.warn(e+" is deprecated, please use "+t+" instead.")}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return g(e)?Object.keys(e).reduce((function(t,r){const n=g(e[r]),i=n?y(e[r]):e[r],o=n&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[r]:i})}),{}):e}function _(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((n=>{n.endsWith("Id")?_(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((t=>{_(e,e.get(t),r)}))})))}function b(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((r=>{r.type===n&&r.trackId===t.id&&_(e,r,i)}))})),i}const w=m;function k(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[i("min",r)]=n.ideal,t.optional.push(e),e={},e[i("max",r)]=n.ideal,t.optional.push(e)):(e[i("",r)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach((e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let s=(r=r.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&r.length&&t.includes("back")&&(s=r[r.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=n(e.video),w("chrome: "+JSON.stringify(e)),i(e)}))}e.video=n(e.video)}return w("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){i(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{n&&n(o(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function C(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const n=r.video&&r.video.width,i=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function S(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function x(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const i=new Event("track");i.track=r.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else f(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function E(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function T(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const n=function(e){r(o(i(e)))};return t.apply(this,[n,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(o(i(t)))},r])})).then(r,n)}}function R(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>b(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),f(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>b(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,n;return this.getSenders().forEach((r=>{r.track===e&&(t?n=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?n=!0:r=t),t.track===e))),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function P(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();r.apply(this,arguments);const n=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function O(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return P(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=o(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=n[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function A(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function B(e,t){f(e,"negotiationneeded",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var I=r(2539),j=r.n(I);function D(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function z(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function M(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=j()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&v("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))}(e.iceServers,t.version),m("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function L(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function F(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){v("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function N(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function U(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return n.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(i,o)}}function W(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function G(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),f(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Z(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){v("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function $(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function q(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const n=t.apply(this,arguments);if(r){const{sender:t}=n,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return n})}function V(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function K(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function J(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Y(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function X(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,r){const n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=a,a=function(e,t,r){const n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=a,a=function(e,t,r){const n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=a}function ee(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(te(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function te(e){return e&&void 0!==e.video?Object.assign({},e,{video:y(e.video)}):e}function re(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(v("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ie(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function oe(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var se=r(7539),ae=r.n(se);function ce(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),n=ae().parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,f(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function ue(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=ae().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=ae().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),r=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r}(e),n=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const i=ae().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n}(arguments[0],e);let i;i=0===r&&0===n?Number.POSITIVE_INFINITY:0===r||0===n?Math.max(r,n):Math.min(r,n);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return r.apply(this,arguments)}}function le(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},f(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function he(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function fe(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const r=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function de(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const pe=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=m,c=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=h(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=h(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=h(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=h(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),u={browserDetails:c,commonShim:a,extractVersion:h,disableLog:d,disableWarnings:p};switch(c.browser){case"chrome":if(!n||!A||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),u;if(null===c.version)return r("Chrome shim can not determine version, not shimming."),u;r("adapter.js shimming chrome."),u.browserShim=n,de(e,c),k(e,c),S(e),A(e,c),x(e),O(e,c),E(e),T(e),R(e),B(e,c),ce(e),he(e),ue(e,c),le(e),fe(e,c);break;case"firefox":if(!o||!H||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),u;r("adapter.js shimming firefox."),u.browserShim=o,de(e,c),F(e,c),H(e,c),U(e),Z(e),W(e),G(e),$(e),q(e),V(e),K(e),J(e),ce(e),he(e),ue(e,c),le(e);break;case"edge":if(!i||!M||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),u;r("adapter.js shimming edge."),u.browserShim=i,D(e),z(e),M(e,c),L(e),ue(e,c),le(e);break;case"safari":if(!s||!t.shimSafari)return r("Safari shim is not included in this adapter release."),u;r("adapter.js shimming safari."),u.browserShim=s,de(e,c),re(e),ie(e),X(e),Y(e),Q(e),ne(e),ee(e),oe(e),ce(e),ue(e,c),le(e),fe(e,c);break;default:r("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window}),me=pe;function ve(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var ge=me.default||me,ye=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)},e.prototype.getBrowser=function(){return ge.browserDetails.browser},e.prototype.getVersion=function(){return ge.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,t=this.getBrowser(),r=ge.browserDetails.version||0;if("chrome"===t&&r<this.minChromeVersion)return!1;if("firefox"===t&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var n=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),n=!0}catch(e){}finally{e&&e.close()}return n},e.prototype.toString=function(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())},e}()),_e={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},be=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=_e,this.browser=ye.getBrowser(),this.browserVersion=ye.getVersion(),this.supports=function(){var e,t={browser:ye.isBrowserSupported(),webRTC:ye.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(_e),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!ye.isIOS}catch(e){}}catch(e){}finally{r&&r.close()}}catch(e){}finally{e&&e.close()}return t}(),this.pack=c.pack,this.unpack=c.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,n=Math.ceil(r/we.chunkedMTU),i=0,o=0;o<r;){var s=Math.min(r,o+we.chunkedMTU),a=e.slice(o,s),c={__peerData:this._dataCount,n:i,data:a,total:n};t.push(c),o=s,i++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}(),we=new be;ve({},"Peer",(()=>gt),(e=>gt=e));var ke,Ce=Object.prototype.hasOwnProperty,Se="~";function xe(){}function Ee(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Te(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new Ee(r,n||e,i),s=Se?Se+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Re(e,t){0==--e._eventsCount?e._events=new xe:delete e._events[t]}function Pe(){this._events=new xe,this._eventsCount=0}Object.create&&(xe.prototype=Object.create(null),(new xe).__proto__||(Se=!1)),Pe.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)Ce.call(e,t)&&r.push(Se?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},Pe.prototype.listeners=function(e){var t=Se?Se+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},Pe.prototype.listenerCount=function(e){var t=Se?Se+e:e,r=this._events[t];return r?r.fn?1:r.length:0},Pe.prototype.emit=function(e,t,r,n,i,o){var s=Se?Se+e:e;if(!this._events[s])return!1;var a,c,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,i),!0;case 6:return u.fn.call(u.context,t,r,n,i,o),!0}for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];u.fn.apply(u.context,a)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),l){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,n);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u[c].fn.apply(u[c].context,a)}}return!0},Pe.prototype.on=function(e,t,r){return Te(this,e,t,r,!1)},Pe.prototype.once=function(e,t,r){return Te(this,e,t,r,!0)},Pe.prototype.removeListener=function(e,t,r,n){var i=Se?Se+e:e;if(!this._events[i])return this;if(!t)return Re(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||Re(this,i);else{for(var s=0,a=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&a.push(o[s]);a.length?this._events[i]=1===a.length?a[0]:a:Re(this,i)}return this},Pe.prototype.removeAllListeners=function(e){var t;return e?(t=Se?Se+e:e,this._events[t]&&Re(this,t)):(this._events=new xe,this._eventsCount=0),this},Pe.prototype.off=Pe.prototype.removeListener,Pe.prototype.addListener=Pe.prototype.on,Pe.prefixed=Se,Pe.EventEmitter=Pe,ke=Pe;var Oe={};ve(Oe,"LogLevel",(()=>Ae),(e=>Ae=e)),ve(Oe,"default",(()=>Ne),(e=>Ne=e));var Ae,Be=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Ie=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(Ae||(Ae={}));var je,De,ze,Me,Le,Fe,Ne=new(function(){function e(){this._logLevel=Ae.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ae.All&&this._print.apply(this,Ie([Ae.All],Be(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ae.Warnings&&this._print.apply(this,Ie([Ae.Warnings],Be(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ae.Errors&&this._print.apply(this,Ie([Ae.Errors],Be(e),!1))},e.prototype.setLogFunction=function(e){this._print=e},e.prototype._print=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Ie(["PeerJS: "],Be(t),!1);for(var i in n)n[i]instanceof Error&&(n[i]="("+n[i].name+") "+n[i].message);e>=Ae.All?console.log.apply(console,Ie([],Be(n),!1)):e>=Ae.Warnings?console.warn.apply(console,Ie(["WARNING"],Be(n),!1)):e>=Ae.Errors&&console.error.apply(console,Ie(["ERROR"],Be(n),!1))},e}()),Ue={};ve(Ue,"Socket",(()=>Ge),(e=>Ge=e)),function(e){e.Data="data",e.Media="media"}(je||(je={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(De||(De={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(ze||(ze={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(Me||(Me={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(Le||(Le={})),Fe=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var He,We=(He=function(e,t){return(He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}He(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ge=function(e){function t(t,r,n,i,o,s){void 0===s&&(s=5e3);var a=e.call(this)||this;a.pingInterval=s,a._disconnected=!0,a._messagesQueue=[];var c=t?"wss://":"ws://";return a._baseUrl=c+r+":"+n+i+"peerjs?key="+o,a}return We(t,e),t.prototype.start=function(e,t){var r=this;this._id=e;var n="".concat(this._baseUrl,"&id=").concat(e,"&token=").concat(t);!this._socket&&this._disconnected&&(this._socket=new WebSocket(n+"&version="+Fe.version),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),Oe.default.log("Server message received:",t)}catch(t){return void Oe.default.log("Invalid server message",e.data)}r.emit(Me.Message,t)},this._socket.onclose=function(e){r._disconnected||(Oe.default.log("Socket closed.",e),r._cleanup(),r._disconnected=!0,r.emit(Me.Disconnected))},this._socket.onopen=function(){r._disconnected||(r._sendQueuedMessages(),Oe.default.log("Socket open"),r._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout((function(){e._sendHeartbeat()}),this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:Le.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else Oe.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var e,t,r=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}(this._messagesQueue),!1);this._messagesQueue=[];try{for(var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),i=n.next();!i.done;i=n.next()){var o=i.value;this.send(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(Me.Error,"Invalid message");else this._messagesQueue.push(e)},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(ke.EventEmitter),Ze={};ve(Ze,"MediaConnection",(()=>rt),(e=>rt=e));var $e={};ve($e,"Negotiator",(()=>Je),(e=>Je=e));var qe=function(){return qe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qe.apply(this,arguments)},Ve=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ke=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Je=function(){function e(e){this.connection=e}return e.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===je.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===je.Data){var r=this.connection,n={ordered:!!e.reliable},i=t.createDataChannel(r.label,n);r.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},e.prototype._startPeerConnection=function(){Oe.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},e.prototype._setupListeners=function(e){var t=this,r=this.connection.peer,n=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;Oe.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(Oe.default.log("Received ICE candidates for ".concat(r,":"),e.candidate),o.socket.send({type:Le.Candidate,payload:{candidate:e.candidate,type:i,connectionId:n},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":Oe.default.log("iceConnectionState is failed, closing connections to "+r),t.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),t.connection.close();break;case"closed":Oe.default.log("iceConnectionState is closed, closing connections to "+r),t.connection.emit("error",new Error("Connection to "+r+" closed.")),t.connection.close();break;case"disconnected":Oe.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=we.noop}t.connection.emit("iceStateChanged",e.iceConnectionState)},Oe.default.log("Listening for data channel"),e.ondatachannel=function(e){Oe.default.log("Received data channel");var t=e.channel;o.getConnection(r,n).initialize(t)},Oe.default.log("Listening for remote stream"),e.ontrack=function(e){Oe.default.log("Received remote stream");var i=e.streams[0],s=o.getConnection(r,n);if(s.type===je.Media){var a=s;t._addStreamToMediaConnection(i,a)}}},e.prototype.cleanup=function(){Oe.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var t="closed"!==e.signalingState,r=!1;if(this.connection.type===je.Data){var n=this.connection.dataChannel;n&&(r=!!n.readyState&&"closed"!==n.readyState)}(t||r)&&e.close()}},e.prototype._makeOffer=function(){return Ve(this,void 0,Promise,(function(){var e,t,r,n,i,o,s;return Ke(this,(function(a){switch(a.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),Oe.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),Oe.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:we.browser},this.connection.type===je.Data&&(i=this.connection,n=qe(qe({},n),{label:i.label,reliable:i.reliable,serialization:i.serialization})),t.socket.send({type:Le.Offer,payload:n,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(o=a.sent())&&(t.emitError(De.WebRTC,o),Oe.default.log("Failed to setLocalDescription, ",o)),[3,6];case 6:return[3,8];case 7:return s=a.sent(),t.emitError(De.WebRTC,s),Oe.default.log("Failed to createOffer, ",s),[3,8];case 8:return[2]}}))}))},e.prototype._makeAnswer=function(){return Ve(this,void 0,Promise,(function(){var e,t,r,n,i;return Ke(this,(function(o){switch(o.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=o.sent(),Oe.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),Oe.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),t.socket.send({type:Le.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:we.browser},dst:this.connection.peer}),[3,6];case 5:return n=o.sent(),t.emitError(De.WebRTC,n),Oe.default.log("Failed to setLocalDescription, ",n),[3,6];case 6:return[3,8];case 7:return i=o.sent(),t.emitError(De.WebRTC,i),Oe.default.log("Failed to create answer, ",i),[3,8];case 8:return[2]}}))}))},e.prototype.handleSDP=function(e,t){return Ve(this,void 0,Promise,(function(){var r,n,i,o;return Ke(this,(function(s){switch(s.label){case 0:t=new RTCSessionDescription(t),r=this.connection.peerConnection,n=this.connection.provider,Oe.default.log("Setting remote description",t),i=this,s.label=1;case 1:return s.trys.push([1,5,,6]),[4,r.setRemoteDescription(t)];case 2:return s.sent(),Oe.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),"OFFER"!==e?[3,4]:[4,i._makeAnswer()];case 3:s.sent(),s.label=4;case 4:return[3,6];case 5:return o=s.sent(),n.emitError(De.WebRTC,o),Oe.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}}))}))},e.prototype.handleCandidate=function(e){return Ve(this,void 0,Promise,(function(){var t,r,n,i,o,s;return Ke(this,(function(a){switch(a.label){case 0:Oe.default.log("handleCandidate:",e),t=e.candidate,r=e.sdpMLineIndex,n=e.sdpMid,i=this.connection.peerConnection,o=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.addIceCandidate(new RTCIceCandidate({sdpMid:n,sdpMLineIndex:r,candidate:t}))];case 2:return a.sent(),Oe.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return s=a.sent(),o.emitError(De.WebRTC,s),Oe.default.log("Failed to handleCandidate, ",s),[3,4];case 4:return[2]}}))}))},e.prototype._addTracksToConnection=function(e,t){if(Oe.default.log("add tracks from stream ".concat(e.id," to peer connection")),!t.addTrack)return Oe.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((function(r){t.addTrack(r,e)}))},e.prototype._addStreamToMediaConnection=function(e,t){Oe.default.log("add stream ".concat(e.id," to media connection ").concat(t.connectionId)),t.addStream(e)},e}(),Ye={};ve(Ye,"BaseConnection",(()=>Xe),(e=>Xe=e));var Qe=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xe=function(e){function t(t,r,n){var i=e.call(this)||this;return i.peer=t,i.provider=r,i.options=n,i._open=!1,i.metadata=n.metadata,i}return Qe(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(ke.EventEmitter),et=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tt=function(){return tt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tt.apply(this,arguments)},rt=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+we.randomToken(),o._negotiator=new $e.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return et(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return je.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(t){Oe.default.log("Receiving stream",t),this._remoteStream=t,e.prototype.emit.call(this,"stream",t)},t.prototype.handleMessage=function(e){var t=e.type,r=e.payload;switch(e.type){case Le.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case Le.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Oe.default.warn("Unrecognized message type:".concat(t," from peer:").concat(this.peer))}},t.prototype.answer=function(e,t){var r,n;if(void 0===t&&(t={}),this._localStream)Oe.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(tt(tt({},this.options._payload),{_stream:e}));var i=this.provider._getMessages(this.connectionId);try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=o.next();!s.done;s=o.next()){var a=s.value;this.handleMessage(a)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Ye.BaseConnection),nt={};ve(nt,"DataConnection",(()=>ct),(e=>ct=e));var it={};ve(it,"EncodingQueue",(()=>st),(e=>st=e));var ot=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),st=function(e){function t(){var t=e.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(e){t._processing=!1,e.target&&t.emit("done",e.target.result),t.doNextTask()},t.fileReader.onerror=function(e){Oe.default.error("EncodingQueue error:",e),t._processing=!1,t.destroy(),t.emit("error",e)},t}return ot(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(ke.EventEmitter),at=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ct=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new it.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+we.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||ze.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",(function(e){o._bufferedSend(e)})),o._encodingQueue.on("error",(function(){Oe.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()})),o._negotiator=new $e.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return at(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return je.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var e=this;we.supports.binaryBlob&&!we.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){Oe.default.log("DC#".concat(e.connectionId," dc connection success")),e._open=!0,e.emit("open")},this.dataChannel.onmessage=function(t){Oe.default.log("DC#".concat(e.connectionId," dc onmessage:"),t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){Oe.default.log("DC#".concat(e.connectionId," dc closed for:"),e.peer),e.close()}},t.prototype._handleDataMessage=function(t){var r=this,n=t.data,i=n.constructor,o=n;if(this.serialization===ze.Binary||this.serialization===ze.BinaryUTF8){if(i===Blob)return void we.blobToArrayBuffer(n,(function(e){var t=we.unpack(e);r.emit("data",t)}));if(i===ArrayBuffer)o=we.unpack(n);else if(i===String){var s=we.binaryStringToArrayBuffer(n);o=we.unpack(s)}}else this.serialization===ze.JSON&&(o=this.parse(n));o.__peerData?this._handleChunk(o):e.prototype.emit.call(this,"data",o)},t.prototype._handleChunk=function(e){var t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=e.data,r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];var n=new Blob(r.data);this._handleDataMessage({data:n})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(t,r){if(this.open)if(this.serialization===ze.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===ze.Binary||this.serialization===ze.BinaryUTF8){var n=we.pack(t);if(!r&&n.size>we.chunkedMTU)return void this._sendChunks(n);we.supports.binaryBlob?this._bufferedSend(n):this._encodingQueue.enque(n)}else this._bufferedSend(t);else e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(e){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout((function(){r._buffering=!1,r._tryBuffer()}),50),!1;try{this.dataChannel.send(e)}catch(e){return Oe.default.error("DC#:".concat(this.connectionId," Error when sending:"),e),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(e){var t,r,n=we.chunk(e);Oe.default.log("DC#".concat(this.connectionId," Try to send ").concat(n.length," chunks..."));try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),o=i.next();!o.done;o=i.next()){var s=o.value;this.send(s,!0)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case Le.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case Le.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:Oe.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Ye.BaseConnection),ut={};ve(ut,"API",(()=>ft),(e=>ft=e));var lt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},ht=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ft=function(){function e(e){this._options=e}return e.prototype._buildRequest=function(e){var t=this._options.secure?"https":"http",r=this._options,n=r.host,i=r.port,o=r.path,s=r.key,a=new URL("".concat(t,"://").concat(n,":").concat(i).concat(o).concat(s,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",Fe.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return lt(this,void 0,Promise,(function(){var e,t,r;return ht(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(200!==(e=n.sent()).status)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw t=n.sent(),Oe.default.error("Error retrieving ID",t),r="","/"===this._options.path&&this._options.host!==we.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}}))}))},e.prototype.listAllPeers=function(){return lt(this,void 0,Promise,(function(){var e,t,r;return ht(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(200!==(e=n.sent()).status){if(401===e.status)throw"",t=this._options.host===we.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t);throw new Error("Error. Status:".concat(e.status))}return[2,e.json()];case 2:throw r=n.sent(),Oe.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}}))}))},e}(),dt=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pt=function(){return pt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pt.apply(this,arguments)},mt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},gt=function(e){function t(r,n){var i,o=e.call(this)||this;return o._id=null,o._lastServerId=null,o._destroyed=!1,o._disconnected=!1,o._open=!1,o._connections=new Map,o._lostMessages=new Map,r&&r.constructor==Object?n=r:r&&(i=r.toString()),n=pt({debug:0,host:we.CLOUD_HOST,port:we.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:we.randomToken(),config:we.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},n),o._options=n,"/"===o._options.host&&(o._options.host=window.location.hostname),o._options.path&&("/"!==o._options.path[0]&&(o._options.path="/"+o._options.path),"/"!==o._options.path[o._options.path.length-1]&&(o._options.path+="/")),void 0===o._options.secure&&o._options.host!==we.CLOUD_HOST?o._options.secure=we.isSecure():o._options.host==we.CLOUD_HOST&&(o._options.secure=!0),o._options.logFunction&&Oe.default.setLogFunction(o._options.logFunction),Oe.default.logLevel=o._options.debug||0,o._api=new ut.API(n),o._socket=o._createServerConnection(),we.supports.audioVideo||we.supports.data?i&&!we.validateId(i)?(o._delayedAbort(De.InvalidID,'ID "'.concat(i,'" is invalid')),o):(i?o._initialize(i):o._api.retrieveId().then((function(e){return o._initialize(e)})).catch((function(e){return o._abort(De.ServerError,e)})),o):(o._delayedAbort(De.BrowserIncompatible,"The current browser does not support WebRTC"),o)}return dt(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var e,t,r=Object.create(null);try{for(var n=mt(this._connections),i=n.next();!i.done;i=n.next()){var o=vt(i.value,2),s=o[0],a=o[1];r[s]=a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var e=this,t=new Ue.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Me.Message,(function(t){e._handleMessage(t)})),t.on(Me.Error,(function(t){e._abort(De.SocketError,t)})),t.on(Me.Disconnected,(function(){e.disconnected||(e.emitError(De.Network,"Lost connection to server."),e.disconnect())})),t.on(Me.Close,(function(){e.disconnected||e._abort(De.SocketClosed,"Underlying socket is already closed.")})),t},t.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},t.prototype._handleMessage=function(e){var t,r,n=e.type,i=e.payload,o=e.src;switch(n){case Le.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Le.Error:this._abort(De.ServerError,i.msg);break;case Le.IdTaken:this._abort(De.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Le.InvalidKey:this._abort(De.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Le.Leave:Oe.default.log("Received leave message from ".concat(o)),this._cleanupPeer(o),this._connections.delete(o);break;case Le.Expire:this.emitError(De.PeerUnavailable,"Could not connect to peer ".concat(o));break;case Le.Offer:var s=i.connectionId;if((d=this.getConnection(o,s))&&(d.close(),Oe.default.warn("Offer received for existing Connection ID:".concat(s))),i.type===je.Media){var a=new Ze.MediaConnection(o,this,{connectionId:s,_payload:i,metadata:i.metadata});d=a,this._addConnection(o,d),this.emit("call",a)}else{if(i.type!==je.Data)return void Oe.default.warn("Received malformed connection type:".concat(i.type));var c=new nt.DataConnection(o,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});d=c,this._addConnection(o,d),this.emit("connection",c)}var u=this._getMessages(s);try{for(var l=mt(u),h=l.next();!h.done;h=l.next()){var f=h.value;d.handleMessage(f)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}break;default:if(!i)return void Oe.default.warn("You received a malformed message from ".concat(o," of type ").concat(n));var d;s=i.connectionId,(d=this.getConnection(o,s))&&d.peerConnection?d.handleMessage(e):s?this._storeMessage(s,e):Oe.default.warn("You received an unrecognized message:",e)}},t.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},t.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},t.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return Oe.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(De.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var r=new nt.DataConnection(e,this,t);return this._addConnection(e,r),r},t.prototype.call=function(e,t,r){if(void 0===r&&(r={}),this.disconnected)return Oe.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(De.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){var n=new Ze.MediaConnection(e,this,pt(pt({},r),{_stream:t}));return this._addConnection(e,n),n}Oe.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(e,t){Oe.default.log("add connection ".concat(t.type,":").concat(t.connectionId," to peerId:").concat(e)),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},t.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)},t.prototype.getConnection=function(e,t){var r,n,i=this._connections.get(e);if(!i)return null;try{for(var o=mt(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.connectionId===t)return a}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null},t.prototype._delayedAbort=function(e,t){var r=this;setTimeout((function(){r._abort(e,t)}),0)},t.prototype._abort=function(e,t){Oe.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(e,t){var r;Oe.default.error("Error:",t),(r="string"==typeof t?new Error(t):t).type=e,this.emit("error",r)},t.prototype.destroy=function(){this.destroyed||(Oe.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var e,t;try{for(var r=mt(this._connections.keys()),n=r.next();!n.done;n=r.next()){var i=n.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(e){var t,r,n=this._connections.get(e);if(n)try{for(var i=mt(n),o=i.next();!o.done;o=i.next())o.value.close()}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;Oe.default.log("Disconnect peer with ID:".concat(e)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)Oe.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));Oe.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then((function(t){return e(t)})).catch((function(e){return t._abort(De.ServerError,e)}))},t.DEFAULT_KEY="peerjs",t}(ke.EventEmitter),yt=r(3736),_t=r(311),bt=r(3622),wt=r(2787);class kt{constructor(){this.router=new _t.F0}listen(e){e.data.on((t=>{const r=this.router.incoming(t,e);(0,bt.lZ)(r)||e.send(r)}))}reset(){this.router=new _t.F0}get(e,t){return this.router.get(e,t)}post(e,t){return this.router.post(e,t)}form(e,t,r){this.get(e,(({res:e})=>{e.formContent(t,r)}))}submit(e,t){this.post(e,(e=>{return r=this,n=void 0,o=function*(){yield e.req.formDataContent((r=>t(e,r))),yield e.req.catch((t=>{console.warn(`expected ${wt.SF} got ${e.req.content_type}`);for(const e of t)console.error(e)}))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,n||[])).next())}));var r,n,i,o}))}static(e,...t){this.get(e,(({res:e})=>{e.textContent(...t)}))}sequence(e,...t){this.get(e,(({res:e})=>{e.sequence(...t)}))}redirect(e,t){this.get(e,(({res:e})=>{e.redirect(t)}))}}class Ct{constructor(){this.dispatcher=new _t.Up,this.close=new yt.i((()=>{})),this.error=new yt.i((e=>{})),this.data=new yt.i((e=>{})),this.data.on((e=>{this.dispatcher.write(e)}))}write(e){this.data.emit(e)}request(e){return new Promise(((t,r)=>{this.dispatcher.request(e).then((r=>{return n=this,i=void 0,s=function*(){const n=new _t.wN(r),i=n.redirect();if(i){const r=_t.yp.mimic(e);r.path=i,t(yield this.request(r.build()))}else t(n)},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s})).catch((e=>r(e))),this.send(e)}))}get(e,t){const r=new _t.yp("GET",Object.assign(Object.assign({},t),{path:e}));return this.request(r.build())}post(e,t,r){const n=new _t.yp("POST",Object.assign(Object.assign({},r),{path:e}));return n.content=t,this.request(n.build())}}class St extends Ct{constructor(e){super(),this.connection=e,e.on("close",(()=>{this.close.emit()})),e.on("data",(e=>{"string"==typeof e&&(e=JSON.parse(e)),this.write(e)})),e.on("error",(e=>{this.error.emit(e)}))}send(e){this.connection.send(e)}end(){this.connection.close()}}var xt=r(2205);class Et{constructor(){var e;this.api=new kt,this.accept=!1,this.connection=new yt.i((e=>{})),this.ready=new yt.i((()=>{})),this.discoveryID=null!==(e=window.sessionStorage.getItem("discovery_id"))&&void 0!==e?e:(0,xt.k)(16),window.sessionStorage.setItem("discovery_id",this.discoveryID),this.peerID=this.expand(this.discoveryID)}expand(e){return"WJSF9a8594h32_"+e}setup(){this.peer=new gt(this.peerID),this.peer.on("connection",(e=>this.incoming(e))),this.peer.on("open",(e=>{this._id=e,this.ready.emit()})),this.peer.on("error",console.error),this.peer.on("close",console.error)}incoming(e){if(!this.accept)return e.close();this.connection.emit(this.listen(e))}listen(e){const t=new St(e);return this.api.listen(t),t}start(){this.peer||this.setup(),this.accept=!0}stop(){this.accept=!1}get id(){if(this._id)return this.discoveryID}url(e,t){return`${window.location.origin}/${e}?${t}=${this.discoveryID}`}connect(e){return new Promise(((t,r)=>{const n=this.peer.connect(this.expand(e)),i=e=>r(e);n.on("open",(()=>{n.off("error",i),t(this.listen(n))})),n.on("error",i)}))}}},8218:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});class n{constructor(){this.waiting=!0,this.resolved=!1,this.rejected=!1,this.promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this.waiting=!1,this.resolved=!0,this._resolve(e)}reject(e){this.waiting=!1,this.rejected=!0,this._reject(e)}timeout(e,t){setTimeout((()=>{this.waiting&&this.reject(new i(t))}),e)}}class i extends Error{}},3736:(e,t,r)=>{"use strict";r.d(t,{i:()=>n});class n{constructor(e){this.listeners=new Set,this.errorHandler=e=>{throw e}}on(e){this.listeners.add(e)}off(e){this.listeners.delete(e)}once(e){const t=(...r)=>{this.off(t),e(...r)};this.on(t)}emit(...e){for(const t of this.listeners.values())try{t(...e)}catch(e){this.errorHandler(e)}}}},7063:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var n=r(8218),i=r(3622),o=r(3104),s=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function a(e){const t=new n.B,r={},a=(0,o.RK)(e);return function e(n){return s(this,void 0,void 0,(function*(){if(n>=a.length)return t.resolve(r);if(n<0)return t.resolve(null);const[o,s]=a[n],c=yield s(r);if((0,i.lZ)(c))return e(n-1);r[o]=c,e(n+1)}))}(0),t.promise}},3622:(e,t,r)=>{"use strict";r.d(t,{SE:()=>o,Sk:()=>a,cp:()=>s,lZ:()=>i});var n=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function i(e){return null==e}function o(e,t){return n(this,void 0,void 0,(function*(){return i(e)?null:t(yield e)}))}function s(e,t){return Array.from(e).every((e=>t.includes(e)))}const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_"},7948:(e,t,r)=>{"use strict";r.d(t,{cv:()=>o,vp:()=>i});var n=r(1354);function i(e){return(0,n.MD5)(e).toString(n.enc.Base64url)}function o(e,t){return(0,n.HmacSHA256)(e,t).toString(n.enc.Base64url)}},2205:(e,t,r)=>{"use strict";r.d(t,{k:()=>s,V:()=>o});var n=r(7948);function i(e){const t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}function o(e=""){const t=new window.TextDecoder("utf-8");return e+(0,n.vp)(t.decode(i(256)))}function s(e=32){return Array.from(i(e)).map((e=>"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"[e%62])).join("")}},3104:(e,t,r)=>{"use strict";r.d(t,{RK:()=>n});const n=e=>Object.entries(e)},2480:()=>{},726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r(942)}},e=>{e(e.s=3181)}]);